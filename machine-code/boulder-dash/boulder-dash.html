---
layout: no-sidebar
---
<!doctype html>

<html>
<head>
<meta charset="utf-8"/>
<style>.disass_container {
	font-family: monospace;
}
.disass_comment {
	font-family: inherit;
	white-space: pre;
	color : blue;
}
.disass_code {
	font-family: inherit;
	white-space: pre;
}
.disass_hole {
	border: 2px solid red;
}
.disass_basic {white-space: pre;
}
.disass_notinterested {
	background-color: orange;
}
.disass_intro {
	background-color: lightgreen;
}
</style>
</head>

<body>


<div class="disass_container"><a href="#78c9">.AnimateGameCharsAndHandleTopLineSwitch</a><br/>
<a href="#782a">.AnimateRockford</a><br/>
<a href="#7487">.AnimateTitleScreenBkgndChar</a><br/>
<a href="#6b04">.BackupTopLine</a><br/>
<a href="#7439">.BlankLines0and4ofSpaceChars</a><br/>
<a href="#7e8e">.BufferLevel</a><br/>
<a href="#74b3">.CalcScrollOffsets_XIfNeeded_YIfNeeded</a><br/>
<a href="#74bb">.CalcXScrollOffsets_X_YIfNeeded</a><br/>
<a href="#8128">.CaveCmdDrawFilledRect</a><br/>
<a href="#80f3">.CaveCmdDrawLine</a><br/>
<a href="#813f">.CaveCmdDrawRectLine</a><br/>
<a href="#8859">.CaveComplete</a><br/>
<a href="#820f">.CaveStoreOuterSteelWall</a><br/>
<a href="#8100">.CaveUnpackSubFillRect</a><br/>
<a href="#6e7c">.CheckIfFallingObjectKillsAnimal</a><br/>
<a href="#715e">.CheckIfGotDiamondQuota</a><br/>
<a href="#708c">.CheckIfLevelTimeIsUp</a><br/>
<a href="#764a">.ChooseScrollDirection</a><br/>
<a href="#762d">.ChooseXScrollDirection</a><br/>
<a href="#7610">.ChooseYScrollDirection</a><br/>
<a href="#76f9">.CoverLevel</a><br/>
<a href="#73a5">.CreateScannedStationaryBoulder</a><br/>
<a href="#7dc3">.DeathClick</a><br/>
<a href="#7d03">.Delay</a><br/>
<a href="#8913">.DemoModeRunCave</a><br/>
<a href="#7144">.DiamondQuotaDigitsToString</a><br/>
<a href="#8180">.ExecuteLevelDrawCommands</a><br/>
<a href="#8100">.ExecuteLevelDrawCommands::DrawFilledRect</a><br/>
<a href="#80cc">.ExecuteLevelDrawCommands::DrawLine</a><br/>
<a href="#80bc">.ExecuteLevelDrawCommands::DrawLine::StepTable</a><br/>
<a href="#8128">.ExecuteLevelDrawCommands::OutputFilledRect</a><br/>
<a href="#80f3">.ExecuteLevelDrawCommands::OutputLine</a><br/>
<a href="#813f">.ExecuteLevelDrawCommands::OutputRect</a><br/>
<a href="#80b2">.ExecuteLevelDrawCommands::OutputSingle</a><br/>
<a href="#809e">.ExecuteLevelDrawCommands::SetOutputPointer</a><br/>
<a href="#6d62">.Explode3x3Cells</a><br/>
<a href="#6d22">.Explode3x3CellsDownOneRow</a><br/>
<a href="#72b7">.ExplodeToSpaceObjectSequenceTable</a><br/>
<a href="#6da5">.ExplosionSIDVoiceTable</a><br/>
<a href="#7039">.ExtraLife</a><br/>
<a href="#7454">.ExtraLifeFX</a><br/>
<a href="#7c91">.FWDAROProcessRandomObjectsForCell</a><br/>
<a href="#6e56">.FallingBoulderSoundFX</a><br/>
<a href="#6e28">.FallingDiamondSoundFX</a><br/>
<a href="#76db">.FillExpandedLatticeWithScrollingSteelWallChar</a><br/>
<a href="#70f1">.FlashingEntryBoxSecondTick</a><br/>
<a href="#7d0c">.FourDelays</a><br/>
<a href="#820f">.FrameLevelWithSteelWall</a><br/>
<a href="#7b2b">.GameIRQActions</a><br/>
<a href="#70c5">.GameSecondTick</a><br/>
<a href="#70e0">.GameSecondTickWithAmoebaProcessing</a><br/>
<a href="#84a2">.HandleCaveAndLevelSecection</a><br/>
<a href="#7d6b">.HandleInGameKeys</a><br/>
<a href="#7236">.HandleJoystickForRockford</a><br/>
<a href="#8467">.HandleNumPlayersAndJoysticks</a><br/>
<a href="#7111">.HandleTick</a><br/>
<a href="#705d">.IncrementScore</a><br/>
<a href="#897a">.InitAll</a><br/>
<a href="#8a15">.InitGameState</a><br/>
<a href="#8746">.InitPlayers</a><br/>
<a href="#7edc">.InitVarsBeforePlayingCave</a><br/>
<a href="#7087">.InitiateDiamondQuotaReachedSound</a><br/>
<a href="#7c91">.InstallRandomCaveObjectForCell</a><br/>
<a href="#8897">.KillPlayer</a><br/>
<a href="#7e8e">.LoadCave</a><br/>
<a href="#876e">.LoseLife</a><br/>
<a href="#7a9b">.MagicWallFX</a><br/>
<a href="#8ab3">.Main</a><br/>
<a href="#838d">.MakeF1ScreenControlsLightBlue</a><br/>
<a href="#7211">.MoveRockfordIfPossible</a><br/>
<a href="#83ac">.MusicTickRoutine</a><br/>
<a href="#8841">.NextCave</a><br/>
<a href="#7e41">.NumTo3DigitDigits</a><br/>
<a href="#5f68">.ObjHandlerVectorTable</a><br/>
<a href="#70e0">.OneSecondTickForAmeoba</a><br/>
<a href="#70f1">.OneSecondTickForMagicWall</a><br/>
<a href="#7fce">.OutOfTimeLoop</a><br/>
<a href="#88ab">.PerformCaveExitAction</a><br/>
<a href="#7cab">.PlaceRandomObjs</a><br/>
<a href="#77a9">.PlayRevealLevelSoundAndRedefineChar</a><br/>
<a href="#802e">.PostCaveRunActions</a><br/>
<a href="#7da3">.PreTickAmoebaProcessing</a><br/>
<a href="#6fd0">.ProcessAmoeba</a><br/>
<a href="#6ead">.ProcessButterfly</a><br/>
<a href="#72d3">.ProcessExplosion</a><br/>
<a href="#73ad">.ProcessFallingBoulder</a><br/>
<a href="#6f05">.ProcessFallingDiamond</a><br/>
<a href="#6dda">.ProcessFirefly</a><br/>
<a href="#6d54">.ProcessHiddenOutbox</a><br/>
<a href="#7344">.ProcessInAndOutBoxes</a><br/>
<a href="#7294">.ProcessRockford</a><br/>
<a href="#72f0">.ProcessRockfordsAppearance</a><br/>
<a href="#7360">.ProcessStationaryBoulder</a><br/>
<a href="#6f87">.ProcessStationaryDiamond</a><br/>
<a href="#7dd9">.ProcessWorld</a><br/>
<a href="#6ced">.PseudoRandom</a><br/>
<a href="#7760">.RandomlyUncoverScreen</a><br/>
<a href="#8a81">.RasterSetTitleMode</a><br/>
<a href="#6b69">.ReadFireButtonCurrentPlayer</a><br/>
<a href="#6b6b">.ReadFireButtonPlayerInA</a><br/>
<a href="#6b5d">.ReadJoystickDirectionPort1</a><br/>
<a href="#6b63">.ReadJoystickDirectionPort2</a><br/>
<a href="#7a86">.RedefineMagicWallCharsToNormalWall</a><br/>
<a href="#7329">.RenderSteelWallInExpandedLattice</a><br/>
<a href="#7311">.RenderSteelWallInExpandedLatticeHelper</a><br/>
<a href="#895e">.ResetLastAndHighScoresAndPlayerInfoText</a><br/>
<a href="#7cf4">.ResetSound</a><br/>
<a href="#76cd">.ResetWorldCurrentCellPtr</a><br/>
<a href="#7191">.RockfordMovingToDiamond</a><br/>
<a href="#71ab">.RockfordTriesToMoveBoulder</a><br/>
<a href="#88fb">.RunCave</a><br/>
<a href="#859b">.RunTitleScreen</a><br/>
<a href="#74e0">.ScheduleYScroll</a><br/>
<a href="#7151">.ScoreIncrementToString</a><br/>
<a href="#87c8">.ScoreTimeRemainingSound</a><br/>
<a href="#76ad">.Scroller</a><br/>
<a href="#7487">.ScrollingBGTick</a><br/>
<a href="#842e">.ScrollingBGUpdateFillChars</a><br/>
<a href="#6ced">.SeededRandomNumber</a><br/>
<a href="#6cb6">.SetCaveCellAndScreenToObject</a><br/>
<a href="#6cb6">.SetCell</a><br/>
<a href="#6d16">.SetCellButPreserveSteelWall</a><br/>
<a href="#6c80">.SetCellInExpandedLattice</a><br/>
<a href="#6ae3">.SetColourRamForCave</a><br/>
<a href="#6c9b">.SetExpandedLatticeOutputPtr</a><br/>
<a href="#8722">.SetLevel</a><br/>
<a href="#6b16">.SetTopLineText</a><br/>
<a href="#7f9e">.SetTopLineTextToGameOverAndDelay</a><br/>
<a href="#7105">.SetTopLineToScore</a><br/>
<a href="#6ae3">.SetupColourRam</a><br/>
<a href="#861b">.SetupTitleScreen</a><br/>
<a href="#8227">.SetupTitleScreenText</a><br/>
<a href="#7971">.SoundFX</a><br/>
<a href="#8ab3">.Start</a><br/>
<a href="#8822">.StashScores</a><br/>
<a href="#75d5">.StopScrollingAtEdges</a><br/>
<a href="#7111">.SubSecondTick</a><br/>
<a href="#6dc1">.TestForExplosionByContactWithRockfordOrAmoeba</a><br/>
<a href="#6db4">.TestForRockfordOrAmoeba</a><br/>
<a href="#6e65">.TestIfObjectSlippery</a><br/>
<a href="#6ad0">.TimeBasedRandomNumber</a><br/>
<a href="#709d">.TimeRunningOutFX</a><br/>
<a href="#8446">.TitleIRQActions</a><br/>
<a href="#81f0">.TitleScreenFillInPlayerAndJoystick</a><br/>
<a href="#8518">.TitleScreenLoop</a><br/>
<a href="#6ad0">.TrueRandom</a><br/>
<a href="#71bd">.TryToMoveRockford</a><br/>
<a href="#8180">.UnpackCave</a><br/>
<a href="#87fa">.UpdateHighScoreIfNeeded</a><br/>
<a href="#6c80">.UpdateOneCellForScreen</a><br/>
<a href="#7fad">.WaitForDelayOrNextPlayersButton</a><br/>
<a href="#7958">.WhiteFlash</a><br/>
<a href="#6cd7">.__ProcessWorld__ClearCurrentCell</a><br/>
<a href="#6efb">.__ProcessWorld__CreateScannedStationaryDiamond</a><br/>
<a href="#7d19">DelaySpaceKeyAborts</a><br/>
<a href="#7edc">InitGameVariablesFromLevelData</a><br/>
<a href="#7d2b">PauseLoop</a><br/>
<br/>
<a name="5000"></a>


<b>.TitleCharDataBlock0</b>

<br/><b>5000</b><br/>
<img src="5000.png"/><br/>



<b>.TitleCharDataBlock1</b>

<br/><b>5100</b><br/>
<img src="5100.png"/><br/>



<b>.TitleCharDataBlock2</b>

<br/><b>5200</b><br/>
<img src="5200.png"/><br/>



<b>.TitleCharDataBlock3</b>

<br/><b>5300</b><br/>
<img src="5300.png"/><br/>
<a name="53b0"></a>

<div class="disass_comment">; 0  : Offset
; 1&2: Adjust (L&H)
; 
; Offset: 0($00)	Adjust: -162
; Offset: 1($01)	Adjust: -160
; Offset: 2($02)	Adjust: -158
; Offset: 40($28)	Adjust: -2
; Offset: 39($27)	Adjust: -4
; Offset: 41($29)	Adjust: 0
; Offset: 42($2a)	Adjust: 2
; Offset: 43($2b)	Adjust: 4
; Offset: 80($50)	Adjust: 158
; Offset: 81($51)	Adjust: 160
; Offset: 82($52) 	Adjust: 162
; Offset: 120($78)	Adjust: 318
; Offset: 121($79)	Adjust: 320
; Offset: 122($7a)	Adjust: 322
</div>

<b>.ExpandedLatticeOffsetAdjustTable</b>

<div class="disass_code"><b>53b0</b>   00 5e ff 01  60 ff 02 62  ff 28 fe ff  27 fc ff 29
<b>53c0</b>   00 00 2a 02  00 2b 04 00  50 9e 00 51  a0 00 52 a2
<b>53d0</b>   00 78 3e 01  79 40 01 7a  42 01
</div>



<b>.ExpandedLatticeLineAddressTable</b>

<div class="disass_comment">; Expanded lattice: $4003 - $4dc2
</div>
<div class="disass_code"><b>53da</b>   03 40 a3 40  43 41 e3 41  83 42 23 43  c3 43 63 44
<b>53ea</b>   03 45 a3 45  43 46 e3 46  83 47 23 48  c3 48 63 49
<b>53fa</b>   03 4a a3 4a  43 4b e3 4b  83 4c 23 4d
</div>
<a name="5406"></a>


<b>.AnimatedCharData</b>

<br/><b>5406</b><br/>
<img src="5406.png"/><br/>



<b>.LevelOffsetArray</b>

<div class="disass_code"><b>5806</b>   00 00 31 00  8a 00 b1 00  fc 00 83 01  14 02 5c 02
<b>5816</b>   b3 02 f6 02  5b 03 c1 03  2b 04 69 04  c3 04 fe 04
<b>5826</b>   5d 05 99 05  ef 05 2d 06
</div>


<div class="disass_comment">; CaveNumber
; MagicWallMillingTimeOrAmoeba3PercentMax
; InitialDiamondValue
; ExtraDiamondValue
; InitialRandomSeedForSublevel1
; InitialRandomSeedForSublevel2
; InitialRandomSeedForSublevel3
; InitialRandomSeedForSublevel4
; InitialRandomSeedForSublevel5
; DiamondsNeededForSublevel1
; DiamondsNeededForSublevel2
; DiamondsNeededForSublevel3
; DiamondsNeededForSublevel4
; DiamondsNeededForSublevel5
; CaveTimeForSublevel1
; CaveTimeForSublevel2
; CaveTimeForSublevel3
; CaveTimeForSublevel4
; CaveTimeForSublevel5
; BackgroundColour1
; BackgroundColour2
; ForegroundColour
; ?
; ?
; RandomObjectNumber1
; RandomObjectNumber2
; RandomObjectNumber3
; RandomObjectNumber4
; ProbabilityOfObject1
; ProbabilityOfObject2
; ProbabilityOfObject3
; ProbabilityOfObject4
; /\ 32($20) bytes length /\
</div>

<b>.CaveAData</b>

<div class="disass_comment">;  Variable \/
; struct
; {
; CmdObj;
; Params[];
; } Objects[]
; 
; 76543210
; ccoooooo
; c: Command
; o: Object
; 
; Commands:
; $00 - Single(x, y)
; $40 - Line(x, y, len, dir) --- enum dir {N=0, NE=1, E=2, SE=3, S=4, SW=5, W=6, NW=7};
; $80 - FilledRect(x, y, width, height, interior)
; $c0 - Rect(x, y, width, height)
; 
; Objects:
; $00 - Empty (. [space])
; $01 - Dirt (A)
; $02 - Wall (B)
; $03 - Magic wall (C)
; $04 - Exit (D)
; $07 - Steel wall (G)
; $08 - Firefly (H)
; $10 - Boulder (P)
; $14 - Diamond (T)
; $25 - Inbox (%)
; $30 - Butterfly (0 [number])
; $32 - Butterfly (2)
; $3a - Amoeba (:)
</div>
<div class="disass_code"><b>582e</b>   01 14 0a 0f  0a 0b 0c 0d  0e 0c 0c 0c  0c 0c 96 6e
<b>583e</b>   46 28 1e 08  0b 09 d4 20  00 10 14 00  3c 32 09 00
<b>584e</b>   42 01 09 1e  02 42 09 10  1e 02 25 03  04 04 26 12
<b>585e</b>   ff
</div>


<div class="disass_comment">; >C:0850 GGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGG
; >C:0878 GAAAAAA.AATAP.AAAAAPAPAAAAAAA.AAAAPAAAAG
; >C:08a0 GAP%PAAAAAA.AAAAAAAAAPTAAPAAAA.AAAAA.AAG
; >C:08c8 GAAAAAAAAAA.AAPAAAAAPAPAAPAAAAAAAAPAAAAG
; >C:08f0 GPAPPAAAAAAAAAPAAAAAAPAAPAAAAPAAAPAAAAAG
; >C:0918 GPA.PAAAAAAAAA.PAAPAAAAAAAAPAAAAAAPAPPAG
; >C:0940 GAAA.AAPAAAAAAAAPAAAAAPA.PAAAAAAAAPAPPAG
; >C:0968 GBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBAAAPAAPAG
; >C:0990 GA.AAAPAATA.AAPAPAAAAAAAAAATAPTAAAAAA.AG
; >C:09b8 GAATAAAAAPAAAAA.AAAAAAAAPP.PAAPAAAAPAAAG
; >C:09e0 GAAAPAAPAPAAAAAAAAAAAAAAP.APAAPAAAAAAAAG
; >C:0a08 GAPAAAAAPAAAAAAAAPPPAAAAAAAPAA.ATAAAAPAG
; >C:0a30 GATAA.AAPA..AAAAAPAPTAATAAAAPAAAPAATA.AG
; >C:0a58 GA.PAAAAAAAAAAAAAAP.PAAPAAAAAAAATAAAAAPG
; >C:0a80 GAAAAAAAABBBBBBBBBBBBBBBBBBBBBBBBBBBBBBG
; >C:0aa8 G.PAAAAAAAAAPAAATAAAAPAAAAAPAAAPAAAAAAAG
; >C:0ad0 G.PAAAAAAAAA.PAAPAAAAAAAAPAAAAAAPAPPAADG
; >C:0af8 GA.AAPAAAAAAAAPAAAAAPA..AAAATAAAPAPPAAAG
; >C:0b20 GAAAAPTAAPAAAAAAAAPAAAAAAPAPTAAAAAAPAAAG
; >C:0b48 GAAA.AAPA.AAPAPPAAAAAAAAAPAPTAAAAAA.AAPG
; >C:0b70 GATAAAA.AAAAA.AAAAAAAAA.APAAPAAAAPAAAPAG
; >C:0b98 GGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGG
; 
</div>

<b>.CaveBData</b>

<div class="disass_code"><b>585f</b>   02 14 14 32  03 00 01 57  58 0a 0c 09  0d 0a 96 6e
<b>586f</b>   46 46 46 0a  04 09 00 00  00 10 14 08  3c 32 09 02
<b>587f</b>   42 01 08 26  02 42 01 0f  26 02 42 08  03 14 04 42
<b>588f</b>   10 03 14 04  42 18 03 14  04 42 20 03  14 04 40 01
<b>589f</b>   05 26 02 40  01 0b 26 02  40 01 12 26  02 40 14 03
<b>58af</b>   14 04 25 12  15 04 12 16  ff
</div>


<div class="disass_comment">; >C:0850 GGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGG
; >C:0878 GAPAAPAABAPAAATABAAA.APABPAAAAAABAAPPAAG
; >C:08a0 GAAAAAAABAAAAAAPBPPA.AAAB.AATAAABAAAAPAG
; >C:08c8 G......................................G
; >C:08f0 GTAAAAAABAPAAAAPBAPA.AA.BAAPAATABAAPAPAG
; >C:0918 GAAAAAAABAPAAAAPBAPA.PAABAAAAAPABAAA.AAG
; >C:0940 GBBBBBBBBBBBBBBBBBBB.BBBBBBBBBBBBBBBBBBG
; >C:0968 GAAAAPPABAAPAAAABAAA.AAPBAAAAPAABAAAAAPG
; >C:0990 GAAAAAAABAA.AAAABAAA.AAABAAAAPA.BAAAAAPG
; >C:09b8 G......................................G
; >C:09e0 GPAAPAAABAAAAPAABAAP.AAABAAAAAATBPAAAAAG
; >C:0a08 GPAAAAPABAAPAAPABAAA.A.PBAAAAAAABPAAAPAG
; >C:0a30 GAPAAAAABAAAPAAABAAA.A.PBAAAAAAAB.PAAPAG
; >C:0a58 GBBBBBBBBBBBBBBBBBBB.BBBBBBBBBBBBBBBBBBG
; >C:0a80 GPA..HAABAAAAPAPBAAA.AAABAPTAAPABAAAAAAG
; >C:0aa8 GAAAAAPABPAAAAAABAAT.AAAB.AAPAAABAPAPPAG
; >C:0ad0 G......................................G
; >C:0af8 GTAA.APABPAAAAPABAPA.AAPBAPAPAAABAAAAAAG
; >C:0b20 GAAAAAPABPAATAAABAAA.PAABAAPAAAABAAAPP.G
; >C:0b48 GATAAA.PBAAPAAAABA%T.PAABA.AAAAABAAAPP.G
; >C:0b70 GAPAAAA.BAA.AAPABADA.AAABAAAAPAPBAAAA.AG
; >C:0b98 GGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGG
; 
</div>

<b>.CaveCData</b>

<div class="disass_code"><b>58b8</b>   03 00 0f 00  00 32 36 34  37 18 17 18  17 15 96 64
<b>58c8</b>   5a 50 46 09  08 09 04 00  02 10 14 00  64 32 09 00
<b>58d8</b>   25 03 04 04  27 14 ff
</div>


<div class="disass_comment">; >C:0850 GGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGG
; >C:0878 GPABBABPPABAAAPBPAAPAAAABAAAPAAAAAPBATAG
; >C:08a0 GAA%BATAPABAAABBBAABAPAAAAPAAPAPAAABABPG
; >C:08c8 GAAAABAAPTAAPAAAABAAAAAPABBPAAAAAAABABBG
; >C:08f0 GTABAABPBPAAPAAAABAAAPAAAAAAPAPPAAAAAABG
; >C:0918 GPABAAABAAPABBAAPABBTAAAAAAAPAPPAAAAAABG
; >C:0940 GPPAAPAAAABAAAPAAAAAAPAPPAAAAAAPAATBBAAG
; >C:0968 GAAPABBAAPAPPAAABAAAAPAPPAAAAAABAAPABAPG
; >C:0990 GAABAAATAAAAAATAPAABBPAAPABABPAABPAATAPG
; >C:09b8 GPAPAAAABABBAATAPAABBPAAPAATABAAABAAPABG
; >C:09e0 GAPABBAAAAAPPBPAATABABPAABPAAABPAATAPAAG
; >C:0a08 GBABBAAAAAAPPBPAAPABABBAAABAAPABBAAPABBG
; >C:0a30 GABAPAPABAAABBPAAPAAAABAAAPAAAAABBAPABBG
; >C:0a58 GABAPAPABATABABPAABPAAAAPAAPAPPAAAABAAAG
; >C:0a80 GBAABPBPAAPAAAABAAATAAABAPBAAAAAABABBATG
; >C:0aa8 GBAAABBPAABATAAABPAAPAPAAAPABPAAAAAABAAG
; >C:0ad0 GBATAAAAPABBAAPABBPAAAAAAAPABPAAAAAABAAG
; >C:0af8 GAAPAAAABAAAPAAAAAAPAPPAAAAAABAAPABAAABG
; >C:0b20 GPABBAAPABBAAABAAAAPAPPAAAAAABAAPTAAPAAD
; >C:0b48 GBAAAPAAAAAAPAPTAAAAAAPAAABBAABPAATABAAG
; >C:0b70 GPPAAABAAAAAPAPTAAAAAABAAPABTATAPBAPAAAG
; >C:0b98 GGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGG
; 
</div>

<b>.CaveDData</b>

<div class="disass_code"><b>58df</b>   04 14 05 14  00 6e 70 73  77 24 24 24  24 24 78 64
<b>58ef</b>   50 3c 32 04  08 09 00 00  10 00 00 00  14 00 00 00
<b>58ff</b>   25 01 03 04  26 16 81 08  0a 04 04 00  30 0a 0b 81
<b>590f</b>   10 0a 04 04  00 30 12 0b  81 18 0a 04  04 00 30 1a
<b>591f</b>   0b 81 20 0a  04 04 00 30  22 0b ff
</div>


<div class="disass_comment">; >C:0850 GGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGG
; >C:0878 G%AAAAAPAAAAAAAAAAAAAAAAAAAAPAAAAAAAAPAG
; >C:08a0 GAAAAAPAAAAAAAAAAAAAAPAAAAAAAAAAAAAAAAAG
; >C:08c8 GAAAAAAAAPAAPAAAAAAAAAAAAAAAAAAAAAAAAAAG
; >C:08f0 GPAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAG
; >C:0918 GAAAAAAAAAAAAAAAAAAAPAAAAAAAAAAAAAAAAAAG
; >C:0940 GAPAAAAAAAAAAAAAAAAAAAAAPAAAAAAAAAPAAAAG
; >C:0968 GAAPAAAAAPAAAAAAAAAAAPAAPAAAAAAAAAAAAAPG
; >C:0990 GAAAAAAPAAAAAAPAAAAAAAAAAAAAAAAAAAAAPAAG
; >C:09b8 GAAAAAAAA.0AAAPAA.0AAAAAA.0AAAAAA.0AAAAG
; >C:09e0 GAAAAAAAA..AAAPAA..AAAAAA..AAAAAA..APAAG
; >C:0a08 GAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAG
; >C:0a30 GAAAPAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPAAAG
; >C:0a58 GAAAPAAAAAPAAAAAAAAAAAAAAAAAAAAAAAAAAAAG
; >C:0a80 GAAAAAAPAAAAAAAAAAAPAAAAAAAAAAAAAAAAAAPG
; >C:0aa8 GAAAAAAAAAAAPAAAAAAAPAAAAAAAAAAAAAAAAAAG
; >C:0ad0 GAAPAAAAAAAAAAAAAAPAAAAAAAAAAAAAAAAAAAAG
; >C:0af8 GAAAAAAAAAAAAAAAAAAAAAPAAAAAAAAAPAAAAAAG
; >C:0b20 GAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPAAPAAG
; >C:0b48 GAAAAPAAAAAAPAPPAAAAAAAAAAAAAAAAAAPAAAAG
; >C:0b70 GAAAAAAAAAAAPAPPAAAAAAAAAPAAPAPAAAAAAADG
; >C:0b98 GGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGG
; 
</div>

<b>.CaveEData</b>

<div class="disass_code"><b>592a</b>   05 14 32 5a  00 00 00 00  00 04 05 06  07 08 96 78
<b>593a</b>   5a 3c 1e 09  0a 09 00 00  00 00 00 00  00 00 00 00
<b>594a</b>   25 01 03 04  27 16 80 08  0a 03 03 00  80 10 0a 03
<b>595a</b>   03 00 80 18  0a 03 03 00  80 20 0a 03  03 00 14 09
<b>596a</b>   0c 08 0a 0a  14 11 0c 08  12 0a 14 19  0c 08 1a 0a
<b>597a</b>   14 21 0c 08  22 0a 80 08  10 03 03 00  80 10 10 03
<b>598a</b>   03 00 80 18  10 03 03 00  80 20 10 03  03 00 14 09
<b>599a</b>   12 08 0a 10  14 11 12 08  12 10 14 19  12 08 1a 10
<b>59aa</b>   14 21 12 08  22 10 ff
</div>


<div class="disass_comment">; >C:0850 GGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGG
; >C:0878 G%AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAG
; >C:08a0 GAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAG
; >C:08c8 GAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAG
; >C:08f0 GAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAG
; >C:0918 GAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAG
; >C:0940 GAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAG
; >C:0968 GAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAG
; >C:0990 GAAAAAAA..HAAAAA..HAAAAA..HAAAAA..HAAAAG
; >C:09b8 GAAAAAAA...AAAAA...AAAAA...AAAAA...AAAAG
; >C:09e0 GAAAAAAA.T.AAAAA.T.AAAAA.T.AAAAA.T.AAAAG
; >C:0a08 GAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAG
; >C:0a30 GAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAG
; >C:0a58 GAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAG
; >C:0a80 GAAAAAAA..HAAAAA..HAAAAA..HAAAAA..HAAAAG
; >C:0aa8 GAAAAAAA...AAAAA...AAAAA...AAAAA...AAAAG
; >C:0ad0 GAAAAAAA.T.AAAAA.T.AAAAA.T.AAAAA.T.AAAAG
; >C:0af8 GAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAG
; >C:0b20 GAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAG
; >C:0b48 GAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAG
; >C:0b70 GAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAD
; >C:0b98 GGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGG
; 
</div>

<b>.CaveFData</b>

<div class="disass_code"><b>59b1</b>   06 14 28 3c  00 14 15 16  17 04 06 07  08 08 96 78
<b>59c1</b>   64 5a 50 0e  0a 09 00 00  10 00 00 00  32 00 00 00
<b>59d1</b>   82 01 03 0a  04 00 82 01  06 0a 04 00  82 01 09 0a
<b>59e1</b>   04 00 82 01  0c 0a 04 00  41 0a 03 0d  04 14 03 05
<b>59f1</b>   08 04 05 14  03 08 08 04  08 14 03 0b  08 04 0b 14
<b>5a01</b>   03 0e 08 04  0e 82 1d 03  0a 04 00 82  1d 06 0a 04
<b>5a11</b>   00 82 1d 09  0a 04 00 82  1d 0c 0a 04  00 41 1d 03
<b>5a21</b>   0d 04 14 24  05 08 23 05  14 24 08 08  23 08 14 24
<b>5a31</b>   0b 08 23 0b  14 24 0e 08  23 0e 25 03  14 04 26 14
<b>5a41</b>   ff
</div>


<div class="disass_comment">; >C:0850 GGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGG
; >C:0878 GBBBBBBBBBAAAAPAPAAPAAAAAAAAPABBBBBBBBBG
; >C:08a0 GB........AAAAAAAAAAAPAAAAPAAA........BG
; >C:08c8 GB.TH.....AAPAAAAAAAAAAPAAAPAA.....HT.BG
; >C:08f0 GBBBBBBBBBAAPAAAAAAAAPAAAAAAPABBBBBBBBBG
; >C:0918 GB........AAAAAAPAAAPAAAAAAAPA........BG
; >C:0940 GB.TH.....AAAAPAAAAAAPAPPAAAAA.....HT.BG
; >C:0968 GBBBBBBBBBAPPAAAAAAAAPAPPAAAAABBBBBBBBBG
; >C:0990 GB........AAAAPAPAAAAPAAPAAAAA........BG
; >C:09b8 GB.TH.....AAAAPAPAAAAPAAPAAPAA.....HT.BG
; >C:09e0 GBBBBBBBBBAPPAPAAPAAAAPAAAPAAABBBBBBBBBG
; >C:0a08 GB........APPAPAAPAAAAAAAAAAAA........BG
; >C:0a30 GB.TH.....AAAAPAAPAAAAAAAAPAAA.....HT.BG
; >C:0a58 GBBBBBBBBBAAAAAPAAAPAAAAPAAPAABBBBBBBBBG
; >C:0a80 GAAAAPAPAAPAAAAAAAAPAAAAAPAAAAAAAAAAAAPG
; >C:0aa8 GAAAAAAPAAAAPAAAAPAAPAPAAAPAAPAAAAAAAAAG
; >C:0ad0 GAAPAAAAPAAAAAPAAAPAAAAAAAPAAPAAAAAAAAAG
; >C:0af8 GAAPAAAAAAAAPAAAAAAPAPPAAAAAAAAAPAAAAAAG
; >C:0b20 GPA%AAAPAAAAAAAAAAAPAPPAAAAAAAAAPPAAPADG
; >C:0b48 GAAAAPAAAAAAPAPPAAAAAAPAAAAAAAAPAAPAAAAG
; >C:0b70 GPPAAAAAAAAAPAPPAAAAAAAAAPAAPAPAPAAPAAAG
; >C:0b98 GGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGG
; 
</div>

<b>.CaveGData</b>

<div class="disass_code"><b>5a42</b>   07 4b 0a 14  02 07 08 0a  09 0f 14 19  19 19 78 78
<b>5a52</b>   78 78 78 09  0a 0d 00 00  00 10 08 00  64 28 02 00
<b>5a62</b>   42 01 07 0c  02 42 1c 05  0b 02 7a 13  15 02 02 14
<b>5a72</b>   04 06 14 04  0e 14 04 16  14 22 04 14  22 0c 14 22
<b>5a82</b>   16 25 14 03  04 27 07 ff
</div>


<div class="disass_comment">; >C:0850 GGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGG
; >C:0878 GA.AA.APPAAAAA.AAPA.%AAAA.PP.PAAPA.A..AG
; >C:08a0 G.AAPA.AA.A..AAAA.APAPA.AAA..PAAPATAA.AG
; >C:08c8 GPAAAAA..AHA..AAA.APAPA.AAA.BBBBBBBBBBBG
; >C:08f0 GAPATAAA.A..AAAAAA.AAPPAAPAAAA.A.AAA.A.G
; >C:0918 GBBBBBBBBBBBBAPA.AA...PAA.AAAA.AAAPAAAAD
; >C:0940 GPA.PAAAAAA.AAPA.AAA.AAPA..AAPA..HAAAAAG
; >C:0968 GPA.PAAAAAA.AA.PAAPAAAA.AAAPAAAAAAPAPPAG
; >C:0990 GAAA.AAP..AAA.AAPA..AAPA..AAA.AAAAPAPPAG
; >C:09b8 GAAA.AAPA.APAAAA.AAAHAAAAAAPAPAA..PAAPAG
; >C:09e0 G..AA.PAAAA.AAPAPAAAA.A..AAAAAAA..TAA.AG
; >C:0a08 GA.AAA.AA.A..AA.A..AAAAAPP.PAAPA.A.PAA.G
; >C:0a30 GAA.TAAPAPAAAA.A..AAAAAAP..PAAPA.A..AAAG
; >C:0a58 GAPA..AAPA..AAA.APAPA.AAA..PAA.AAAA.AAAG
; >C:0a80 GAAAA..APA..AAA.APAPA.APA.A.PAA.PAAAA.AG
; >C:0aa8 GA..AAAA.AAAA..AA.P.PAAPAAAA.AAAPAAA.APG
; >C:0ad0 GAAAAA.A..APPA.AAA..PAA.APAAA.PAAPAPAAAG
; >C:0af8 G.PAAAAAA.AAPA.APAAAA.A..AAPA..PAAAAAAAG
; >C:0b20 G.PAAAAAA.AA.PAAPAAAA.AAAPAAAAAAPAPPAAAG
; >C:0b48 GA.AAPA.AAA.AAPA..A::A..AAA.AAAAPAPPAAAG
; >C:0b70 GA.ATPHAAPAAAA.AAAPAAAAAAPAPHAAAAATPAAAG
; >C:0b98 GGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGG
; 
</div>

<b>.CaveHData</b>

<div class="disass_code"><b>5a8a</b>   08 14 0a 14  01 03 04 05  06 0a 0f 14  14 14 78 6e
<b>5a9a</b>   64 5a 50 02  0e 09 00 00  00 10 08 00  5a 32 02 00
<b>5aaa</b>   14 04 06 14  22 04 14 22  0c 04 00 05  25 14 03 42
<b>5aba</b>   01 07 0c 02  42 01 0f 0c  02 42 1c 05  0b 02 42 1c
<b>5aca</b>   0d 0b 02 43  0e 11 08 02  14 0c 10 00  0e 12 14 13
<b>5ada</b>   12 41 0e 0f  08 02 ff
</div>


<div class="disass_comment">; >C:0850 GGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGG
; >C:0878 G.A.PAA.A.AA.AAPA.AA%.AAPA..AAPA.PAAA.AG
; >C:08a0 GAPAPPAAAAAA.AAPAAAPAAAA.AAAPAAAAATPAPAG
; >C:08c8 D.PAAPAAA..AAAPAAPA.AAPAPAAABBBBBBBBBBBG
; >C:08f0 GAAAT.AAPA.HAAAAAPAAAAA.AAAAAAAAPP.PAAPG
; >C:0918 GBBBBBBBBBBBBAAPAPAAAA.A..AAAAAAP..PAAPG
; >C:0940 GA..AAA.AAPA..AAPA..AAAA.PPPAAAAA..PAA.G
; >C:0968 GAAA.PAAA.HAA.AAPA..AAAAAPAPPAAPA.A.PAAG
; >C:0990 GAAPA.AAPA.PAAAA.AAAAA.AAAP.PAAPAAAA.AAG
; >C:09b8 GAAAAAP.AAAAAA.A..HPPA.AAA..PAA.APAAAAPG
; >C:09e0 GPAPAAA.A.PAAAAAA.AAPAAAPAAAAPAAAATPA..G
; >C:0a08 GAAAAAAPA.PAAAAAAAAA.PAAPAAABBBBBBBBBBBG
; >C:0a30 GAPPAAAAAA.AAPA.AAA.AAPA..AAPA..AAA.PAAG
; >C:0a58 GBBBBBBBBBBBBPAAAAAAAA.AAAPAAAAAAPAPPAAG
; >C:0a80 GAAPAAA..AAATAAPA.AAPAPPAAAAAAAAAPAPPAAG
; >C:0aa8 GAA.AAPA.APAAACCCCCCCCAAAAAAAAA..PAAPAAG
; >C:0ad0 GPAA.PAAAAPAAP.PAAAT.AA.AAAAAAA..PAAPAAG
; >C:0af8 G.AAA.AAPA.AAAPA..AAAAAPPPPAAPA.A.PAA.PG
; >C:0b20 GA.PAAHAPAAAA.A..AAAAAAPP.PAAPAAA..AAAPG
; >C:0b48 GPA..AAPA..AAAAAPAPA.AAA..PAAPAAAA.AAAPG
; >C:0b70 GAAA..APAP.AAAAAPAPAAAAA...AA.APAAAAPAAG
; >C:0b98 GGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGG
; 
</div>

<b>.CaveIData</b>

<div class="disass_code"><b>5ae1</b>   09 14 05 0a  64 89 8c fb  33 4b 4b 50  55 5a 96 96
<b>5af1</b>   82 82 78 08  04 09 00 00  10 14 00 00  f0 78 00 00
<b>5b01</b>   82 05 0a 0d  0d 00 01 0c  0a 82 19 0a  0d 0d 00 01
<b>5b11</b>   1f 0a 42 11  12 09 02 40  11 13 09 02  25 07 0c 04
<b>5b21</b>   08 0c ff
</div>


<div class="disass_comment">; >C:0850 GGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGG
; >C:0878 GTTTPPTTPTTPAPPPPTPTTATTPTTPTTTTPPTPTPPG
; >C:08a0 GTPPTTTPPPTPTTPPPPPPTPPTATPTPPPPTPTTPPTG
; >C:08c8 GTTPPPPPPPTPTTPPAPPPTPPTTTPTPAPPTPPPTTPG
; >C:08f0 GPPTPTTPPPPPPTPPTTTAATTPPTPTTPPTPTTAPPTG
; >C:0918 GPPTPTTPPPPPPTPPTATPTPPPPTPTPTPPTTPPTPTG
; >C:0940 GTTTPPTPTATTPPTTPPTTTPPTPTPPPATPTTPPTPTG
; >C:0968 GPPPPPTPPTTTTAAPPPTPTTAPTPTTPAPPTTTTTTPG
; >C:0990 GTPTTBBBBBBBABBBBBTPPPPTPBBBBBBABBBBBBPG
; >C:09b8 GTATTB...........BPTTPPPTB...........BPG
; >C:09e0 GTPTPB.%D........BPTTPPPTB...........BPG
; >C:0a08 GTPPTB...........BPAPPTTPB...........BPG
; >C:0a30 GTPPTB...........BTTTTPTPB...........BTG
; >C:0a58 GPTTTB...........BTPPTATPB...........BTG
; >C:0a80 GPPPPB...........BTPPTTPPB...........BPG
; >C:0aa8 GTPTTB...........BAPTPPTPB...........BPG
; >C:0ad0 GTPTTB...........BBBBBBBBB...........BPG
; >C:0af8 GPPPTB...............................BPG
; >C:0b20 GPPPTB...........BTTAPTPTB...........BPG
; >C:0b48 GTTPPB...........BPPPTPTTB...........BPG
; >C:0b70 GTTAABBBBBBBBBBBBBTPPPTTTBBBBBBBBBBBBBTG
; >C:0b98 GGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGG
; 
</div>

<b>.CaveJData</b>

<div class="disass_code"><b>5b24</b>   0a 14 19 3c  00 00 00 00  00 0c 0c 0c  0c 0c 96 82
<b>5b34</b>   78 6e 64 06  08 09 00 00  00 00 00 00  00 00 00 00
<b>5b44</b>   25 0d 03 04  27 16 54 05  04 11 03 54  15 04 11 05
<b>5b54</b>   80 05 0b 11  03 08 c2 01  04 15 11 00  0d 04 c2 07
<b>5b64</b>   06 0d 0d 00  0d 06 c2 09  08 09 09 00  0d 08 c2 0b
<b>5b74</b>   0a 05 05 00  0d 0a 82 03  06 03 0f 08  00 04 06 54
<b>5b84</b>   04 10 04 04  ff
</div>


<div class="disass_comment">; >C:0850 GGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGG
; >C:0878 GAAAAAAAAAAAA%AAAAAAAAAAAAAAAAAAAAAAAAAG
; >C:08a0 GBBBBBBBBBBBB.BBBBBBBBAAAAAAAAAAAAAAAAAG
; >C:08c8 GBAAAATAAAAAAAAAAAAATBAAAAAAAAAAAAAAAAAG
; >C:08f0 GBAB.BABBBBBB.BBBBBBABAAAAAAAAAAAAAAAAAG
; >C:0918 GBABHBABTAAAAAAAAATBABAAAAAAAAAAAAAAAAAG
; >C:0940 GBABHBABABBBB.BBBBABABAAAAAAAAAAAAAAAAAG
; >C:0968 GBABHBABABTAAAAATBABABAAAAAAAAAAAAAAAAAG
; >C:0990 GBABHBABABABB.BBABABABAAAAAAAAAAAAAAAAAG
; >C:09b8 GBABHB.B.B.B...B.B.B.BAAAAAAAAAAAAAAAAAG
; >C:09e0 GBABHBHBHBHBHHHBHBHBHBAAAAAAAAAAAAAAAAAG
; >C:0a08 GBABHB.B.B.B...B.B.B.BAAAAAAAAAAAAAAAAAG
; >C:0a30 GBABHBABABABBBBBABABABAAAAAAAAAAAAAAAAAG
; >C:0a58 GBABHBABABTAAAAATBABABAAAAAAAAAAAAAAAAAG
; >C:0a80 GBABTBABABBBBBBBBBABABAAAAAAAAAAAAAAAAAG
; >C:0aa8 GBABTBABTAAAAAAAAATBABAAAAAAAAAAAAAAAAAG
; >C:0ad0 GBABTBABBBBBBBBBBBBBABAAAAAAAAAAAAAAAAAG
; >C:0af8 GBABTBTAAAAAAAAAAAAATBAAAAAAAAAAAAAAAAAG
; >C:0b20 GBBBBBBBBBBBBBBBBBBBBBAAAAAAAAAAAAAAAAAG
; >C:0b48 GAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAG
; >C:0b70 GAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAD
; >C:0b98 GGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGG
; 
</div>

<b>.CaveKData</b>

<div class="disass_code"><b>5b89</b>   0b 14 32 00  00 04 66 97  64 06 06 06  06 06 78 78
<b>5b99</b>   96 96 f0 0b  08 09 00 00  00 10 08 00  64 50 02 00
<b>5ba9</b>   42 0a 03 09  04 42 14 03  09 04 42 1e  03 09 04 42
<b>5bb9</b>   09 16 09 00  42 0c 0f 11  02 42 05 0b  09 02 42 0f
<b>5bc9</b>   0b 09 02 42  19 0b 09 02  42 1c 13 0b  01 14 04 03
<b>5bd9</b>   14 0e 03 14  18 03 14 22  03 14 04 16  14 23 15 25
<b>5be9</b>   14 14 04 26  11 ff
</div>


<div class="disass_comment">; >C:0850 GGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGG
; >C:0878 GPAPTAPPPABAAATPPAAPBAAATAAAPABAAATPAPAG
; >C:08a0 GAAA.APAPABAAAP.PAAPBPAAAAPAAPBPAAAPAPPG
; >C:08c8 GAAAA.AAPPBAPAAAAPAABAAPA.PPAABAAAAPAPPG
; >C:08f0 GPAPAA.PPPBAPAAAA.AABPAAAAAAPABPAAAAAAPG
; >C:0918 GPA.AAAPAABA..AAPAPPBAAAAAAAPABPAAAAAA.G
; >C:0940 GPPAAPAAAABAAAPAAAAABPAPPAAAAABPAAP.PAAG
; >C:0968 GAAPAPPAAPBPPAAAPAAABPAPPAAAAABPAAPA.ABG
; >C:0990 GAAPAAAPAABAAAPAPAAPBPAAPA.APPBA.PAAHBPG
; >C:09b8 GPAPABBBBBBBBBHBBBBBBBBBPBBBBBBBBBAABA.G
; >C:09e0 GAPA..AAAAAPPPPAAPAPAPPAAPPAAA.PAAPBPAAG
; >C:0a08 GPAPPAAAAAAPPPPAAPA.A.PAAAPAAPAPPABPAPPG
; >C:0a30 GA.APAPA.BAAPPPAAPAAAA.AAAPAAAAAPBAPAPPG
; >C:0a58 GA.APAPA.BPABBBBBBBBBBBBBBBBBPPABAAPAAAG
; >C:0a80 GPAA.PPPABPAAAAPAAAPAAA.APPAAAABAPAPPAPG
; >C:0aa8 GPAAAPPPABPAPAAA.PAAPAPAAAPAPPBAAAAAPADG
; >C:0ad0 G.APAAAAPB..AAPAPPPAAAAAAAPAPBAAAAAA.AAG
; >C:0af8 GAAPAAAA.BAAPAAAAAAPAPPAAAAABPAAPAPAAAPG
; >C:0b20 GPAPPAAPABPAAAPAAAAP%PPAAAAAAPAAPHAAPAAG
; >C:0b48 GPAAAPAAABAAPAPHAAAAAAPAAA.PAA.PAAPTPAAG
; >C:0b70 GPPATA.AABAAPAPPAAAAAAPAAPA.PAHAPPAPAAAG
; >C:0b98 GGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGG
; 
</div>

<b>.CaveLData</b>

<div class="disass_code"><b>5bef</b>   0c 14 14 00  00 3c 02 3b  66 13 13 0e  10 15 b4 aa
<b>5bff</b>   a0 a0 a0 0c  0a 09 00 00  00 10 14 00  3c 32 09 00
<b>5c0f</b>   42 0a 05 12  04 42 0e 05  12 04 42 12  05 12 04 42
<b>5c1f</b>   16 05 12 04  42 02 06 0b  02 42 02 0a  0b 02 42 02
<b>5c2f</b>   0e 0f 02 42  02 12 0b 02  81 1e 04 04  04 00 08 20
<b>5c3f</b>   05 81 1e 09  04 04 00 08  20 0a 81 1e  0e 04 04 00
<b>5c4f</b>   08 20 0f 25  03 14 04 27  16 ff
</div>


<div class="disass_comment">; >C:0850 GGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGG
; >C:0878 GPA.AAAPPAAAAAPAPAAPAAAAAAAAPAAAAAPAATAG
; >C:08a0 GAAAAATAPAAAAAAA.AAAAPAAAAPAAPAAAAA.AAPG
; >C:08c8 GAAAAAAAPTBAPABAA.BAAABPAAAPAAA.HAA.AA.G
; >C:08f0 GTBBBBBBBBBBBABAAABAAPBAAAAAPAA..AAAAAAG
; >C:0918 GPAAAAAAAABAAABAPAB.TABAAAAAPAAAAAAAAAAG
; >C:0940 GPPAAPAAAABAAABAAABAAPBPPAAAAAAPAATAAAAG
; >C:0968 GAAPAAAAAPBPPABAAABAAPBPPAAAAAAAAAPAAAPG
; >C:0990 GABBBBBBBBBBBABAPAB.APBAPAAAAPA.HAAATAPG
; >C:09b8 GPAPAAAAAABAAABAPABAAPBAPAATAAA..AAAPAAG
; >C:09e0 GAPAAAAAAABPP.BAATBAA.BAAAPAAAAAAATAPAAG
; >C:0a08 G.AAAAAAAABPP.BAAPBAAABAAA.AAPAAAAAPAAAG
; >C:0a30 GABBBBBBBBBBBBBBBPBAAABAAAPAAAAAAAAPA..G
; >C:0a58 GAAAPAPAAABAAABPAABPAABAPAAPAPA.HAAAAAAG
; >C:0a80 GAAAAP.PAABAAABAAABTAABAAP.AAAA..AAAAATG
; >C:0aa8 GAAAA.APAABATABAAPBAPABAAAPA.PAAAAAAAAAG
; >C:0ad0 GABBBBBBBBBBBABAAABAAABAAAPA.PAAAAAAAAAG
; >C:0af8 GAAPAAAAAABAPABAAABPAPBAAAAAA.AAPAAAAAAG
; >C:0b20 GPA%AAAPA.BAAABAAABPAPBAAAAAAAAAPTAAPAAG
; >C:0b48 GAAAAPAAAABAPABTAABAAABAAAA.AAAPAATA.AAG
; >C:0b70 GPPAAAAAAABAPABTAABAAABAAPAATATAPAAPAAAD
; >C:0b98 GGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGG
; 
</div>

<b>.CaveMData</b>

<div class="disass_code"><b>5c59</b>   0d 8c 05 08  00 01 02 03  04 32 37 3c  46 50 a0 9b
<b>5c69</b>   96 91 8c 06  08 0d 00 00  10 00 00 00  28 00 00 00
<b>5c79</b>   25 12 03 04  0a 03 3a 14  03 42 05 12  1e 02 70 05
<b>5c89</b>   13 1e 02 50  05 14 1e 02  c1 05 15 1e  02 ff
</div>


<div class="disass_comment">; >C:0850 GGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGG
; >C:0878 GPAAAAAPPADAAAAAPA%P:AAAAAAAPAAAAAAAAPAG
; >C:08a0 GAAAAAPAPAAAAAAAAAAAAPAAAAPAAPAPAAAAAAAG
; >C:08c8 GAAAAAAAAPAAPAAAAAAAAAAAAAAPAAAAAAAAAAAG
; >C:08f0 GPAAAAAAAPAAAAAAAAAAAPAAAAAAPAAPAAAAAAAG
; >C:0918 GPAAAAAAAAPAAAAAPAAAPAAAAAAAPAAPAAAAAAAG
; >C:0940 GAPAAPAAAAAAAAPAAAAAAPAPPAAAAAAAAAPAAAAG
; >C:0968 GAAPAAAAAPAAAAAAAAAAAPAPPAAAAAAAAAPAAAPG
; >C:0990 GAAAAAAPAAAAAAPAPAAAAPAAPAAAAAAAAPAAPAAG
; >C:09b8 GPAPAAAAAAAAAAPAPAAAAAAAAAAPAAAAAAAAAAAG
; >C:09e0 GAAAAAAAAAAPPAPAAPAAAAPAAAPAAAAPAAPAPAAG
; >C:0a08 GAAAAAAAAAAPAAPAAPAAAAAAAAAAAPAAAAAPAAAG
; >C:0a30 GAAAPAPAAAAAAAPAAAAAAAAAAAPAAAAAAAAPAAAG
; >C:0a58 GAAAPAPAAAPAAAAPAAAPAAAAAAAPAAAAAAAAAAAG
; >C:0a80 GAAAAPAPAAPAAAAAAAAPAAAAAPAAAAAAAAAAAAPG
; >C:0aa8 GAAAAAAPAAAAPAAAAPAAPAPAAAAAAPAAAAAAAAAG
; >C:0ad0 GAAPABBBBBBBBBBBBBBBBBBBBBBBBBBBBBBAAAAG
; >C:0af8 GAAPA000000000000000000000000000000AAAAG
; >C:0b20 GPAAAPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPAPAAG
; >C:0b48 GAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAG
; >C:0b70 GAPAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPAAAG
; >C:0b98 GGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGG
; 
</div>

<b>.CaveNData</b>

<div class="disass_code"><b>5c97</b>   0e 14 0a 14  00 00 00 00  00 1e 23 28  2a 2d 96 91
<b>5ca7</b>   8c 87 82 0c  08 09 00 00  10 00 00 00  00 00 00 00
<b>5cb7</b>   81 0a 0a 0d  0d 00 70 0b  0b 0c 03 c1  0c 0a 03 0d
<b>5cc7</b>   c1 10 0a 03  0d c1 14 0a  03 0d 50 16  08 0c 02 48
<b>5cd7</b>   16 07 0c 02  c1 17 06 03  04 c1 1b 06  03 04 c1 1f
<b>5ce7</b>   06 03 04 25  03 03 04 27  14 ff
</div>


<div class="disass_comment">; >C:0850 GGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGG
; >C:0878 GAA%AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAG
; >C:08a0 GAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAG
; >C:08c8 GAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAG
; >C:08f0 GAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAG
; >C:0918 GAAAAAAAAAAAAAAAAAAAAAHAHAHAHAHAHAAAAAAG
; >C:0940 GAAAAAAAAAAAAAAAAAAAAAPAPAPAPAPAPAAAAAAG
; >C:0968 GAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAG
; >C:0990 GAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAG
; >C:09b8 GAAAAAAAAAA0A.A.A.A.A.AAAAAAAAAAAAAAAAAG
; >C:09e0 GAAAAAAAAAA.A.A.A.A.A.AAAAAAAAAAAAAAAAAG
; >C:0a08 GAAAAAAAAAA.A0A.A.A.A.AAAAAAAAAAAAAAAAAG
; >C:0a30 GAAAAAAAAAA.A.A.A.A.A.AAAAAAAAAAAAAAAAAG
; >C:0a58 GAAAAAAAAAA.A.A0A.A.A.AAAAAAAAAAAAAAAAAG
; >C:0a80 GAAAAAAAAAA.A.A.A.A.A.AAAAAAAAAAAAAAAAAG
; >C:0aa8 GAAAAAAAAAA.A.A.A0A.A.AAAAAAAAAAAAAAAAAG
; >C:0ad0 GAAAAAAAAAA.A.A.A.A.A.AAAAAAAAAAAAAAAAAG
; >C:0af8 GAAAAAAAAAA.A.A.A.A0A.AAAAAAAAAAAAAAAAAG
; >C:0b20 GAAAAAAAAAA.A.A.A.A.A.AAAAAAAAAAAAAAAAAD
; >C:0b48 GAAAAAAAAAA.A.A.A.A.A0AAAAAAAAAAAAAAAAAG
; >C:0b70 GAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAG
; >C:0b98 GGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGG
; 
</div>

<b>.CaveOData</b>

<div class="disass_code"><b>5cf1</b>   0f 08 0a 14  01 1d 1e 1f  20 0f 14 14  19 1e 78 78
<b>5d01</b>   78 78 8c 08  0e 09 00 00  00 10 08 00  64 50 02 00
<b>5d11</b>   42 02 04 0a  03 42 0f 0d  0a 01 41 0c  0e 03 02 43
<b>5d21</b>   0c 0f 03 02  04 14 16 25  14 03 ff
</div>


<div class="disass_comment">; >C:0850 GGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGG
; >C:0878 GPAPPAA..PAAPAAPAPAA%PAAPAPPAAPAPPAAAPAG
; >C:08a0 GABAPPAAAAAAPAAPAAAPAAAABAAAPAAAAAAPAPAG
; >C:08c8 GPPBAPAAA.PAA.PAAPAPAAPBPAAAA.AA.AAPAPHG
; >C:08f0 GAAABPAAPA.HAAAAAPA.AABPA..AAAAAPPPPAAPG
; >C:0918 GAPPABPPAAA.PAAPAPAAABPA.PAAAAAAPPPPAAPG
; >C:0940 GA.PAABPAAPAP.AAPAPPBAAA.PPPA.AAAPPPAAPG
; >C:0968 GAAAPPABA.HAAPAAPAPBAAAAAPAPPAAPAPAPPAAG
; >C:0990 GAAPAPAABAPPAAAA.ABAAAPAA.PPPAAPAAAAPAAG
; >C:09b8 GAAA.APPABAAAAPA.BHPPA.AAAPPPAAPAPAAA.PG
; >C:09e0 GPAPAAAPAPBAAAAABPAAPA.APAAAAPA..AAPAPPG
; >C:0a08 GAAAAAAPAPPBAAABA.AAPPAAPAAAA.AAAPAAAAAG
; >C:0a30 GAPPAAAAAAPAAAAPAAAPAAPAP.AAPAPPAAA.PAAG
; >C:0a58 GAPPAAAAAAPACCCAAPAAAAPAAAPAAAAAAPAPPAAG
; >C:0a80 GAAPAAA.PAAAPAAPAPAAPAPPAAA.AAAAAPAPPAAG
; >C:0aa8 GAAPAAPA.APAAAAPAAAAAPA..AAAAAAPPPAAPA.G
; >C:0ad0 GPAA.PAAAAPAAPAPAAAAPA..AAAAAAAPPPAAPAAG
; >C:0af8 GPAAAPAAPA..AAPA..AAAA.PPPPAAPAPAPPAAPPG
; >C:0b20 GA.PAAH.PAAAAPAPPAAAAAAPPPPAAPA.APPAA.PG
; >C:0b48 GPAPPAAPAPPAAA.APAPA.AAAPPPAAPAAAA.AAAPG
; >C:0b70 GAAAPPAPAPPAAA.APAPADAAAP.PAAPAPAAAAPAAG
; >C:0b98 GGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGG
; 
</div>

<b>.CavePData</b>

<div class="disass_code"><b>5d2c</b>   10 14 0a 14  01 78 81 7e  7b 0c 0f 0f  0f 0c 96 96
<b>5d3c</b>   96 96 96 09  0a 09 00 00  10 00 00 00  32 00 00 00
<b>5d4c</b>   25 01 03 04  27 04 81 08  13 04 04 00  08 0a 14 c2
<b>5d5c</b>   07 0a 06 08  43 07 0a 06  02 81 10 13  04 04 00 08
<b>5d6c</b>   12 14 c2 0f  0a 06 08 43  0f 0a 06 02  81 18 13 04
<b>5d7c</b>   04 00 08 1a  14 81 20 13  04 04 00 08  22 14 ff
</div>


<div class="disass_comment">; >C:0850 GGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGG
; >C:0878 G%AAPAAAAAAAAAAPAAAAAAAAPAAAAAPAAPAAAAAG
; >C:08a0 GAPAPPAAAAAAAAAPAAAPAAAAAAAAPAAAAAAPAPAD
; >C:08c8 GAPAAPAAAAAAAAPAAPAAAAPAPAAAAAAAAAAPAPPG
; >C:08f0 GAAAAAAAPAAPAAAAAPAAAAAAAAAAAAAAPPAPAAPG
; >C:0918 GAAPAAAPAAAAPAAPAPAAAAAAAAAAAAAAPAAPAAPG
; >C:0940 GAAAAAAAAAPAAAAAPAAAAAAAAPPPAAAAAAAPAAAG
; >C:0968 GAAAAPAAAAPAAAAAPAAAAAAAAPAPPAAPAAAAPAAG
; >C:0990 GAAPAAACCCCCCAACCCCCCAAAAAPAPAAPAAAAAAAG
; >C:09b8 GAAAAAPBAAAABAABAAPPBAAAAAAAPAAAAPAAAAPG
; >C:09e0 GPAPAAABAAPABAABAAAABAAAPAAAAPAAAAAPAAAG
; >C:0a08 GAAAAAABAAPABAABAAAABPAAPAAAAAAAAPAAAAAG
; >C:0a30 GAPPAAABAAAABPABAAAABAPAAAAAPAAAAAAAPAAG
; >C:0a58 GAPPAAABAAAABPPBAPAABAAAAAPAAAAAAPAPPAAG
; >C:0a80 GAAPAAABAAAABAABAAAABAPPAAAAAAAAAPAPPAAG
; >C:0aa8 GAAAAAPBBBBBBAABBBBBBAAAAAAAAAAAAPAAPAAG
; >C:0ad0 GPAAAPAAAAPAAPAPAAAAAAAAAAAAAAAAAPAAPAAG
; >C:0af8 GAAAAAAAAAAAAAPAAAAAAAAPAAAAAPAAAAAAAAPG
; >C:0b20 GAAPAAPAA.HAAAAAA.HAAAAPA.HAAPAAA.HAAAPG
; >C:0b48 GPAAAAAPA..AAAAAA..AAAAAA..AAPAAA..AAAPG
; >C:0b70 GAAAAAAPAAAAAAAAAAAAAAAAAAAAAAAPAAAAPAAG
; >C:0b98 GGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGG
; 
</div>

<b>.CaveBonusQData</b>

<div class="disass_code"><b>5d8b</b>   11 14 1e 00  0a 0b 0c 0d  0e 06 06 06  06 06 0a 0a
<b>5d9b</b>   0a 0a 0a 0e  02 09 00 00  00 14 00 00  ff 09 00 00
<b>5dab</b>   87 00 02 28  16 07 87 00  02 14 0c 00  32 0a 0c 10
<b>5dbb</b>   0a 04 01 0a  05 25 03 05  04 12 0c ff
</div>


<div class="disass_comment">; >C:0850 GGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGG
; >C:0878 G..................GGGGGGGGGGGGGGGGGGGGG
; >C:08a0 G.........P........GGGGGGGGGGGGGGGGGGGGG
; >C:08c8 G..%......A........GGGGGGGGGGGGGGGGGGGGG
; >C:08f0 G..................GGGGGGGGGGGGGGGGGGGGG
; >C:0918 G..................GGGGGGGGGGGGGGGGGGGGG
; >C:0940 G..................GGGGGGGGGGGGGGGGGGGGG
; >C:0968 G..................GGGGGGGGGGGGGGGGGGGGG
; >C:0990 G..................GGGGGGGGGGGGGGGGGGGGG
; >C:09b8 G..................GGGGGGGGGGGGGGGGGGGGG
; >C:09e0 G.........2.......DGGGGGGGGGGGGGGGGGGGGG
; >C:0a08 GGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGG
; >C:0a30 GGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGG
; >C:0a58 GGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGG
; >C:0a80 GGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGG
; >C:0aa8 GGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGG
; >C:0ad0 GGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGG
; >C:0af8 GGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGG
; >C:0b20 GGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGG
; >C:0b48 GGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGG
; >C:0b70 GGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGG
; >C:0b98 GGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGG	
; 
</div>

<b>.CaveBonusRData</b>

<div class="disass_code"><b>5dc7</b>   12 14 0a 00  0a 0b 0c 0d  0e 10 10 10  10 10 0f 0f
<b>5dd7</b>   0f 0f 0f 06  0f 09 00 00  00 00 00 00  00 00 00 00
<b>5de7</b>   87 00 02 28  16 07 87 00  02 14 0c 01  50 01 03 09
<b>5df7</b>   03 48 02 03  08 03 54 01  05 08 03 50  01 06 07 03
<b>5e07</b>   50 12 03 09  05 54 12 05  08 05 50 12  06 07 05 25
<b>5e17</b>   01 04 04 12  04 ff
</div>


<div class="disass_comment">; >C:0850 GGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGG
; >C:0878 GPHAAAAAAAAAAAAAAAPGGGGGGGGGGGGGGGGGGGGG
; >C:08a0 G%PHAAAAAAAAAAAAAPDGGGGGGGGGGGGGGGGGGGGG
; >C:08c8 GTAPHAAAAAAAAAAAPATGGGGGGGGGGGGGGGGGGGGG
; >C:08f0 GPTAPHAAAAAAAAAPATPGGGGGGGGGGGGGGGGGGGGG
; >C:0918 GAPTAPHAAAAAAAPATPAGGGGGGGGGGGGGGGGGGGGG
; >C:0940 GAAPTAPHAAAAAPATPAAGGGGGGGGGGGGGGGGGGGGG
; >C:0968 GAAAPTAPHAAAPATPAAAGGGGGGGGGGGGGGGGGGGGG
; >C:0990 GAAAAPTAPHAPATPAAAAGGGGGGGGGGGGGGGGGGGGG
; >C:09b8 GAAAAAPTAPPATPAAAAAGGGGGGGGGGGGGGGGGGGGG
; >C:09e0 GAAAAAAPTAATPAAAAAAGGGGGGGGGGGGGGGGGGGGG
; >C:0a08 GGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGG
; >C:0a30 GGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGG
; >C:0a58 GGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGG
; >C:0a80 GGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGG
; >C:0aa8 GGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGG
; >C:0ad0 GGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGG
; >C:0af8 GGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGG
; >C:0b20 GGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGG
; >C:0b48 GGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGG
; >C:0b70 GGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGG
; >C:0b98 GGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGG
; 
</div>

<b>.CaveBonusSData</b>

<div class="disass_code"><b>5e1d</b>   13 04 0a 00  0a 0b 0c 0d  0e 0e 0e 0e  0e 0e 14 14
<b>5e2d</b>   14 14 14 06  08 09 00 00  00 00 00 00  00 00 00 00
<b>5e3d</b>   87 00 02 28  16 07 87 00  02 14 0c 00  54 01 0c 12
<b>5e4d</b>   02 88 0f 09  04 04 08 25  08 03 04 12  07 ff
</div>


<div class="disass_comment">; >C:0850 GGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGG
; >C:0878 G.......%..........GGGGGGGGGGGGGGGGGGGGG
; >C:08a0 G..................GGGGGGGGGGGGGGGGGGGGG
; >C:08c8 G..................GGGGGGGGGGGGGGGGGGGGG
; >C:08f0 G..................GGGGGGGGGGGGGGGGGGGGG
; >C:0918 G.................DGGGGGGGGGGGGGGGGGGGGG
; >C:0940 G..................GGGGGGGGGGGGGGGGGGGGG
; >C:0968 G..............HHHHGGGGGGGGGGGGGGGGGGGGG
; >C:0990 G..............HHHHGGGGGGGGGGGGGGGGGGGGG
; >C:09b8 G..............HHHHGGGGGGGGGGGGGGGGGGGGG
; >C:09e0 GTTTTTTTTTTTTTTHHHHGGGGGGGGGGGGGGGGGGGGG
; >C:0a08 GGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGG
; >C:0a30 GGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGG
; >C:0a58 GGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGG
; >C:0a80 GGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGG
; >C:0aa8 GGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGG
; >C:0ad0 GGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGG
; >C:0af8 GGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGG
; >C:0b20 GGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGG
; >C:0b48 GGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGG
; >C:0b70 GGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGG
; >C:0b98 GGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGG
; 
</div>

<b>.CaveBonusTData</b>

<div class="disass_code"><b>5e5b</b>   14 03 1e 00  00 00 00 00  00 06 06 06  06 06 14 14
<b>5e6b</b>   14 14 14 06  08 09 00 00  00 00 00 00  00 00 00 00
<b>5e7b</b>   87 00 02 28  16 07 87 00  02 14 0c 01  d0 0b 03 03
<b>5e8b</b>   02 80 0b 07  03 06 00 43  0b 06 03 02  43 0b 0a 03
<b>5e9b</b>   02 50 08 07  03 03 25 03  03 04 09 0a  ff
</div>


<div class="disass_comment">; >C:0850 GGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGG
; >C:0878 GAA%AAAAAAAPPPAAAAAGGGGGGGGGGGGGGGGGGGGG
; >C:08a0 GAAAAAAAAAAPPPAAAAAGGGGGGGGGGGGGGGGGGGGG
; >C:08c8 GAAAAAAAAAAAAAAAAAAGGGGGGGGGGGGGGGGGGGGG
; >C:08f0 GAAAAAAAAAACCCAAAAAGGGGGGGGGGGGGGGGGGGGG
; >C:0918 GAAAAAAAPAA...AAAAAGGGGGGGGGGGGGGGGGGGGG
; >C:0940 GAAAAAAAAPA...AAAAAGGGGGGGGGGGGGGGGGGGGG
; >C:0968 GAAAAAAAAAP...AAAAAGGGGGGGGGGGGGGGGGGGGG
; >C:0990 GAAAAAAAADACCCAAAAAGGGGGGGGGGGGGGGGGGGGG
; >C:09b8 GAAAAAAAAAA...AAAAAGGGGGGGGGGGGGGGGGGGGG
; >C:09e0 GAAAAAAAAAA...AAAAAGGGGGGGGGGGGGGGGGGGGG
; >C:0a08 GGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGG
; >C:0a30 GGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGG
; >C:0a58 GGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGG
; >C:0a80 GGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGG
; >C:0aa8 GGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGG
; >C:0ad0 GGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGG
; >C:0af8 GGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGG
; >C:0b20 GGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGG
; >C:0b48 GGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGG
; >C:0b70 GGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGG
; >C:0b98 GGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGG
; 
</div>

<b>.DemoMoveData</b>

<div class="disass_code"><b>5ea8</b>   ff ff 1e 77  2d 97 4f 2d  47 3e 1b 4f  1e b7 1d 27
<b>5eb8</b>   4f 6d 17 4d  3b 4f 1d 1b  47 3b 4f 4e  5b 3e 5b 4d
<b>5ec8</b>   3b 5f 3e ab  1e 3b 1d 6b  4d 17 4f 3d  47 4d 4b 2e
<b>5ed8</b>   27 3e a7 a7  1d 47 1d 47  2d 5f 57 4e  57 6f 1d 00
</div>


<div class="disass_comment">; 
</div>

<b>.ObjCodeFromScannedThisFrameCodeTable</b>

<div class="disass_code"><b>5ee8</b>   00 00 00 00  00 00 00 00  00 00 00 00  08 09 0a 0b
<b>5ef8</b>   00 10 00 12  00 14 00 16  00 00 00 00  00 00 00 00
<b>5f08</b>   00 00 00 00  00 00 00 00  00 00 00 00  00 00 00 00
<b>5f18</b>   00 00 00 00  30 31 32 33  00 38 00 3a  00 00 00 00
</div>



<b>.BaseCharNoForObjectTable</b>

<div class="disass_code"><b>5f28</b>   60 46 4e 22  2e 62 2e 4a  64 64 64 64  64 64 64 64
<b>5f38</b>   44 44 44 44  48 48 48 48  00 00 00 66  68 6a 68 66
<b>5f48</b>   24 26 28 2a  2c 62 66 68  6a 00 00 00  00 00 00 00
<b>5f58</b>   20 20 20 20  20 20 20 20  4c 4c 40 40  00 00 00 00
</div>
<a name="5f68"></a>


<b>.ObjHandlerVectorTableLo</b>

<div class="disass_comment">; $00[.] - Space
; $01[A] - Dirt
; $02[B] - Brick wall
; $03[C] - Magic wall
; $04[D] - Hidden outbox
; $05[E] - Outbox
; $06[F] - Fragile steel wall
; $07[G] - Steel wall
; $08[H] - Firefly (left)
; $09[I] - Firefly (up)
; $0a[J] - Firefly (right)
; $0b[K] - Firefly (down)
; $0c[L] - *Firefly (left)
; $0d[M] - *Firefly (up)
; $0e[N] - *Firefly (right)
; $0f[O] - *Firefly (down)
; $10[P] - Boulder (stationary)
; $11[Q] - *Boulder (stationary)
; $12[R] - Boulder (falling)
; $13[S] - *Boulder (falling)
; $14[T] - Diamond (stationary)
; $15[U] - *Diamond (stationary)
; $16[V] - Diamond (falling)
; $17[W] - *Diamond (falling)
; $1b[[] - Explosion to space (stage 0) (to be scanned explosions start here)
; $1c[\] - Explosion to space (stage 1) (scanned explosions start here)
; $1d[]] - Explosion to space (stage 2)
; $1e[^] - Explosion to space (stage 3)
; $1f[_] - Explosion to space (stage 4)
; $20[ ] - Explosion to diamond (stage 0) (to be scanned explosions start here)
; $21[!] - Explosion to diamond (stage 1) (scanned explosions start here)
; $22["] - Explosion to diamond (stage 2)
; $23[#] - Explosion to diamond (stage 3)
; $24[$] - Explosion to diamond (stage 4)
; $25[%] - Inbox (Rockford's initial position)
; $26[&] - Pre-Rockford (stage 1)
; $27['] - Pre-Rockford (stage 2)
; $28[(] - Pre-Rockford (stage 3)
; $30[0] - Butterfly (down)
; $31[1] - Butterfly (left)
; $32[2] - Butterfly (up)
; $33[3] - Butterfly (right)
; $34[4] - *Butterfly (down)
; $35[5] - *Butterfly (left)
; $36[6] - *Butterfly (up)
; $37[7] - *Butterfly (right)
; $38[8] - Rockford
; $39[9] - *Rockford
; $3a[:] - Amoeba
; $3b[;] - *Amoeba
; * = SCANNED
; [x] = 'x' is char shown with VICE monitor's 'i' command
</div>
<table><tr><td><b>5f68</b>&nbsp;&nbsp;&nbsp;</td><td>.Zp_6510DDR&nbsp;&nbsp;&nbsp;</td><td>.Zp_6510DDR&nbsp;&nbsp;&nbsp;</td><td>.Zp_6510DDR&nbsp;&nbsp;&nbsp;</td><td>.Zp_6510DDR&nbsp;&nbsp;&nbsp;</td></tr>
<tr><td><b>5f70</b>&nbsp;&nbsp;&nbsp;</td><td><a href="#6d54">.ProcessHiddenOutbox</a>&nbsp;&nbsp;&nbsp;</td><td><a href="#7344">.ProcessInAndOutBoxes</a>&nbsp;&nbsp;&nbsp;</td><td>.Zp_6510DDR&nbsp;&nbsp;&nbsp;</td><td>.Zp_6510DDR&nbsp;&nbsp;&nbsp;</td></tr>
<tr><td><b>5f78</b>&nbsp;&nbsp;&nbsp;</td><td><a href="#6dda">.ProcessFirefly</a>&nbsp;&nbsp;&nbsp;</td><td><a href="#6dda">.ProcessFirefly</a>&nbsp;&nbsp;&nbsp;</td><td><a href="#6dda">.ProcessFirefly</a>&nbsp;&nbsp;&nbsp;</td><td><a href="#6dda">.ProcessFirefly</a>&nbsp;&nbsp;&nbsp;</td></tr>
<tr><td><b>5f80</b>&nbsp;&nbsp;&nbsp;</td><td>.Zp_6510DDR&nbsp;&nbsp;&nbsp;</td><td>.Zp_6510DDR&nbsp;&nbsp;&nbsp;</td><td>.Zp_6510DDR&nbsp;&nbsp;&nbsp;</td><td>.Zp_6510DDR&nbsp;&nbsp;&nbsp;</td></tr>
<tr><td><b>5f88</b>&nbsp;&nbsp;&nbsp;</td><td><a href="#7360">.ProcessStationaryBoulder</a>&nbsp;&nbsp;&nbsp;</td><td>.Zp_6510DDR&nbsp;&nbsp;&nbsp;</td><td><a href="#73ad">.ProcessFallingBoulder</a>&nbsp;&nbsp;&nbsp;</td><td>.Zp_6510DDR&nbsp;&nbsp;&nbsp;</td></tr>
<tr><td><b>5f90</b>&nbsp;&nbsp;&nbsp;</td><td><a href="#6f87">.ProcessStationaryDiamond</a>&nbsp;&nbsp;&nbsp;</td><td>.Zp_6510DDR&nbsp;&nbsp;&nbsp;</td><td><a href="#6f05">.ProcessFallingDiamond</a>&nbsp;&nbsp;&nbsp;</td><td>.Zp_6510DDR&nbsp;&nbsp;&nbsp;</td></tr>
<tr><td><b>5f98</b>&nbsp;&nbsp;&nbsp;</td><td>.Zp_6510DDR&nbsp;&nbsp;&nbsp;</td><td>.Zp_6510DDR&nbsp;&nbsp;&nbsp;</td><td>.Zp_6510DDR&nbsp;&nbsp;&nbsp;</td><td><a href="#72d3">.ProcessExplosion</a>&nbsp;&nbsp;&nbsp;</td></tr>
<tr><td><b>5fa0</b>&nbsp;&nbsp;&nbsp;</td><td><a href="#72d3">.ProcessExplosion</a>&nbsp;&nbsp;&nbsp;</td><td><a href="#72d3">.ProcessExplosion</a>&nbsp;&nbsp;&nbsp;</td><td><a href="#72d3">.ProcessExplosion</a>&nbsp;&nbsp;&nbsp;</td><td><a href="#72d3">.ProcessExplosion</a>&nbsp;&nbsp;&nbsp;</td></tr>
<tr><td><b>5fa8</b>&nbsp;&nbsp;&nbsp;</td><td><a href="#72d3">.ProcessExplosion</a>&nbsp;&nbsp;&nbsp;</td><td><a href="#72d3">.ProcessExplosion</a>&nbsp;&nbsp;&nbsp;</td><td><a href="#72d3">.ProcessExplosion</a>&nbsp;&nbsp;&nbsp;</td><td><a href="#72d3">.ProcessExplosion</a>&nbsp;&nbsp;&nbsp;</td></tr>
<tr><td><b>5fb0</b>&nbsp;&nbsp;&nbsp;</td><td><a href="#72d3">.ProcessExplosion</a>&nbsp;&nbsp;&nbsp;</td><td><a href="#7344">.ProcessInAndOutBoxes</a>&nbsp;&nbsp;&nbsp;</td><td><a href="#72f0">.ProcessRockfordsAppearance</a>&nbsp;&nbsp;&nbsp;</td><td><a href="#72f0">.ProcessRockfordsAppearance</a>&nbsp;&nbsp;&nbsp;</td></tr>
<tr><td><b>5fb8</b>&nbsp;&nbsp;&nbsp;</td><td><a href="#72f0">.ProcessRockfordsAppearance</a>&nbsp;&nbsp;&nbsp;</td><td>.Zp_6510DDR&nbsp;&nbsp;&nbsp;</td><td>.Zp_6510DDR&nbsp;&nbsp;&nbsp;</td><td>.Zp_6510DDR&nbsp;&nbsp;&nbsp;</td></tr>
<tr><td><b>5fc0</b>&nbsp;&nbsp;&nbsp;</td><td>.Zp_6510DDR&nbsp;&nbsp;&nbsp;</td><td>.Zp_6510DDR&nbsp;&nbsp;&nbsp;</td><td>.Zp_6510DDR&nbsp;&nbsp;&nbsp;</td><td>.Zp_6510DDR&nbsp;&nbsp;&nbsp;</td></tr>
<tr><td><b>5fc8</b>&nbsp;&nbsp;&nbsp;</td><td><a href="#6ead">.ProcessButterfly</a>&nbsp;&nbsp;&nbsp;</td><td><a href="#6ead">.ProcessButterfly</a>&nbsp;&nbsp;&nbsp;</td><td><a href="#6ead">.ProcessButterfly</a>&nbsp;&nbsp;&nbsp;</td><td><a href="#6ead">.ProcessButterfly</a>&nbsp;&nbsp;&nbsp;</td></tr>
<tr><td><b>5fd0</b>&nbsp;&nbsp;&nbsp;</td><td>.Zp_6510DDR&nbsp;&nbsp;&nbsp;</td><td>.Zp_6510DDR&nbsp;&nbsp;&nbsp;</td><td>.Zp_6510DDR&nbsp;&nbsp;&nbsp;</td><td>.Zp_6510DDR&nbsp;&nbsp;&nbsp;</td></tr>
<tr><td><b>5fd8</b>&nbsp;&nbsp;&nbsp;</td><td><a href="#7294">.ProcessRockford</a>&nbsp;&nbsp;&nbsp;</td><td>.Zp_6510DDR&nbsp;&nbsp;&nbsp;</td><td><a href="#6fd0">.ProcessAmoeba</a>&nbsp;&nbsp;&nbsp;</td><td>.Zp_6510DDR&nbsp;&nbsp;&nbsp;</td></tr>
<tr><td><b>5fe0</b>&nbsp;&nbsp;&nbsp;</td><td>.Zp_6510DDR&nbsp;&nbsp;&nbsp;</td><td>.Zp_6510DDR&nbsp;&nbsp;&nbsp;</td><td>.Zp_6510DDR&nbsp;&nbsp;&nbsp;</td><td>.Zp_6510DDR&nbsp;&nbsp;&nbsp;</td></tr>
</table>
<a name="5fe8"></a>


<b>.ThemeMusicData</b>

<div class="disass_code"><b>5fe8</b>   16
</div>



<b>.MusicData_Voice1</b>

<div class="disass_code"><b>5fe9</b>   22 1d 26 22  29 25 2e 14  24 1f 27 20  29 27 30 12
<b>5ff9</b>   2a 12 2c 1e  2e 12 31 20  2c 33 37 21  2d 31 35 16
<b>6009</b>   22 16 2e 16  1d 16 24 14  20 14 30 14  24 14 20 16
<b>6019</b>   22 16 2e 16  1d 16 24 1e  2a 1e 3a 1e  2e 1e 2a 14
<b>6029</b>   20 14 2c 14  1b 14 22 1c  28 1c 38 1c  2c 1c 28 11
<b>6039</b>   1d 29 2d 11  1f 29 2e 0f  27 0f 27 16  33 16 27 16
<b>6049</b>   2e 16 2e 16  2e 16 2e 22  2e 22 2e 16  2e 16 2e 14
<b>6059</b>   2e 14 2e 14  2e 14 2e 20  2e 20 2e 14  2e 14 2e 16
<b>6069</b>   2e 32 2e 16  2e 33 2e 22  2e 32 2e 16  2e 33 2e 14
<b>6079</b>   2e 32 2e 14  2e 33 2e 20  2c 30 2c 14  2c 31 2c 16
<b>6089</b>   2e 16 3a 16  2e 35 38 22  2e 22 37 16  2e 31 35 14
<b>6099</b>   2c 14 38 14  2c 14 38 20  2c 20 33 14  2c 14 38 16
<b>60a9</b>   2e 32 2e 16  2e 33 2e 22  2e 32 2e 16  2e 33 2e 14
<b>60b9</b>   2e 32 2e 14  2e 33 2e 20  2c 30 2c 14  2c 31 2c 2e
<b>60c9</b>   32 29 2e 26  29 22 26 2c  30 27 2c 24  27 14 20 35
<b>60d9</b>   32 32 2e 2e  29 29 26 27  30 24 2c 20  27 14 20
</div>
<a name="60e8"></a>


<b>.GameCharDataBlock1</b>

<br/><b>60e8</b><br/>
<img src="60e8.png"/><br/>



<b>.GameCharDataBlock2</b>

<br/><b>61e8</b><br/>
<img src="61e8.png"/><br/>



<b>.GameCharDataBlock3</b>

<br/><b>62e8</b><br/>
<img src="62e8.png"/><br/>
<a name="63e8"></a>


<b>.RockfordAnimationChars</b>

<br/><b>63e8</b><br/>
<img src="63e8.png"/><br/>
<a name="66e8"></a>


<b>.Top2LinesAndBoulderDashLogo</b>

<div class="disass_comment">; m-i-c-r-o-..f-u-n-.*-.m-i-c-r-o-..f-u-n-
; ............p-r-e-s-e-n-t-s-............
</div>
<div class="disass_code"><b>66e8</b>   2d 61 29 5d  23 57 32 66  2f 63 20 20  26 5a 35 69
<b>66f8</b>   2e 62 20 74  75 20 2d 61  29 5d 23 57  32 66 2f 63
<b>6708</b>   20 20 26 5a  35 69 2e 62  20 20 20 20  20 20 20 20
<b>6718</b>   20 20 20 20  30 64 32 66  25 59 33 67  25 59 2e 62
<b>6728</b>   34 68 33 67  20 20 20 20  20 20 20 20  20 20 20 20
</div>




<div class="disass_comment">; >C:6738 CCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCC
; >C:6760 C......................................C
; >C:6788 C.HCCCI................................C
; >C:67b0 C.HC..H.HCCC.HC.H.HC...HCCI.HCCC.HCCI..C
; >C:67d8 C.HCCCJ.HC.H.HC.H.HC...HC.H.HC...HC.H..C
; >C:6800 C.HCCCI.HC.H.HC.H.HC...HC.H.HCC..HCCJ..C
; >C:6828 C.HC..H.HC.H.HC.H.HC...HC.H.HC...HCCI..C
; >C:6850 C.HCCCJ.HCCC.HCCC.HCCC.HCCJ.HCCC.HC.H..C
; >C:6878 C......................................C
; >C:68a0 C......HCCCI...........................C
; >C:68c8 C......HC..H..HCI.HCCC.HC..H.]^_.......C
; >C:68f0 C......HC..H.HC.H.HC...HC..H...........C
; >C:6918 C......HC..H.HCCC.HCCC.HCCCC...........C
; >C:6940 C......HC..H.HC.H...HC.HC..H...........C
; >C:6968 C......HCCCJ.HC.H.HCCC.HC..H...........C
; >C:6990 C......................................C
; >C:69b8 CCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCC
</div>
<div class="disass_code"><b>6738</b>   03 03 03 03  03 03 03 03  03 03 03 03  03 03 03 03
<b>6748</b>   03 03 03 03  03 03 03 03  03 03 03 03  03 03 03 03
<b>6758</b>   03 03 03 03  03 03 03 03  03 00 00 00  00 00 00 00
<b>6768</b>   00 00 00 00  00 00 00 00  00 00 00 00  00 00 00 00
<b>6778</b>   00 00 00 00  00 00 00 00  00 00 00 00  00 00 00 03
<b>6788</b>   03 00 08 03  03 03 09 00  00 00 00 00  00 00 00 00
<b>6798</b>   00 00 00 00  00 00 00 00  00 00 00 00  00 00 00 00
<b>67a8</b>   00 00 00 00  00 00 00 03  03 00 08 03  00 00 08 00
<b>67b8</b>   08 03 03 03  00 08 03 00  08 00 08 03  00 00 00 08
<b>67c8</b>   03 03 09 00  08 03 03 03  00 08 03 03  09 00 00 03
<b>67d8</b>   03 00 08 03  03 03 0a 00  08 03 00 08  00 08 03 00
</div>
<a name="67e8"></a>


<b>.Top2LinesAndBoulderDashLogo_pt2</b>

<div class="disass_code"><b>67e8</b>   08 00 08 03  00 00 00 08  03 00 08 00  08 03 00 00
<b>67f8</b>   00 08 03 00  08 00 00 03  03 00 08 03  03 03 09 00
<b>6808</b>   08 03 00 08  00 08 03 00  08 00 08 03  00 00 00 08
<b>6818</b>   03 00 08 00  08 03 03 00  00 08 03 03  0a 00 00 03
<b>6828</b>   03 00 08 03  00 00 08 00  08 03 00 08  00 08 03 00
<b>6838</b>   08 00 08 03  00 00 00 08  03 00 08 00  08 03 00 00
<b>6848</b>   00 08 03 03  09 00 00 03  03 00 08 03  03 03 0a 00
<b>6858</b>   08 03 03 03  00 08 03 03  03 00 08 03  03 03 00 08
<b>6868</b>   03 03 0a 00  08 03 03 03  00 08 03 00  08 00 00 03
<b>6878</b>   03 00 00 00  00 00 00 00  00 00 00 00  00 00 00 00
<b>6888</b>   00 00 00 00  00 00 00 00  00 00 00 00  00 00 00 00
<b>6898</b>   00 00 00 00  00 00 00 03  03 00 00 00  00 00 00 08
<b>68a8</b>   03 03 03 09  00 00 00 00  00 00 00 00  00 00 00 00
<b>68b8</b>   00 00 00 00  00 00 00 00  00 00 00 00  00 00 00 03
<b>68c8</b>   03 00 00 00  00 00 00 08  03 00 00 08  00 00 08 03
<b>68d8</b>   09 00 08 03  03 03 00 08  03 00 00 08  00 1d 1e 1f
</div>
<a name="68e8"></a>


<b>.Top2LinesAndBoulderDashLogo_pt3</b>

<div class="disass_code"><b>68e8</b>   00 00 00 00  00 00 00 03  03 00 00 00  00 00 00 08
<b>68f8</b>   03 00 00 08  00 08 03 00  08 00 08 03  00 00 00 08
<b>6908</b>   03 00 00 08  00 00 00 00  00 00 00 00  00 00 00 03
<b>6918</b>   03 00 00 00  00 00 00 08  03 00 00 08  00 08 03 03
<b>6928</b>   03 00 08 03  03 03 00 08  03 03 03 03  00 00 00 00
<b>6938</b>   00 00 00 00  00 00 00 03  03 00 00 00  00 00 00 08
<b>6948</b>   03 00 00 08  00 08 03 00  08 00 00 00  08 03 00 08
<b>6958</b>   03 00 00 08  00 00 00 00  00 00 00 00  00 00 00 03
<b>6968</b>   03 00 00 00  00 00 00 08  03 03 03 0a  00 08 03 00
<b>6978</b>   08 00 08 03  03 03 00 08  03 00 00 08  00 00 00 00
<b>6988</b>   00 00 00 00  00 00 00 03  03 00 00 00  00 00 00 00
<b>6998</b>   00 00 00 00  00 00 00 00  00 00 00 00  00 00 00 00
<b>69a8</b>   00 00 00 00  00 00 00 00  00 00 00 00  00 00 00 03
<b>69b8</b>   03 03 03 03  03 03 03 03  03 03 03 03  03 03 03 03
<b>69c8</b>   03 03 03 03  03 03 03 03  03 03 03 03  03 03 03 03
<b>69d8</b>   03 03 03 03  03 03 03 03
</div>



<b>.Top2LinesAndBoulderDashLogo__Junk</b>

<div class="disass_code"><b>69e0</b>   20 20 20 20  20 20 20 2c
</div>



<b>.LicenseText</b>

<div class="disass_comment">; .......l-i-c-e-n-s-e-d-..f-r-o-m-.......
; .......c-r-a-c-k-e-d-..b-y-..n-o-v-a-...
; ..............c-..1-9-8-4-..............
; .f-i-r-s-t-..s-t-a-r-..s-o-f-t-w-a-r-e-.
; m-i-c-r-o-..f-u-n-.*-.m-i-c-r-o-..f-u-n-
; ........................................
</div>
<div class="disass_code"><b>69e8</b>   60 29 5d 23  57 25 59 2e  62 33 67 25  59 24 58 20
<b>69f8</b>   20 26 5a 32  66 2f 63 2d  61 20 20 20  20 20 20 20
<b>6a08</b>   20 20 20 20  20 20 20 23  57 32 66 21  55 23 57 2b
<b>6a18</b>   5f 25 59 24  58 20 20 22  56 39 6d 20  20 2e 62 2f
<b>6a28</b>   63 36 6a 21  55 20 20 20  20 20 20 20  20 20 20 20
<b>6a38</b>   20 20 20 20  20 20 23 57  20 20 11 45  19 4d 18 4c
<b>6a48</b>   14 48 20 20  20 20 20 20  20 20 20 20  20 20 20 20
<b>6a58</b>   20 26 5a 29  5d 32 66 33  67 34 68 20  20 33 67 34
<b>6a68</b>   68 21 55 32  66 20 20 33  67 2f 63 26  5a 34 68 37
<b>6a78</b>   6b 21 55 32  66 25 59 20  2d 61 29 5d  23 57 32 66
<b>6a88</b>   2f 63 20 20  26 5a 35 69  2e 62 20 74  75 20 2d 61
<b>6a98</b>   29 5d 23 57  32 66 2f 63  20 20 26 5a  35 69 2e 62
<b>6aa8</b>   20 20 20 20  20 20 20 20  20 20 20 20  20 20 20 20
<b>6ab8</b>   20 20 20 20  20 20 20 20  20 20 20 20  20 20 20 20
<b>6ac8</b>   20 20 20 20  20 20 20 20
</div>
<a name="6ad0"></a>


<b>.TrueRandom</b>

<div class="disass_code"><b>6ad0</b>   ad 04 dc   LDA .Cia1_TimerALo
<b>6ad3</b>   4d 05 dc   EOR .Cia1_TimerAHi
<b>6ad6</b>   4d 04 dd   EOR .Cia2_TimerALo
<b>6ad9</b>   6d 05 dd   ADC .Cia2_TimerAHi
<b>6adc</b>   4d 06 dd   EOR .Cia2_TimerBLo
<b>6adf</b>   4d 07 dd   EOR .Cia2_TimerBHi
<b>6ae2</b>   60         RTS 
</div>
<a name="6ae3"></a>

<div class="disass_comment">; 
; A: Colour to set
; Y: Start offset.
; The portion of the first line not covered by Y is set to MCM white (brown non-MCM).
</div>

<b>.SetColourRamForCave</b>

<div class="disass_code"><b>6ae3</b>   48         PHA 
</div>


<div class="disass_comment">; 
; Make first line MCM white (brown non-MCM).
</div>


<div class="disass_code"><b>6ae4</b>   a2 27      LDX #$27
<b>6ae6</b>   a9 09      LDA #$09
</div>
<a name="6ae8"></a>


<b>.SetupColourRam__MarqueeLoop</b>

<div class="disass_code"><b>6ae8</b>   9d 00 d8   STA .C64_ColourRam,X
<b>6aeb</b>   ca         DEX 
<b>6aec</b>   10 fa      BPL <a href="#6ae8">.SetupColourRam__MarqueeLoop</a>
</div>


<div class="disass_comment">; 
; Low and high bytes of colou RAM.
</div>


<div class="disass_code"><b>6aee</b>   a2 00      LDX #$00
<b>6af0</b>   86 46      STX .__Local1__
<b>6af2</b>   a2 d8      LDX #$d8
<b>6af4</b>   86 47      STX .__Local2__
</div>


<div class="disass_comment">; 
</div>


<div class="disass_code"><b>6af6</b>   a2 03      LDX #$03
<b>6af8</b>   68         PLA 
</div>
<a name="6af9"></a>


<b>.SetupColourRam__BodyLoop</b>

<div class="disass_code"><b>6af9</b>   91 46      STA (.__Local1__),Y
<b>6afb</b>   c8         INY 
<b>6afc</b>   d0 fb      BNE <a href="#6af9">.SetupColourRam__BodyLoop</a>
<b>6afe</b>   e6 47      INC .__Local2__
<b>6b00</b>   ca         DEX 
<b>6b01</b>   10 f6      BPL <a href="#6af9">.SetupColourRam__BodyLoop</a>
<b>6b03</b>   60         RTS 
</div>
<a name="6b04"></a>

<div class="disass_comment">; 
</div>

<b>.BackupTopLine</b>

<div class="disass_code"><b>6b04</b>   a2 00      LDX #$00
<b>6b06</b>   a0 00      LDY #$00
<a name="6b08"></a><b>6b08</b>   bd 00 0c   LDA .ScreenMatrix,X
<b>6b0b</b>   99 62 98   STA .TopLineBackup[20],Y
<b>6b0e</b>   e8         INX 
<b>6b0f</b>   e8         INX 
<b>6b10</b>   c8         INY 
<b>6b11</b>   c0 14      CPY #$14
<b>6b13</b>   d0 f3      BNE <a href="#6b08">$6b08</a>
<b>6b15</b>   60         RTS 
</div>
<a name="6b16"></a>

<div class="disass_comment">; 
; Set the text for the top line. Sniffs the buffer and
; colours the text using various dopy heuristics.
; IN: $46 & $47 points to the text.
; >1 = White
</div>

<b>.SetTopLineText</b>

<div class="disass_code"><b>6b16</b>   a2 01      LDX #$01
<b>6b18</b>   a0 03      LDY #$03
<b>6b1a</b>   b1 46      LDA (.__Local1__),Y
</div>


<div class="disass_comment">; >$3c is left half of diamond character.
</div>


<div class="disass_code"><b>6b1c</b>   c9 3c      CMP #$3c
<b>6b1e</b>   d0 02      BNE <a href="#6b22">$6b22</a>
</div>


<div class="disass_comment">; >7 = Yellow
</div>


<div class="disass_code"><b>6b20</b>   a2 07      LDX #$07
<a name="6b22"></a><b>6b22</b>   8a         TXA 
<b>6b23</b>   a2 03      LDX #$03
<a name="6b25"></a><b>6b25</b>   9d 0e d8   STA $d80e,X
<b>6b28</b>   ca         DEX 
<b>6b29</b>   10 fa      BPL <a href="#6b25">$6b25</a>
<b>6b2b</b>   a2 01      LDX #$01
<b>6b2d</b>   a0 01      LDY #$01
<b>6b2f</b>   b1 46      LDA (.__Local1__),Y
<b>6b31</b>   c9 19      CMP #$19
<b>6b33</b>   10 02      BPL <a href="#6b37">$6b37</a>
<b>6b35</b>   a2 07      LDX #$07
<a name="6b37"></a><b>6b37</b>   8a         TXA 
<b>6b38</b>   a2 03      LDX #$03
<a name="6b3a"></a><b>6b3a</b>   9d 02 d8   STA $d802,X
<b>6b3d</b>   ca         DEX 
<b>6b3e</b>   10 fa      BPL <a href="#6b3a">$6b3a</a>
<b>6b40</b>   a2 00      LDX #$00
<b>6b42</b>   a0 00      LDY #$00
<a name="6b44"></a><b>6b44</b>   b1 46      LDA (.__Local1__),Y
<b>6b46</b>   c9 01      CMP #$01
<b>6b48</b>   d0 02      BNE <a href="#6b4c">$6b4c</a>
<b>6b4a</b>   a9 20      LDA #$20
<a name="6b4c"></a><b>6b4c</b>   9d 00 0c   STA .ScreenMatrix,X
<b>6b4f</b>   e8         INX 
<b>6b50</b>   18         CLC 
<b>6b51</b>   69 34      ADC #$34
<b>6b53</b>   9d 00 0c   STA .ScreenMatrix,X
<b>6b56</b>   e8         INX 
<b>6b57</b>   c8         INY 
<b>6b58</b>   c0 14      CPY #$14
<b>6b5a</b>   d0 e8      BNE <a href="#6b44">$6b44</a>
<b>6b5c</b>   60         RTS 
</div>
<a name="6b5d"></a>


<b>.ReadJoystickDirectionPort1</b>

<div class="disass_code"><b>6b5d</b>   ad 01 dc   LDA .Cia1_DataB
<b>6b60</b>   29 0f      AND #$0f
<b>6b62</b>   60         RTS 
</div>
<a name="6b63"></a>


<b>.ReadJoystickDirectionPort2</b>

<div class="disass_code"><b>6b63</b>   ad 00 dc   LDA .Cia1_DataA
<b>6b66</b>   29 0f      AND #$0f
<b>6b68</b>   60         RTS 
</div>
<a name="6b69"></a>

<div class="disass_comment">; 
</div>

<b>.ReadFireButtonCurrentPlayer</b>

<div class="disass_code"><b>6b69</b>   a5 9d      LDA .CurrentPlayer
</div>
<a name="6b6b"></a>


<b>.ReadFireButtonPlayerInA</b>

<div class="disass_code"><b>6b6b</b>   25 a4      AND .NumJoysticksMinusOne
<b>6b6d</b>   f0 05      BEQ <a href="#6b74">.ReadFireButtonPort1</a>
<b>6b6f</b>   ad 00 dc   LDA .Cia1_DataA
<b>6b72</b>   d0 03      BNE <a href="#6b77">.ReadFireButton__StoreFireButtonBit</a>
</div>
<a name="6b74"></a>


<b>.ReadFireButtonPort1</b>

<div class="disass_code"><b>6b74</b>   ad 01 dc   LDA .Cia1_DataB
</div>
<a name="6b77"></a>


<b>.ReadFireButton__StoreFireButtonBit</b>

<div class="disass_code"><b>6b77</b>   29 10      AND #$10
<b>6b79</b>   85 b8      STA .FireButtonStatus
<b>6b7b</b>   60         RTS 
</div>
<a name="6b7c"></a>


<b>.Text_ByPeterLiepa</b>

<div class="disass_comment">; ..by.peter.liepa....
</div>
<div class="disass_code"><b>6b7c</b>   20 20 22 39  20 30 25 34  25 32 20 2c  29 25 30 21
<b>6b8c</b>   20 20 20 20
</div>



<b>.Text__WithChrisGrey</b>

<div class="disass_comment">; ..with.chris.grey...
</div>
<div class="disass_code"><b>6b90</b>   20 20 37 29  34 28 20 23  28 32 29 33  20 27 32 25
<b>6ba0</b>   39 20 20 20
</div>



<b>.F1Text__Line4</b>

<div class="disass_comment">; 1.player..1.joystick
</div>
<div class="disass_code"><b>6ba4</b>   11 20 30 2c  21 39 25 32  20 20 11 20  2a 2f 39 33
<b>6bb4</b>   34 29 23 2b
</div>



<b>.Text_Plyr1Ply2</b>

<div class="disass_comment">; .plyr.1......plyr.2.
</div>
<div class="disass_code"><b>6bb8</b>   20 30 2c 39  32 20 11 20  20 20 20 20  20 30 2c 39
<b>6bc8</b>   32 20 12 20
</div>
<a name="6bcc"></a>


<b>.Text_LastScores</b>

<div class="disass_comment">; .000000.last.000000.
</div>
<div class="disass_code"><b>6bcc</b>   20 10 10 10  10 10 10 20  2c 21 33 34  20 10 10 10
<b>6bdc</b>   10 10 10 20
</div>



<b>.Text_HighScores</b>

<div class="disass_comment">; .000000.high.000000.
</div>
<div class="disass_code"><b>6be0</b>   20 10 10 10  10 10 10 20  28 29 27 28  20 10 10 10
<b>6bf0</b>   10 10 10 20
</div>



<b>.Text_GameOver</b>

<div class="disass_comment">; .g.a.m.e...o.v.e.r..
</div>
<div class="disass_code"><b>6bf4</b>   20 27 20 21  20 2d 20 25  20 20 20 2f  20 36 20 25
<b>6c04</b>   20 32 20 20
</div>



<b>.Pre_level_Marquee_Text</b>

<div class="disass_comment">; player.1?.3.men.a?0.
</div>
<div class="disass_code"><b>6c08</b>   30 2c 21 39  25 32 20 11  0d 20 13 20  2d 25 2e 20
<b>6c18</b>   21 0f 10 20
</div>



<b>.Text_OutOfTime</b>

<div class="disass_comment">; ....out.of.time.....
</div>
<div class="disass_code"><b>6c1c</b>   20 20 20 20  2f 35 34 20  2f 26 20 34  29 2d 25 20
<b>6c2c</b>   20 20 20 20
</div>



<b>.Text_BonusLife</b>

<div class="disass_comment">; .b.o.n.u.s..l.i.f.e.
</div>
<div class="disass_code"><b>6c30</b>   20 22 20 2f  20 2e 20 35  20 33 20 20  2c 20 29 20
<b>6c40</b>   26 20 25 20
</div>



<b>.F1Text__Line5</b>

<div class="disass_comment">; .cave?.a..level?.1..
</div>
<div class="disass_code"><b>6c44</b>   20 23 21 36  25 1a 20 21  20 20 2c 25  36 25 2c 1a
<b>6c54</b>   20 11 20 20
</div>



<b>.Text__SpaceBarToResume</b>

<div class="disass_comment">; .spacebar.to.resume.
</div>
<div class="disass_code"><b>6c58</b>   20 33 30 21  23 25 22 21  32 20 34 2f  20 32 25 33
<b>6c68</b>   35 2d 25 20
</div>
<a name="6c6c"></a>


<b>.Text_PressButtonToPlay</b>

<div class="disass_comment">; press.button.to.play
</div>
<div class="disass_code"><b>6c6c</b>   30 32 25 33  33 20 22 35  34 34 2f 2e  20 34 2f 20
<b>6c7c</b>   30 2c 21 39
</div>
<a name="6c80"></a>

<div class="disass_comment">; 
; ---------------------------------------------------------------
; INPUTS:
; .ObjectTypeForScreenUpdate $8A           = Object code
; .ExpandedLatticeOutputOutputPtr(L&H) $36 & $37 = Position
; 
; NOTES:
; Call ".SetExpandedLatticeOutputPtr"
; to set .ExpandedLatticeOutputPtr(L&H).
; 
; Expanded lattice: $4003 - $4dc2
; ---------------------------------------------------------------
</div>

<b>.UpdateOneCellForScreen</b>

<div class="disass_code"><b>6c80</b>   a6 8a      LDX .ObjectTypeForScreenUpdate
<b>6c82</b>   bd 28 5f   LDA .BaseCharNoForObjectTable,X
<b>6c85</b>   a0 00      LDY #$00
<b>6c87</b>   91 36      STA (.ExpandedLatticeOutputPtrL),Y
<b>6c89</b>   18         CLC 
<b>6c8a</b>   69 01      ADC #$01
<b>6c8c</b>   c8         INY 
<b>6c8d</b>   91 36      STA (.ExpandedLatticeOutputPtrL),Y
<b>6c8f</b>   69 0f      ADC #$0f
<b>6c91</b>   a0 50      LDY #$50
<b>6c93</b>   91 36      STA (.ExpandedLatticeOutputPtrL),Y
<b>6c95</b>   69 01      ADC #$01
<b>6c97</b>   c8         INY 
<b>6c98</b>   91 36      STA (.ExpandedLatticeOutputPtrL),Y
<b>6c9a</b>   60         RTS 
</div>
<a name="6c9b"></a>

<div class="disass_comment">; 
; ---------------------------------------------
; INPUTS:
; .ExpandedLatticeCurrentCellPtr(L&H) $34 & 35
; y = Offset
; OUTPUT:
; .ExpandedLatticeOutputPtr(L&H) $36 & $37
; 
; Expanded lattice: $4003 - $4dc2
; ---------------------------------------------
</div>

<b>.SetExpandedLatticeOutputPtr</b>

<div class="disass_code"><b>6c9b</b>   a2 fd      LDX #$fd
<b>6c9d</b>   98         TYA 
<a name="6c9e"></a><b>6c9e</b>   e8         INX 
<b>6c9f</b>   e8         INX 
<b>6ca0</b>   e8         INX 
<b>6ca1</b>   dd b0 53   CMP <a href="#53b0">.ExpandedLatticeOffsetAdjustTable</a>,X
<b>6ca4</b>   d0 f8      BNE <a href="#6c9e">$6c9e</a>
<b>6ca6</b>   18         CLC 
<b>6ca7</b>   a5 34      LDA .ExpandedLatticeCurrentCellPtrL
<b>6ca9</b>   7d b1 53   ADC <a href="#53b0">.ExpandedLatticeOffsetAdjustTable</a>+1,X
<b>6cac</b>   85 36      STA .ExpandedLatticeOutputPtrL
<b>6cae</b>   a5 35      LDA .ExpandedLatticeCurrentCellPtrH
<b>6cb0</b>   7d b2 53   ADC $53b2,X
<b>6cb3</b>   85 37      STA .ExpandedLatticeOutputPtrH
<b>6cb5</b>   60         RTS 
</div>
<a name="6cb6"></a>

<div class="disass_comment">; 
; A contains the object type and Y the offset from the current position.
; A is preserved.
</div>

<b>.SetCaveCellAndScreenToObject</b>

<div class="disass_code"><b>6cb6</b>   85 8a      STA .ObjectTypeForScreenUpdate
<b>6cb8</b>   91 32      STA (.WorldCurrentCellPtrLow),Y
<b>6cba</b>   a5 92      LDA .CaveMatrixY
<b>6cbc</b>   0a         ASL A
<b>6cbd</b>   aa         TAX 
<b>6cbe</b>   a5 91      LDA .CaveMatrixX
<b>6cc0</b>   0a         ASL A
<b>6cc1</b>   18         CLC 
<b>6cc2</b>   7d da 53   ADC .ExpandedLatticeLineAddressTable,X
<b>6cc5</b>   85 34      STA .ExpandedLatticeCurrentCellPtrL
<b>6cc7</b>   a9 00      LDA #$00
<b>6cc9</b>   7d db 53   ADC .ExpandedLatticeLineAddressTable+1,X
<b>6ccc</b>   85 35      STA .ExpandedLatticeCurrentCellPtrH
<b>6cce</b>   20 9b 6c   JSR <a href="#6c9b">.SetExpandedLatticeOutputPtr</a>
<b>6cd1</b>   20 80 6c   JSR <a href="#6c80">.UpdateOneCellForScreen</a>
<b>6cd4</b>   a5 8a      LDA .ObjectTypeForScreenUpdate
<b>6cd6</b>   60         RTS 
</div>
<a name="6cd7"></a>


<b>.__ProcessWorld__ClearCurrentCell</b>

<div class="disass_code"><b>6cd7</b>   a9 00      LDA #$00
<b>6cd9</b>   85 8a      STA .ObjectTypeForScreenUpdate
<b>6cdb</b>   a0 29      LDY #$29
<b>6cdd</b>   91 32      STA (.WorldCurrentCellPtrLow),Y
<b>6cdf</b>   a5 34      LDA .ExpandedLatticeCurrentCellPtrL
<b>6ce1</b>   85 36      STA .ExpandedLatticeOutputPtrL
<b>6ce3</b>   a5 35      LDA .ExpandedLatticeCurrentCellPtrH
<b>6ce5</b>   85 37      STA .ExpandedLatticeOutputPtrH
<b>6ce7</b>   20 80 6c   JSR <a href="#6c80">.UpdateOneCellForScreen</a>
<b>6cea</b>   4c 15 7e   JMP <a href="#7e15">.__ProcessWorld__NoObjectHandler</a>
</div>
<a name="6ced"></a>

<div class="disass_comment">; 
</div>

<b>.PseudoRandom</b>

<div class="disass_comment">; .RandSeed1
; ...........\/............
; |b7|b6|b5|b4|b3|b2|b1|b0|
; ...........\/............     C
; |b0| 0| 0| 0| 0| 0| 0| 0|--->|b1|
; ...........\/............
; .SeededRandTemp1
</div>
<div class="disass_code"><b>6ced</b>   a5 3f      LDA .RandSeed1
<b>6cef</b>   6a         ROR A
<b>6cf0</b>   6a         ROR A
<b>6cf1</b>   29 80      AND #$80
<b>6cf3</b>   8d 04 98   STA .SeededRandTemp1
</div>


<div class="disass_comment">; 
</div>


<div class="disass_comment">; .RandSeed2
; ...........\/............
; |b7|b6|b5|b4|b3|b2|b1|b0|
; ...........\/............     C
; |0 |b7|b6|b5|b4|b3|b2|b1|--->|b0|
; ...........\/............
; .SeededRandTemp2
</div>
<div class="disass_code"><b>6cf6</b>   a5 3e      LDA .RandSeed2
<b>6cf8</b>   6a         ROR A
<b>6cf9</b>   29 7f      AND #$7f
<b>6cfb</b>   8d 05 98   STA .SeededRandTemp2
</div>


<div class="disass_comment">; 
; .\/RandSeed2
; ...........\/............
; |b7|b6|b5|b4|b3|b2|b1|b0|
; ...........\/............     C
; |b0| 0| 0| 0| 0| 0| 0| 0|--->|b1|
; ...........\/............
; ....+(RandSeed2+0x13)....
; .\/RandSeed2
</div>


<div class="disass_code"><b>6cfe</b>   a5 3e      LDA .RandSeed2
<b>6d00</b>   6a         ROR A
<b>6d01</b>   6a         ROR A
<b>6d02</b>   29 80      AND #$80
<b>6d04</b>   18         CLC 
<b>6d05</b>   65 3e      ADC .RandSeed2
<b>6d07</b>   69 13      ADC #$13
<b>6d09</b>   85 3e      STA .RandSeed2
</div>


<div class="disass_comment">; 
</div>


<div class="disass_code"><b>6d0b</b>   a5 3f      LDA .RandSeed1
<b>6d0d</b>   6d 04 98   ADC .SeededRandTemp1
<b>6d10</b>   6d 05 98   ADC .SeededRandTemp2
<b>6d13</b>   85 3f      STA .RandSeed1
<b>6d15</b>   60         RTS 
</div>
<a name="6d16"></a>

<div class="disass_comment">; 
; Update one cave cell and on screen provided it isn't steel wall.
</div>

<b>.SetCellButPreserveSteelWall</b>

<div class="disass_code"><b>6d16</b>   b1 32      LDA (.WorldCurrentCellPtrLow),Y
</div>


<div class="disass_comment">; Object $07 = steel wall.
</div>


<div class="disass_code"><b>6d18</b>   c9 07      CMP #$07
<b>6d1a</b>   f0 05      BEQ <a href="#6d21">.SetCellButPreserveSteelWall__Finished</a>
<b>6d1c</b>   a5 89      LDA .ObjectTypeForUpdateCaveCell
<b>6d1e</b>   20 b6 6c   JSR <a href="#6cb6">.SetCaveCellAndScreenToObject</a>
</div>
<a name="6d21"></a>


<b>.SetCellButPreserveSteelWall__Finished</b>

<div class="disass_code"><b>6d21</b>   60         RTS 
</div>
<a name="6d22"></a>

<div class="disass_comment">; 
; Specify object type for fill in ObjectTypeForUpdateCaveCell (v).
; If the starred cell is the current cell the update occurs as shown:
; -------------
; |   |   |   |
; |---+---+---|
; | v |*v*|v-1|
; |---+---+---|
; |v-1|v-1|v-1|
; |---+---+---|
; |v-1|v-1|v-1|
; -------------
</div>

<b>.Explode3x3CellsDownOneRow</b>

<div class="disass_code"><b>6d22</b>   a0 28      LDY #$28
<b>6d24</b>   20 16 6d   JSR <a href="#6d16">.SetCellButPreserveSteelWall</a>
<b>6d27</b>   a0 29      LDY #$29
<b>6d29</b>   20 16 6d   JSR <a href="#6d16">.SetCellButPreserveSteelWall</a>
</div>


<div class="disass_comment">; The decrement backs off the fill type for squares yet to
; be processed -- eg. back from explosion stage 1 to stage 0.
</div>


<div class="disass_code"><b>6d2c</b>   c6 89      DEC .ObjectTypeForUpdateCaveCell
<b>6d2e</b>   a0 2a      LDY #$2a
<b>6d30</b>   20 16 6d   JSR <a href="#6d16">.SetCellButPreserveSteelWall</a>
<b>6d33</b>   a0 50      LDY #$50
<b>6d35</b>   20 16 6d   JSR <a href="#6d16">.SetCellButPreserveSteelWall</a>
<b>6d38</b>   a0 51      LDY #$51
<b>6d3a</b>   20 16 6d   JSR <a href="#6d16">.SetCellButPreserveSteelWall</a>
<b>6d3d</b>   a0 52      LDY #$52
<b>6d3f</b>   20 16 6d   JSR <a href="#6d16">.SetCellButPreserveSteelWall</a>
<b>6d42</b>   a0 78      LDY #$78
<b>6d44</b>   20 16 6d   JSR <a href="#6d16">.SetCellButPreserveSteelWall</a>
<b>6d47</b>   a0 79      LDY #$79
<b>6d49</b>   20 16 6d   JSR <a href="#6d16">.SetCellButPreserveSteelWall</a>
<b>6d4c</b>   a0 7a      LDY #$7a
<b>6d4e</b>   20 16 6d   JSR <a href="#6d16">.SetCellButPreserveSteelWall</a>
<b>6d51</b>   4c 91 6d   JMP <a href="#6d91">.Explode3x3Cells__Common</a>
</div>
<a name="6d54"></a>

<div class="disass_comment">; 
; Handler for object $04.
</div>

<b>.ProcessHiddenOutbox</b>

<div class="disass_code"><b>6d54</b>   a5 90      LDA .LevelCompleteFlag
<b>6d56</b>   f0 07      BEQ <a href="#6d5f">.ProcessHiddenOutbox__NotEnoughDiamonds</a>
<b>6d58</b>   a0 29      LDY #$29
</div>


<div class="disass_comment">; Object $05 = flashing outbox.
</div>


<div class="disass_code"><b>6d5a</b>   a9 05      LDA #$05
<b>6d5c</b>   20 b6 6c   JSR <a href="#6cb6">.SetCaveCellAndScreenToObject</a>
</div>
<a name="6d5f"></a>


<b>.ProcessHiddenOutbox__NotEnoughDiamonds</b>

<div class="disass_code"><b>6d5f</b>   4c 15 7e   JMP <a href="#7e15">.__ProcessWorld__NoObjectHandler</a>
</div>
<a name="6d62"></a>

<div class="disass_comment">; 
; Specify object type for fill in ObjectTypeForUpdateCaveCell (v).
; If the starred cell is the current cell the update occurs as shown:
; -------------
; | v | v | v |
; |---+---+---|
; | v |*v*|v-1|
; |---+---+---|
; |v-1|v-1|v-1|
; -------------
</div>

<b>.Explode3x3Cells</b>

<div class="disass_code"><b>6d62</b>   a0 00      LDY #$00
<b>6d64</b>   20 16 6d   JSR <a href="#6d16">.SetCellButPreserveSteelWall</a>
<b>6d67</b>   a0 01      LDY #$01
<b>6d69</b>   20 16 6d   JSR <a href="#6d16">.SetCellButPreserveSteelWall</a>
<b>6d6c</b>   a0 02      LDY #$02
<b>6d6e</b>   20 16 6d   JSR <a href="#6d16">.SetCellButPreserveSteelWall</a>
<b>6d71</b>   a0 28      LDY #$28
<b>6d73</b>   20 16 6d   JSR <a href="#6d16">.SetCellButPreserveSteelWall</a>
<b>6d76</b>   a0 29      LDY #$29
<b>6d78</b>   20 16 6d   JSR <a href="#6d16">.SetCellButPreserveSteelWall</a>
</div>


<div class="disass_comment">; The decrement backs off the fill type for squares yet to
; be processed -- eg. back from explosion stage 1 to stage 0.
</div>


<div class="disass_code"><b>6d7b</b>   c6 89      DEC .ObjectTypeForUpdateCaveCell
<b>6d7d</b>   a0 2a      LDY #$2a
<b>6d7f</b>   20 16 6d   JSR <a href="#6d16">.SetCellButPreserveSteelWall</a>
<b>6d82</b>   a0 50      LDY #$50
<b>6d84</b>   20 16 6d   JSR <a href="#6d16">.SetCellButPreserveSteelWall</a>
<b>6d87</b>   a0 51      LDY #$51
<b>6d89</b>   20 16 6d   JSR <a href="#6d16">.SetCellButPreserveSteelWall</a>
<b>6d8c</b>   a0 52      LDY #$52
<b>6d8e</b>   20 16 6d   JSR <a href="#6d16">.SetCellButPreserveSteelWall</a>
</div>
<a name="6d91"></a>

<div class="disass_comment">; This is used by both Set3x3 functions.
</div>

<b>.Explode3x3Cells__Common</b>

<div class="disass_code"><b>6d91</b>   a9 50      LDA #$50
<b>6d93</b>   8d 11 98   STA $9811
<b>6d96</b>   20 e3 7c   JSR <a href="#7ce3">.ResetVoice2</a>
<b>6d99</b>   a2 06      LDX #$06
</div>
<a name="6d9b"></a>


<b>.Explode3x3Cells__SoundLoop</b>

<div class="disass_code"><b>6d9b</b>   bd a5 6d   LDA <a href="#6da5">.ExplosionSIDVoiceTable</a>,X
<b>6d9e</b>   9d 07 d4   STA .Sid_Voice2FreqLo,X
<b>6da1</b>   ca         DEX 
<b>6da2</b>   10 f7      BPL <a href="#6d9b">.Explode3x3Cells__SoundLoop</a>
<b>6da4</b>   60         RTS 
</div>
<a name="6da5"></a>

<div class="disass_comment">; 
; All values for one SID voice.
</div>

<b>.ExplosionSIDVoiceTable</b>

<div class="disass_code"><b>6da5</b>   32 14 0f 00  81 1b 00
</div>


<div class="disass_comment">; 
; Matrix offset values used for firefly and butterfly turns.
</div>

<b>.FromLeftClockwiseOffsetTable</b>

<div class="disass_code"><b>6dac</b>   28 01 2a 51
</div>



<b>.FromDownClockwiseOffsetTable</b>

<div class="disass_code"><b>6db0</b>   51 28 01 2a
</div>
<a name="6db4"></a>

<div class="disass_comment">; 
; X is zeroed when the test succeeds. Note that this function tests
; for both scanned and unscanned Rockfords, but only pre-existing amoeba.
</div>

<b>.TestForRockfordOrAmoeba</b>

<div class="disass_code"><b>6db4</b>   b1 32      LDA (.WorldCurrentCellPtrLow),Y
</div>


<div class="disass_comment">; Object $38 = Rockford.
</div>


<div class="disass_code"><b>6db6</b>   c9 38      CMP #$38
<b>6db8</b>   90 06      BCC <a href="#6dc0">.TestForRockfordOrAmoeba__Finished</a>
</div>


<div class="disass_comment">; Object $3b = Amoeba created this frame.
</div>


<div class="disass_code"><b>6dba</b>   c9 3b      CMP #$3b
<b>6dbc</b>   b0 02      BCS <a href="#6dc0">.TestForRockfordOrAmoeba__Finished</a>
<b>6dbe</b>   a2 00      LDX #$00
</div>
<a name="6dc0"></a>


<b>.TestForRockfordOrAmoeba__Finished</b>

<div class="disass_code"><b>6dc0</b>   60         RTS 
</div>
<a name="6dc1"></a>

<div class="disass_comment">; 
; Sets the Z flag when an explosion should occur.
</div>

<b>.TestForExplosionByContactWithRockfordOrAmoeba</b>

<div class="disass_code"><b>6dc1</b>   a2 01      LDX #$01
<b>6dc3</b>   a0 01      LDY #$01
<b>6dc5</b>   20 b4 6d   JSR <a href="#6db4">.TestForRockfordOrAmoeba</a>
<b>6dc8</b>   a0 28      LDY #$28
<b>6dca</b>   20 b4 6d   JSR <a href="#6db4">.TestForRockfordOrAmoeba</a>
<b>6dcd</b>   a0 2a      LDY #$2a
<b>6dcf</b>   20 b4 6d   JSR <a href="#6db4">.TestForRockfordOrAmoeba</a>
<b>6dd2</b>   a0 51      LDY #$51
<b>6dd4</b>   20 b4 6d   JSR <a href="#6db4">.TestForRockfordOrAmoeba</a>
<b>6dd7</b>   e0 00      CPX #$00
<b>6dd9</b>   60         RTS 
</div>
<a name="6dda"></a>

<div class="disass_comment">; 
</div>

<b>.ProcessFirefly</b>

<div class="disass_code"><b>6dda</b>   20 c1 6d   JSR <a href="#6dc1">.TestForExplosionByContactWithRockfordOrAmoeba</a>
<b>6ddd</b>   d0 0a      BNE <a href="#6de9">.ProcessFirefly__NoExplosion</a>
</div>


<div class="disass_comment">; Install an explosion to space.
</div>


<div class="disass_code"><b>6ddf</b>   a9 1c      LDA #$1c
<b>6de1</b>   85 89      STA .ObjectTypeForUpdateCaveCell
<b>6de3</b>   20 62 6d   JSR <a href="#6d62">.Explode3x3Cells</a>
<b>6de6</b>   4c 15 7e   JMP <a href="#7e15">.__ProcessWorld__NoObjectHandler</a>
</div>
<a name="6de9"></a>

<div class="disass_comment">; Get the direction the firefly is facing: 0=left, 1=up, 2=right, 3=down.
</div>

<b>.ProcessFirefly__NoExplosion</b>

<div class="disass_code"><b>6de9</b>   a0 29      LDY #$29
<b>6deb</b>   b1 32      LDA (.WorldCurrentCellPtrLow),Y
<b>6ded</b>   29 03      AND #$03
<b>6def</b>   aa         TAX 
</div>


<div class="disass_comment">; Check if there is a space to the firefly's left.
</div>


<div class="disass_code"><b>6df0</b>   bc b0 6d   LDY .FromDownClockwiseOffsetTable,X
<b>6df3</b>   b1 32      LDA (.WorldCurrentCellPtrLow),Y
<b>6df5</b>   d0 0e      BNE <a href="#6e05">.ProcessFirefly__CantTurnLeft</a>
</div>


<div class="disass_comment">; Turn left and move.
</div>


<div class="disass_code"><b>6df7</b>   18         CLC 
<b>6df8</b>   8a         TXA 
<b>6df9</b>   69 03      ADC #$03
<b>6dfb</b>   29 03      AND #$03
<b>6dfd</b>   69 0c      ADC #$0c
<b>6dff</b>   20 b6 6c   JSR <a href="#6cb6">.SetCaveCellAndScreenToObject</a>
<b>6e02</b>   4c d7 6c   JMP <a href="#6cd7">.__ProcessWorld__ClearCurrentCell</a>
</div>
<a name="6e05"></a>

<div class="disass_comment">; Check if there is a space straight ahead.
</div>

<b>.ProcessFirefly__CantTurnLeft</b>

<div class="disass_code"><b>6e05</b>   bc ac 6d   LDY .FromLeftClockwiseOffsetTable,X
<b>6e08</b>   b1 32      LDA (.WorldCurrentCellPtrLow),Y
<b>6e0a</b>   d0 0d      BNE <a href="#6e19">.ProcessFirefly__CantMoveStraightAhead</a>
</div>


<div class="disass_comment">; Move straight ahead.
</div>


<div class="disass_code"><b>6e0c</b>   18         CLC 
<b>6e0d</b>   8a         TXA 
<b>6e0e</b>   69 0c      ADC #$0c
<b>6e10</b>   bc ac 6d   LDY .FromLeftClockwiseOffsetTable,X
<b>6e13</b>   20 b6 6c   JSR <a href="#6cb6">.SetCaveCellAndScreenToObject</a>
<b>6e16</b>   4c d7 6c   JMP <a href="#6cd7">.__ProcessWorld__ClearCurrentCell</a>
</div>
<a name="6e19"></a>

<div class="disass_comment">; Turn right, but do not move.
</div>

<b>.ProcessFirefly__CantMoveStraightAhead</b>

<div class="disass_code"><b>6e19</b>   18         CLC 
<b>6e1a</b>   a0 29      LDY #$29
<b>6e1c</b>   8a         TXA 
<b>6e1d</b>   69 01      ADC #$01
<b>6e1f</b>   29 03      AND #$03
<b>6e21</b>   69 0c      ADC #$0c
<b>6e23</b>   91 32      STA (.WorldCurrentCellPtrLow),Y
<b>6e25</b>   4c 15 7e   JMP <a href="#7e15">.__ProcessWorld__NoObjectHandler</a>
</div>
<a name="6e28"></a>

<div class="disass_comment">; 
</div>

<b>.FallingDiamondSoundFX</b>

<div class="disass_code"><b>6e28</b>   ee 0d 98   INC .MusicTickRoutine::Voice1SustainLevel+1
<b>6e2b</b>   a2 03      LDX #$03
</div>
<a name="6e2d"></a>


<b>.FallingDiamondSoundFX__Loop</b>

<div class="disass_code"><b>6e2d</b>   bd 8c 71   LDA $718c,X
<b>6e30</b>   9d 7f 98   STA $987f,X
<b>6e33</b>   ca         DEX 
<b>6e34</b>   10 f7      BPL <a href="#6e2d">.FallingDiamondSoundFX__Loop</a>
<b>6e36</b>   a9 a0      LDA #$a0
<b>6e38</b>   8d 83 98   STA $9883
<b>6e3b</b>   20 d0 6a   JSR <a href="#6ad0">.TrueRandom</a>
<b>6e3e</b>   8d 7d 98   STA .Voice1SIDRegsBuffer[7]
<b>6e41</b>   20 d0 6a   JSR <a href="#6ad0">.TrueRandom</a>
<b>6e44</b>   29 07      AND #$07
<b>6e46</b>   0a         ASL A
<b>6e47</b>   0a         ASL A
<b>6e48</b>   0a         ASL A
<b>6e49</b>   69 86      ADC #$86
<b>6e4b</b>   8d 7e 98   STA .Voice1SIDRegsBuffer[7]+1
<b>6e4e</b>   60         RTS 
</div>
<a name="6e4f"></a>

<div class="disass_comment">; 
; All values for one SID voice.
</div>

<b>.FallingBoulderSIDVoiceTable</b>

<div class="disass_code"><b>6e4f</b>   32 09 07 00  81 00 f0
</div>
<a name="6e56"></a>

<div class="disass_comment">; 
</div>

<b>.FallingBoulderSoundFX</b>

<div class="disass_code"><b>6e56</b>   ee 0d 98   INC .MusicTickRoutine::Voice1SustainLevel+1
<b>6e59</b>   a2 06      LDX #$06
</div>
<a name="6e5b"></a>


<b>.FallingBoulderSoundFX__Loop</b>

<div class="disass_code"><b>6e5b</b>   bd 4f 6e   LDA <a href="#6e4f">.FallingBoulderSIDVoiceTable</a>,X
<b>6e5e</b>   9d 7d 98   STA .Voice1SIDRegsBuffer[7],X
<b>6e61</b>   ca         DEX 
<b>6e62</b>   10 f7      BPL <a href="#6e5b">.FallingBoulderSoundFX__Loop</a>
<b>6e64</b>   60         RTS 
</div>
<a name="6e65"></a>

<div class="disass_comment">; 
; Tests if an object is slippery.
; In:
; A: The object code to test.
; Out:
; Z: 1 if slippery.
; Modified:
; X
</div>

<b>.TestIfObjectSlippery</b>

<div class="disass_code"><b>6e65</b>   a2 00      LDX #$00
<b>6e67</b>   c9 10      CMP #$10
<b>6e69</b>   d0 02      BNE <a href="#6e6d">.TestIfObjectSlippery_NotOnBoulder</a>
<b>6e6b</b>   a2 01      LDX #$01
</div>
<a name="6e6d"></a>


<b>.TestIfObjectSlippery_NotOnBoulder</b>

<div class="disass_code"><b>6e6d</b>   c9 14      CMP #$14
<b>6e6f</b>   d0 02      BNE <a href="#6e73">.TestIfObjectSlippery_NotOnDiamond</a>
<b>6e71</b>   a2 01      LDX #$01
</div>
<a name="6e73"></a>


<b>.TestIfObjectSlippery_NotOnDiamond</b>

<div class="disass_code"><b>6e73</b>   c9 02      CMP #$02
<b>6e75</b>   d0 02      BNE <a href="#6e79">.TestIfObjectSlippery_NotOnBrickWall</a>
<b>6e77</b>   a2 01      LDX #$01
</div>
<a name="6e79"></a>


<b>.TestIfObjectSlippery_NotOnBrickWall</b>

<div class="disass_code"><b>6e79</b>   e0 01      CPX #$01
<b>6e7b</b>   60         RTS 
</div>
<a name="6e7c"></a>

<div class="disass_comment">; 
</div>

<b>.CheckIfFallingObjectKillsAnimal</b>

<div class="disass_code"><b>6e7c</b>   a2 01      LDX #$01
</div>


<div class="disass_comment">; Test for hitting a butterfly.
</div>


<div class="disass_code"><b>6e7e</b>   b1 32      LDA (.WorldCurrentCellPtrLow),Y
<b>6e80</b>   29 33      AND #$33
<b>6e82</b>   d1 32      CMP (.WorldCurrentCellPtrLow),Y
<b>6e84</b>   d0 0c      BNE <a href="#6e92">.CheckIfFallingObjectKillsAnimal_NotButterfly</a>
<b>6e86</b>   09 30      ORA #$30
<b>6e88</b>   d1 32      CMP (.WorldCurrentCellPtrLow),Y
<b>6e8a</b>   d0 06      BNE <a href="#6e92">.CheckIfFallingObjectKillsAnimal_NotButterfly</a>
</div>


<div class="disass_comment">; Remember to explode to diamonds.
</div>


<div class="disass_code"><b>6e8c</b>   a2 00      LDX #$00
<b>6e8e</b>   a9 21      LDA #$21
<b>6e90</b>   85 89      STA .ObjectTypeForUpdateCaveCell
</div>
<a name="6e92"></a>


<b>.CheckIfFallingObjectKillsAnimal_NotButterfly</b>

<div class="disass_code"><b>6e92</b>   e0 00      CPX #$00
<b>6e94</b>   f0 14      BEQ <a href="#6eaa">.CheckIfFallingObjectKillsAnimal_Finished</a>
<b>6e96</b>   a2 01      LDX #$01
</div>


<div class="disass_comment">; Test for hitting a firefly.
</div>


<div class="disass_code"><b>6e98</b>   b1 32      LDA (.WorldCurrentCellPtrLow),Y
<b>6e9a</b>   29 0b      AND #$0b
<b>6e9c</b>   d1 32      CMP (.WorldCurrentCellPtrLow),Y
<b>6e9e</b>   d0 0a      BNE <a href="#6eaa">.CheckIfFallingObjectKillsAnimal_Finished</a>
<b>6ea0</b>   29 08      AND #$08
<b>6ea2</b>   f0 06      BEQ <a href="#6eaa">.CheckIfFallingObjectKillsAnimal_Finished</a>
<b>6ea4</b>   a2 00      LDX #$00
</div>


<div class="disass_comment">; Remember to explode to space.
</div>


<div class="disass_code"><b>6ea6</b>   a9 1c      LDA #$1c
<b>6ea8</b>   85 89      STA .ObjectTypeForUpdateCaveCell
</div>
<a name="6eaa"></a>


<b>.CheckIfFallingObjectKillsAnimal_Finished</b>

<div class="disass_code"><b>6eaa</b>   e0 00      CPX #$00
<b>6eac</b>   60         RTS 
</div>
<a name="6ead"></a>

<div class="disass_comment">; 
</div>

<b>.ProcessButterfly</b>

<div class="disass_code"><b>6ead</b>   20 c1 6d   JSR <a href="#6dc1">.TestForExplosionByContactWithRockfordOrAmoeba</a>
<b>6eb0</b>   d0 0a      BNE <a href="#6ebc">.ProcessButterfly__NoExplosion</a>
</div>


<div class="disass_comment">; Install an explosion to diamonds.
</div>


<div class="disass_code"><b>6eb2</b>   a9 21      LDA #$21
<b>6eb4</b>   85 89      STA .ObjectTypeForUpdateCaveCell
<b>6eb6</b>   20 62 6d   JSR <a href="#6d62">.Explode3x3Cells</a>
<b>6eb9</b>   4c 15 7e   JMP <a href="#7e15">.__ProcessWorld__NoObjectHandler</a>
</div>
<a name="6ebc"></a>

<div class="disass_comment">; Get the direction the butterfly is facing: 0=down, 1=left, 2=up, 3=right.
</div>

<b>.ProcessButterfly__NoExplosion</b>

<div class="disass_code"><b>6ebc</b>   a0 29      LDY #$29
<b>6ebe</b>   b1 32      LDA (.WorldCurrentCellPtrLow),Y
<b>6ec0</b>   29 03      AND #$03
<b>6ec2</b>   aa         TAX 
</div>


<div class="disass_comment">; Check if there is a space to the right.
</div>


<div class="disass_code"><b>6ec3</b>   bc ac 6d   LDY .FromLeftClockwiseOffsetTable,X
<b>6ec6</b>   b1 32      LDA (.WorldCurrentCellPtrLow),Y
<b>6ec8</b>   d0 0e      BNE <a href="#6ed8">.ProcessButterfly__CantTurnRight</a>
</div>


<div class="disass_comment">; Turn right and move.
</div>


<div class="disass_code"><b>6eca</b>   18         CLC 
<b>6ecb</b>   8a         TXA 
<b>6ecc</b>   69 01      ADC #$01
<b>6ece</b>   29 03      AND #$03
<b>6ed0</b>   69 34      ADC #$34
<b>6ed2</b>   20 b6 6c   JSR <a href="#6cb6">.SetCaveCellAndScreenToObject</a>
<b>6ed5</b>   4c d7 6c   JMP <a href="#6cd7">.__ProcessWorld__ClearCurrentCell</a>
</div>
<a name="6ed8"></a>

<div class="disass_comment">; Check if there is a space straight ahead.
</div>

<b>.ProcessButterfly__CantTurnRight</b>

<div class="disass_code"><b>6ed8</b>   bc b0 6d   LDY .FromDownClockwiseOffsetTable,X
<b>6edb</b>   b1 32      LDA (.WorldCurrentCellPtrLow),Y
<b>6edd</b>   d0 0d      BNE <a href="#6eec">.ProcessButterfly__CantMoveStraightAhead</a>
</div>


<div class="disass_comment">; Move straight ahead.
</div>


<div class="disass_code"><b>6edf</b>   18         CLC 
<b>6ee0</b>   8a         TXA 
<b>6ee1</b>   69 34      ADC #$34
<b>6ee3</b>   bc b0 6d   LDY .FromDownClockwiseOffsetTable,X
<b>6ee6</b>   20 b6 6c   JSR <a href="#6cb6">.SetCaveCellAndScreenToObject</a>
<b>6ee9</b>   4c d7 6c   JMP <a href="#6cd7">.__ProcessWorld__ClearCurrentCell</a>
</div>
<a name="6eec"></a>

<div class="disass_comment">; Turn left, but do not move.
</div>

<b>.ProcessButterfly__CantMoveStraightAhead</b>

<div class="disass_code"><b>6eec</b>   18         CLC 
<b>6eed</b>   a0 29      LDY #$29
<b>6eef</b>   8a         TXA 
<b>6ef0</b>   69 03      ADC #$03
<b>6ef2</b>   29 03      AND #$03
<b>6ef4</b>   69 34      ADC #$34
<b>6ef6</b>   91 32      STA (.WorldCurrentCellPtrLow),Y
<b>6ef8</b>   4c 15 7e   JMP <a href="#7e15">.__ProcessWorld__NoObjectHandler</a>
</div>
<a name="6efb"></a>

<div class="disass_comment">; 
</div>

<b>.__ProcessWorld__CreateScannedStationaryDiamond</b>

<div class="disass_code"><b>6efb</b>   a0 29      LDY #$29
<b>6efd</b>   a9 15      LDA #$15
<b>6eff</b>   20 b6 6c   JSR <a href="#6cb6">.SetCaveCellAndScreenToObject</a>
<b>6f02</b>   4c 15 7e   JMP <a href="#7e15">.__ProcessWorld__NoObjectHandler</a>
</div>
<a name="6f05"></a>

<div class="disass_comment">; 
</div>

<b>.ProcessFallingDiamond</b>

<div class="disass_code"><b>6f05</b>   a0 51      LDY #$51
</div>


<div class="disass_comment">; Check for a space below.
</div>


<div class="disass_code"><b>6f07</b>   b1 32      LDA (.WorldCurrentCellPtrLow),Y
<b>6f09</b>   d0 08      BNE <a href="#6f13">.ProcessFallingDiamond__NoSpaceBelow</a>
</div>


<div class="disass_comment">; Move the falling diamond down one row, and mark as scanned.
</div>


<div class="disass_code"><b>6f0b</b>   a9 17      LDA #$17
<b>6f0d</b>   20 b6 6c   JSR <a href="#6cb6">.SetCaveCellAndScreenToObject</a>
<b>6f10</b>   4c d7 6c   JMP <a href="#6cd7">.__ProcessWorld__ClearCurrentCell</a>
</div>
<a name="6f13"></a>

<div class="disass_comment">; Check for a magic wall below.
</div>

<b>.ProcessFallingDiamond__NoSpaceBelow</b>

<div class="disass_code"><b>6f13</b>   c9 03      CMP #$03
<b>6f15</b>   d0 1d      BNE <a href="#6f34">.ProcessFallingDiamond__NoMagicWallBelow</a>
</div>


<div class="disass_comment">; Has the magic wall already been activated?
</div>


<div class="disass_code"><b>6f17</b>   a5 8d      LDA .MagicWallActiveState
<b>6f19</b>   d0 04      BNE <a href="#6f1f">.ProcessFallingDiamond__MagicWallAlreadyActivated</a>
</div>


<div class="disass_comment">; Activate the magic wall.
</div>


<div class="disass_code"><b>6f1b</b>   a9 01      LDA #$01
<b>6f1d</b>   85 8d      STA .MagicWallActiveState
</div>
<a name="6f1f"></a>

<div class="disass_comment">; Is the magic wall still active? If not the diamond will just be consumed.
</div>

<b>.ProcessFallingDiamond__MagicWallAlreadyActivated</b>

<div class="disass_code"><b>6f1f</b>   c9 01      CMP #$01
<b>6f21</b>   d0 0b      BNE <a href="#6f2e">.ProcessFallingDiamond__ClearDiamondAboveMagicWall</a>
</div>


<div class="disass_comment">; Is the row below the magic wall empty? If not the diamond will just be consumed.
</div>


<div class="disass_code"><b>6f23</b>   a0 79      LDY #$79
<b>6f25</b>   b1 32      LDA (.WorldCurrentCellPtrLow),Y
<b>6f27</b>   d0 05      BNE <a href="#6f2e">.ProcessFallingDiamond__ClearDiamondAboveMagicWall</a>
</div>


<div class="disass_comment">; Convert the diamond to a (scanned) falling boulder below the magic wall.
</div>


<div class="disass_code"><b>6f29</b>   a9 13      LDA #$13
<b>6f2b</b>   20 b6 6c   JSR <a href="#6cb6">.SetCaveCellAndScreenToObject</a>
</div>
<a name="6f2e"></a>


<b>.ProcessFallingDiamond__ClearDiamondAboveMagicWall</b>

<div class="disass_code"><b>6f2e</b>   20 56 6e   JSR <a href="#6e56">.FallingBoulderSoundFX</a>
<b>6f31</b>   4c d7 6c   JMP <a href="#6cd7">.__ProcessWorld__ClearCurrentCell</a>
</div>
<a name="6f34"></a>

<div class="disass_comment">; Tinkle while the diamond falls.
</div>

<b>.ProcessFallingDiamond__NoMagicWallBelow</b>

<div class="disass_code"><b>6f34</b>   20 28 6e   JSR <a href="#6e28">.FallingDiamondSoundFX</a>
</div>


<div class="disass_comment">; Check if the diamond has hit a slippery object.
</div>


<div class="disass_code"><b>6f37</b>   a0 51      LDY #$51
<b>6f39</b>   b1 32      LDA (.WorldCurrentCellPtrLow),Y
<b>6f3b</b>   20 65 6e   JSR <a href="#6e65">.TestIfObjectSlippery</a>
<b>6f3e</b>   d0 2b      BNE <a href="#6f6b">.ProcessFallingDiamond__NotSlipperyHit</a>
</div>


<div class="disass_comment">; Is there a space below-left?
</div>


<div class="disass_code"><b>6f40</b>   a0 50      LDY #$50
<b>6f42</b>   b1 32      LDA (.WorldCurrentCellPtrLow),Y
<b>6f44</b>   d0 0e      BNE <a href="#6f54">.ProcessFallingDiamond__CantFallLeft</a>
</div>


<div class="disass_comment">; Is there a space left?
</div>


<div class="disass_code"><b>6f46</b>   a0 28      LDY #$28
<b>6f48</b>   b1 32      LDA (.WorldCurrentCellPtrLow),Y
<b>6f4a</b>   d0 08      BNE <a href="#6f54">.ProcessFallingDiamond__CantFallLeft</a>
</div>


<div class="disass_comment">; Move the diamond left.
</div>


<div class="disass_code"><b>6f4c</b>   a9 17      LDA #$17
<b>6f4e</b>   20 b6 6c   JSR <a href="#6cb6">.SetCaveCellAndScreenToObject</a>
<b>6f51</b>   4c d7 6c   JMP <a href="#6cd7">.__ProcessWorld__ClearCurrentCell</a>
</div>
<a name="6f54"></a>

<div class="disass_comment">; Is there a space below-right?
</div>

<b>.ProcessFallingDiamond__CantFallLeft</b>

<div class="disass_code"><b>6f54</b>   a0 52      LDY #$52
<b>6f56</b>   b1 32      LDA (.WorldCurrentCellPtrLow),Y
<b>6f58</b>   d0 0e      BNE <a href="#6f68">.ProcessFallingDiamond__CantFallRight</a>
</div>


<div class="disass_comment">; Is there a space right?
</div>


<div class="disass_code"><b>6f5a</b>   a0 2a      LDY #$2a
<b>6f5c</b>   b1 32      LDA (.WorldCurrentCellPtrLow),Y
<b>6f5e</b>   d0 08      BNE <a href="#6f68">.ProcessFallingDiamond__CantFallRight</a>
</div>


<div class="disass_comment">; Move the diamond right.
</div>


<div class="disass_code"><b>6f60</b>   a9 17      LDA #$17
<b>6f62</b>   20 b6 6c   JSR <a href="#6cb6">.SetCaveCellAndScreenToObject</a>
<b>6f65</b>   4c d7 6c   JMP <a href="#6cd7">.__ProcessWorld__ClearCurrentCell</a>
</div>
<a name="6f68"></a>

<div class="disass_comment">; The diamond is on a slippery object, but can't fall left or right.
</div>

<b>.ProcessFallingDiamond__CantFallRight</b>

<div class="disass_code"><b>6f68</b>   4c fb 6e   JMP <a href="#6efb">.__ProcessWorld__CreateScannedStationaryDiamond</a>
</div>
<a name="6f6b"></a>

<div class="disass_comment">; Have we hit Rockford on the head?
</div>

<b>.ProcessFallingDiamond__NotSlipperyHit</b>

<div class="disass_code"><b>6f6b</b>   c9 38      CMP #$38
<b>6f6d</b>   d0 0a      BNE <a href="#6f79">.ProcessFallingDiamond__DidntHitRockford</a>
</div>


<div class="disass_comment">; Poor old Rockford is dead -- explode him to space.
</div>


<div class="disass_code"><b>6f6f</b>   a9 1c      LDA #$1c
<b>6f71</b>   85 89      STA .ObjectTypeForUpdateCaveCell
<b>6f73</b>   20 22 6d   JSR <a href="#6d22">.Explode3x3CellsDownOneRow</a>
<b>6f76</b>   4c 15 7e   JMP <a href="#7e15">.__ProcessWorld__NoObjectHandler</a>
</div>
<a name="6f79"></a>

<div class="disass_comment">; Have we hit an animal?
</div>

<b>.ProcessFallingDiamond__DidntHitRockford</b>

<div class="disass_code"><b>6f79</b>   20 7c 6e   JSR <a href="#6e7c">.CheckIfFallingObjectKillsAnimal</a>
<b>6f7c</b>   d0 06      BNE <a href="#6f84">.ProcessFallingDiamond__DidntHitAnimal</a>
</div>


<div class="disass_comment">; Explode the animal.
</div>


<div class="disass_code"><b>6f7e</b>   20 22 6d   JSR <a href="#6d22">.Explode3x3CellsDownOneRow</a>
<b>6f81</b>   4c 15 7e   JMP <a href="#7e15">.__ProcessWorld__NoObjectHandler</a>
</div>
<a name="6f84"></a>

<div class="disass_comment">; Can't do anything interesting, so convert to a stationary diamond.
</div>

<b>.ProcessFallingDiamond__DidntHitAnimal</b>

<div class="disass_code"><b>6f84</b>   4c fb 6e   JMP <a href="#6efb">.__ProcessWorld__CreateScannedStationaryDiamond</a>
</div>
<a name="6f87"></a>

<div class="disass_comment">; 
</div>

<b>.ProcessStationaryDiamond</b>

<div class="disass_code"><b>6f87</b>   a0 51      LDY #$51
</div>


<div class="disass_comment">; Is there a space below the diamond?
</div>


<div class="disass_code"><b>6f89</b>   b1 32      LDA (.WorldCurrentCellPtrLow),Y
<b>6f8b</b>   d0 0b      BNE <a href="#6f98">.ProcessStationaryDiamond__NoSpaceBelow</a>
</div>


<div class="disass_comment">; Convert to a scanned falling diamond and move down.
</div>


<div class="disass_code"><b>6f8d</b>   a9 17      LDA #$17
<b>6f8f</b>   20 b6 6c   JSR <a href="#6cb6">.SetCaveCellAndScreenToObject</a>
<b>6f92</b>   20 28 6e   JSR <a href="#6e28">.FallingDiamondSoundFX</a>
<b>6f95</b>   4c d7 6c   JMP <a href="#6cd7">.__ProcessWorld__ClearCurrentCell</a>
</div>
<a name="6f98"></a>

<div class="disass_comment">; Is the diamond sitting on a slippery object?
</div>

<b>.ProcessStationaryDiamond__NoSpaceBelow</b>

<div class="disass_code"><b>6f98</b>   a0 51      LDY #$51
<b>6f9a</b>   b1 32      LDA (.WorldCurrentCellPtrLow),Y
<b>6f9c</b>   20 65 6e   JSR <a href="#6e65">.TestIfObjectSlippery</a>
<b>6f9f</b>   d0 28      BNE <a href="#6fc9">.ProcessStationaryDiamond__Finished</a>
</div>


<div class="disass_comment">; Is there a space below-left?
</div>


<div class="disass_code"><b>6fa1</b>   a0 50      LDY #$50
<b>6fa3</b>   b1 32      LDA (.WorldCurrentCellPtrLow),Y
<b>6fa5</b>   d0 0e      BNE <a href="#6fb5">.ProcessStationaryDiamond__CantFallLeft</a>
</div>


<div class="disass_comment">; Is there a space left?
</div>


<div class="disass_code"><b>6fa7</b>   a0 28      LDY #$28
<b>6fa9</b>   b1 32      LDA (.WorldCurrentCellPtrLow),Y
<b>6fab</b>   d0 08      BNE <a href="#6fb5">.ProcessStationaryDiamond__CantFallLeft</a>
</div>


<div class="disass_comment">; Move the diamond left.
</div>


<div class="disass_code"><b>6fad</b>   a9 17      LDA #$17
<b>6faf</b>   20 b6 6c   JSR <a href="#6cb6">.SetCaveCellAndScreenToObject</a>
<b>6fb2</b>   4c d7 6c   JMP <a href="#6cd7">.__ProcessWorld__ClearCurrentCell</a>
</div>
<a name="6fb5"></a>

<div class="disass_comment">; Is there a space below-right?
</div>

<b>.ProcessStationaryDiamond__CantFallLeft</b>

<div class="disass_code"><b>6fb5</b>   a0 52      LDY #$52
<b>6fb7</b>   b1 32      LDA (.WorldCurrentCellPtrLow),Y
<b>6fb9</b>   d0 0e      BNE <a href="#6fc9">.ProcessStationaryDiamond__Finished</a>
</div>


<div class="disass_comment">; Is there a space right?
</div>


<div class="disass_code"><b>6fbb</b>   a0 2a      LDY #$2a
<b>6fbd</b>   b1 32      LDA (.WorldCurrentCellPtrLow),Y
<b>6fbf</b>   d0 08      BNE <a href="#6fc9">.ProcessStationaryDiamond__Finished</a>
</div>


<div class="disass_comment">; Move the diamond right.
</div>


<div class="disass_code"><b>6fc1</b>   a9 17      LDA #$17
<b>6fc3</b>   20 b6 6c   JSR <a href="#6cb6">.SetCaveCellAndScreenToObject</a>
<b>6fc6</b>   4c d7 6c   JMP <a href="#6cd7">.__ProcessWorld__ClearCurrentCell</a>
</div>
<a name="6fc9"></a>


<b>.ProcessStationaryDiamond__Finished</b>

<div class="disass_code"><b>6fc9</b>   4c 15 7e   JMP <a href="#7e15">.__ProcessWorld__NoObjectHandler</a>
</div>
<a name="6fcc"></a>

<div class="disass_comment">; 
</div>

<b>.AmoebaUpLeftRightDownOffsetTable</b>

<div class="disass_code"><b>6fcc</b>   01 28 2a 51
</div>
<a name="6fd0"></a>

<div class="disass_comment">; 
</div>

<b>.ProcessAmoeba</b>

<div class="disass_code"><b>6fd0</b>   ee 02 98   INC .AmoebaCellCountThisTick
<b>6fd3</b>   ad 03 98   LDA .AmoebaCellCountPreviousTick
<b>6fd6</b>   c9 c8      CMP #$c8
<b>6fd8</b>   90 08      BCC <a href="#6fe2">.__ProcessAmoeba__NotTooBig</a>
</div>



<b>.__ProcessAmoeba__GreaterOrEqualTo200</b>

<div class="disass_comment">; $11 = Scanned stationary boulder.
</div>
<div class="disass_code"><b>6fda</b>   a9 11      LDA #$11
<b>6fdc</b>   20 b6 6c   JSR <a href="#6cb6">.SetCaveCellAndScreenToObject</a>
<b>6fdf</b>   4c 15 7e   JMP <a href="#7e15">.__ProcessWorld__NoObjectHandler</a>
</div>
<a name="6fe2"></a>


<b>.__ProcessAmoeba__NotTooBig</b>

<div class="disass_code"><b>6fe2</b>   a5 8c      LDA .AmeobaCouldGrowLastTick
<b>6fe4</b>   d0 08      BNE <a href="#6fee">.__ProcessAmoeba__NotConfined</a>
</div>


<div class="disass_comment">; $14 = Stationary diamond.
</div>


<div class="disass_code"><b>6fe6</b>   a9 14      LDA #$14
<b>6fe8</b>   20 b6 6c   JSR <a href="#6cb6">.SetCaveCellAndScreenToObject</a>
<b>6feb</b>   4c 15 7e   JMP <a href="#7e15">.__ProcessWorld__NoObjectHandler</a>
</div>
<a name="6fee"></a>


<b>.__ProcessAmoeba__NotConfined</b>

<div class="disass_code"><b>6fee</b>   a5 42      LDA .AmeobaCouldGrowThisTick
<b>6ff0</b>   d0 20      BNE <a href="#7012">.__ProcessAmoeba__AlreadyKnowAmoebaCanGrowThisTick</a>
<b>6ff2</b>   a9 03      LDA #$03
<b>6ff4</b>   85 46      STA .__Local1__
<b>6ff6</b>   a2 01      LDX #$01
</div>
<a name="6ff8"></a>


<b>.__ProcessAmoeba__ConfinementTestLoop</b>

<div class="disass_code"><b>6ff8</b>   a4 46      LDY .__Local1__
<b>6ffa</b>   b9 cc 6f   LDA <a href="#6fcc">.AmoebaUpLeftRightDownOffsetTable</a>,Y
<b>6ffd</b>   a8         TAY 
<b>6ffe</b>   b1 32      LDA (.WorldCurrentCellPtrLow),Y
</div>


<div class="disass_comment">; $00 = Space, $01 = Dirt, $02 = Brick wall.
; Amoeba can grow into space and dirt. It is confined by anything else.
</div>


<div class="disass_code"><b>7000</b>   c9 02      CMP #$02
<b>7002</b>   b0 02      BCS <a href="#7006">.__ProcessAmoeba__CantGrowThisDirection</a>
<b>7004</b>   a2 00      LDX #$00
</div>
<a name="7006"></a>


<b>.__ProcessAmoeba__CantGrowThisDirection</b>

<div class="disass_code"><b>7006</b>   c6 46      DEC .__Local1__
<b>7008</b>   10 ee      BPL <a href="#6ff8">.__ProcessAmoeba__ConfinementTestLoop</a>
<b>700a</b>   e0 00      CPX #$00
<b>700c</b>   d0 04      BNE <a href="#7012">.__ProcessAmoeba__AlreadyKnowAmoebaCanGrowThisTick</a>
<b>700e</b>   a9 01      LDA #$01
<b>7010</b>   85 42      STA .AmeobaCouldGrowThisTick
</div>
<a name="7012"></a>


<b>.__ProcessAmoeba__AlreadyKnowAmoebaCanGrowThisTick</b>

<div class="disass_code"><b>7012</b>   20 d0 6a   JSR <a href="#6ad0">.TrueRandom</a>
<b>7015</b>   25 9a      AND .AmoebaGrowthProbabilityMask
<b>7017</b>   c9 04      CMP #$04
<b>7019</b>   b0 1b      BCS <a href="#7036">.__ProcessAmoeba__DontGrowThisTick</a>
<b>701b</b>   aa         TAX 
<b>701c</b>   bc cc 6f   LDY <a href="#6fcc">.AmoebaUpLeftRightDownOffsetTable</a>,X
<b>701f</b>   a2 01      LDX #$01
<b>7021</b>   b1 32      LDA (.WorldCurrentCellPtrLow),Y
<b>7023</b>   d0 02      BNE <a href="#7027">.__ProcessAmoeba__NotSpace</a>
<b>7025</b>   a2 00      LDX #$00
</div>
<a name="7027"></a>


<b>.__ProcessAmoeba__NotSpace</b>

<div class="disass_code"><b>7027</b>   c9 01      CMP #$01
<b>7029</b>   d0 02      BNE <a href="#702d">.__ProcessAmoeba__NotDirt</a>
<b>702b</b>   a2 00      LDX #$00
</div>
<a name="702d"></a>


<b>.__ProcessAmoeba__NotDirt</b>

<div class="disass_code"><b>702d</b>   e0 00      CPX #$00
<b>702f</b>   d0 05      BNE <a href="#7036">.__ProcessAmoeba__DontGrowThisTick</a>
</div>


<div class="disass_comment">; $3b = Scanned amoeba.
</div>


<div class="disass_code"><b>7031</b>   a9 3b      LDA #$3b
<b>7033</b>   20 b6 6c   JSR <a href="#6cb6">.SetCaveCellAndScreenToObject</a>
</div>
<a name="7036"></a>


<b>.__ProcessAmoeba__DontGrowThisTick</b>

<div class="disass_code"><b>7036</b>   4c 15 7e   JMP <a href="#7e15">.__ProcessWorld__NoObjectHandler</a>
</div>
<a name="7039"></a>

<div class="disass_comment">; 
</div>

<b>.ExtraLife</b>

<div class="disass_code"><b>7039</b>   a5 5c      LDA .Lives
<b>703b</b>   c9 09      CMP #$09
<b>703d</b>   f0 06      BEQ <a href="#7045">$7045</a>
<b>703f</b>   e6 5c      INC .Lives
<b>7041</b>   a9 80      LDA #$80
<b>7043</b>   85 a8      STA .ExtraLifeFXCounter
<a name="7045"></a><b>7045</b>   60         RTS 
</div>
<a name="7046"></a>


<b>.ProcessExtraLife</b>

<div class="disass_code"><b>7046</b>   a5 a9      LDA .OldScore1000sDigit
<b>7048</b>   c5 61      CMP $61
<b>704a</b>   f0 03      BEQ <a href="#704f">$704f</a>
<b>704c</b>   20 39 70   JSR <a href="#7039">.ExtraLife</a>
<a name="704f"></a><b>704f</b>   a5 aa      LDA .OldScore100sDigit
<b>7051</b>   c9 04      CMP #$04
<b>7053</b>   d0 07      BNE <a href="#705c">$705c</a>
<b>7055</b>   c5 62      CMP $62
<b>7057</b>   f0 03      BEQ <a href="#705c">$705c</a>
<b>7059</b>   20 39 70   JSR <a href="#7039">.ExtraLife</a>
<a name="705c"></a><b>705c</b>   60         RTS 
</div>
<a name="705d"></a>

<div class="disass_comment">; 
; You get an extra life every 500 points.
</div>

<b>.IncrementScore</b>

<div class="disass_code"><b>705d</b>   a5 61      LDA $61
<b>705f</b>   85 a9      STA .OldScore1000sDigit
<b>7061</b>   a5 62      LDA $62
<b>7063</b>   85 aa      STA .OldScore100sDigit
<b>7065</b>   a2 05      LDX #$05
<b>7067</b>   18         CLC 
<a name="7068"></a><b>7068</b>   b5 5f      LDA .ScoreDigits[6],X
<b>706a</b>   75 4e      ADC .ScoreIncrementDigits[6],X
<b>706c</b>   c9 0a      CMP #$0a
<b>706e</b>   90 02      BCC <a href="#7072">$7072</a>
<b>7070</b>   e9 0a      SBC #$0a
<a name="7072"></a><b>7072</b>   95 5f      STA .ScoreDigits[6],X
<b>7074</b>   09 10      ORA #$10
<b>7076</b>   9d 48 98   STA .ScoreChars[6],X
<b>7079</b>   ca         DEX 
<b>707a</b>   10 ec      BPL <a href="#7068">$7068</a>
<b>707c</b>   20 46 70   JSR <a href="#7046">.ProcessExtraLife</a>
<b>707f</b>   60         RTS 
</div>
<a name="7080"></a>

<div class="disass_comment">; 
</div>

<b>.DiamondQuotaReachedSoundSIDValues[7]</b>

<div class="disass_code"><b>7080</b>   32 2f 00 00  81 19 01
</div>
<a name="7087"></a>


<b>.InitiateDiamondQuotaReachedSound</b>

<div class="disass_code"><b>7087</b>   a9 01      LDA #$01
<b>7089</b>   85 d8      STA .DiamondQuotaReachedOrEntryBoxExplodeSoundFlag
<b>708b</b>   60         RTS 
</div>
<a name="708c"></a>

<div class="disass_comment">; 
</div>

<b>.CheckIfLevelTimeIsUp</b>

<div class="disass_code"><b>708c</b>   a5 ab      LDA .TimeLeftZBS[3]
<b>708e</b>   d0 34      BNE <a href="#70c4">$70c4</a>
<b>7090</b>   a5 ac      LDA .TimeLeftZBS[3]+1
<b>7092</b>   d0 30      BNE <a href="#70c4">$70c4</a>
<b>7094</b>   a5 ad      LDA $ad
<b>7096</b>   d0 05      BNE <a href="#709d">.TimeRunningOutFX</a>
<b>7098</b>   a9 02      LDA #$02
<b>709a</b>   85 97      STA .__UnknownZP_97
<b>709c</b>   60         RTS 
</div>
<a name="709d"></a>


<b>.TimeRunningOutFX</b>

<div class="disass_code"><b>709d</b>   ad 11 98   LDA $9811
<b>70a0</b>   d0 22      BNE <a href="#70c4">$70c4</a>
<b>70a2</b>   20 e3 7c   JSR <a href="#7ce3">.ResetVoice2</a>
<b>70a5</b>   a9 0a      LDA #$0a
<b>70a7</b>   8d 0c d4   STA .Sid_Voice2AttackDecay
<b>70aa</b>   a9 00      LDA #$00
<b>70ac</b>   8d 0d d4   STA .Sid_Voice2SustainRelease
<b>70af</b>   a9 27      LDA #$27
<b>70b1</b>   38         SEC 
<b>70b2</b>   e5 ad      SBC $ad
<b>70b4</b>   8d 08 d4   STA .Sid_Voice2FreqHi
<b>70b7</b>   a9 11      LDA #$11
<b>70b9</b>   8d 0b d4   STA .Sid_Voice2Ctrl
<b>70bc</b>   ad 0d 98   LDA .MusicTickRoutine::Voice1SustainLevel+1
<b>70bf</b>   09 80      ORA #$80
<b>70c1</b>   8d 0d 98   STA .MusicTickRoutine::Voice1SustainLevel+1
<a name="70c4"></a><b>70c4</b>   60         RTS 
</div>
<a name="70c5"></a>

<div class="disass_comment">; 
</div>

<b>.GameSecondTick</b>

<div class="disass_comment">; Subtract one from time (it'a a zero-bases string).
</div>
<div class="disass_code"><b>70c5</b>   a2 02      LDX #$02
<b>70c7</b>   18         CLC 
<a name="70c8"></a><b>70c8</b>   b5 ab      LDA .TimeLeftZBS[3],X
<b>70ca</b>   69 09      ADC #$09
<b>70cc</b>   c9 0a      CMP #$0a
<b>70ce</b>   90 02      BCC <a href="#70d2">$70d2</a>
<b>70d0</b>   e9 0a      SBC #$0a
<a name="70d2"></a><b>70d2</b>   95 ab      STA .TimeLeftZBS[3],X
<b>70d4</b>   09 10      ORA #$10
<b>70d6</b>   9d 44 98   STA .TimeLeftText[3],X
<b>70d9</b>   ca         DEX 
<b>70da</b>   10 ec      BPL <a href="#70c8">$70c8</a>
</div>


<div class="disass_comment">; 
</div>


<div class="disass_code"><b>70dc</b>   20 8c 70   JSR <a href="#708c">.CheckIfLevelTimeIsUp</a>
<b>70df</b>   60         RTS 
</div>
<a name="70e0"></a>

<div class="disass_comment">; 
</div>

<b>.OneSecondTickForAmeoba</b>

<div class="disass_code"><b>70e0</b>   20 c5 70   JSR <a href="#70c5">.GameSecondTick</a>
<b>70e3</b>   e6 af      INC .TimeCaveHasRan
<b>70e5</b>   a5 af      LDA .TimeCaveHasRan
<b>70e7</b>   cd 01 24   CMP .BufferedLevel_MagicWallMillingTimeOrAmoeba3PercentMax
<b>70ea</b>   d0 04      BNE <a href="#70f0">.OneSecondTickForAmeoba__NotFastGrowthTime</a>
<b>70ec</b>   a9 0f      LDA #$0f
<b>70ee</b>   85 9a      STA .AmoebaGrowthProbabilityMask
</div>
<a name="70f0"></a>


<b>.OneSecondTickForAmeoba__NotFastGrowthTime</b>

<div class="disass_code"><b>70f0</b>   60         RTS 
</div>
<a name="70f1"></a>


<b>.OneSecondTickForMagicWall</b>

<div class="disass_code"><b>70f1</b>   c6 95      DEC .GeneralTimeRemaining
<b>70f3</b>   d0 0f      BNE <a href="#7104">.OneSecondTickForMagicWall__StillMilling</a>
</div>



<b>.FlashingEntryBoxSecondTick__Birth</b>

<div class="disass_code"><b>70f5</b>   20 87 70   JSR <a href="#7087">.InitiateDiamondQuotaReachedSound</a>
<b>70f8</b>   a9 00      LDA #$00
<b>70fa</b>   85 93      STA .AmoebaOrMagicWallFlag__A0_M1
<b>70fc</b>   85 fb      STA .LastKeyInScanRow0_ScannedMoreThanOnce
<b>70fe</b>   85 fc      STA .LastKeyInScanRow7_ScannedMoreThanOnce
<b>7100</b>   a9 01      LDA #$01
<b>7102</b>   85 94      STA .EnableIRQTriggeredSFXAndTopLineUpdates
</div>
<a name="7104"></a>


<b>.OneSecondTickForMagicWall__StillMilling</b>

<div class="disass_code"><b>7104</b>   60         RTS 
</div>
<a name="7105"></a>

<div class="disass_comment">; 
</div>

<b>.SetTopLineToScore</b>

<div class="disass_code"><b>7105</b>   a9 3a      LDA #$3a
<b>7107</b>   85 46      STA .__Local1__
<b>7109</b>   a9 98      LDA #$98
<b>710b</b>   85 47      STA .__Local2__
<b>710d</b>   20 16 6b   JSR <a href="#6b16">.SetTopLineText</a>
<b>7110</b>   60         RTS 
</div>
<a name="7111"></a>

<div class="disass_comment">; 
</div>

<b>.HandleTick</b>

<div class="disass_code"><b>7111</b>   e6 ae      INC .SubSecondCounter
<b>7113</b>   a5 ae      LDA .SubSecondCounter
<b>7115</b>   c9 3c      CMP #$3c
<b>7117</b>   d0 13      BNE <a href="#712c">.HandleTick__Finished</a>
</div>



<b>.SubSecondTick__OneGameSecondPassed</b>

<div class="disass_code"><b>7119</b>   a9 00      LDA #$00
<b>711b</b>   85 ae      STA .SubSecondCounter
<b>711d</b>   a5 9b      LDA .UNSURE__AmoebaOrMagicWallRunningFlag
<b>711f</b>   d0 0b      BNE <a href="#712c">.HandleTick__Finished</a>
<b>7121</b>   a5 93      LDA .AmoebaOrMagicWallFlag__A0_M1
<b>7123</b>   d0 04      BNE <a href="#7129">.HandleTick__MagicWall</a>
<b>7125</b>   20 e0 70   JSR <a href="#70e0">.OneSecondTickForAmeoba</a>
<b>7128</b>   60         RTS 
</div>
<a name="7129"></a>


<b>.HandleTick__MagicWall</b>

<div class="disass_code"><b>7129</b>   20 f1 70   JSR <a href="#70f1">.OneSecondTickForMagicWall</a>
</div>
<a name="712c"></a>


<b>.HandleTick__Finished</b>

<div class="disass_code"><b>712c</b>   60         RTS 
</div>
<a name="712d"></a>

<div class="disass_comment">; 
</div>

<b>.IncrementDiamondCount</b>

<div class="disass_code"><b>712d</b>   a2 01      LDX #$01
<b>712f</b>   18         CLC 
<a name="7130"></a><b>7130</b>   8a         TXA 
<b>7131</b>   75 b0      ADC .DiamondCountDigits[2],X
<b>7133</b>   c9 0a      CMP #$0a
<b>7135</b>   90 02      BCC <a href="#7139">$7139</a>
<b>7137</b>   e9 0a      SBC #$0a
<a name="7139"></a><b>7139</b>   95 b0      STA .DiamondCountDigits[2],X
<b>713b</b>   09 10      ORA #$10
</div>


<div class="disass_comment">; Update the diamond count in CurrentPlayerInfoText.
</div>


<div class="disass_code"><b>713d</b>   9d 41 98   STA $9841,X
<b>7140</b>   ca         DEX 
<b>7141</b>   10 ed      BPL <a href="#7130">$7130</a>
<b>7143</b>   60         RTS 
</div>
<a name="7144"></a>

<div class="disass_comment">; 
</div>

<b>.DiamondQuotaDigitsToString</b>

<div class="disass_code"><b>7144</b>   a2 01      LDX #$01
<a name="7146"></a><b>7146</b>   b5 b2      LDA .DiamondQuotaDigits[2],X
<b>7148</b>   09 10      ORA #$10
<b>714a</b>   9d 3b 98   STA .DiamondQuotaString,X
<b>714d</b>   ca         DEX 
<b>714e</b>   10 f6      BPL <a href="#7146">$7146</a>
<b>7150</b>   60         RTS 
</div>
<a name="7151"></a>


<b>.ScoreIncrementToString</b>

<div class="disass_code"><b>7151</b>   a2 01      LDX #$01
<a name="7153"></a><b>7153</b>   b5 52      LDA $52,X
<b>7155</b>   09 10      ORA #$10
<b>7157</b>   9d 3e 98   STA .DiamondValueString,X
<b>715a</b>   ca         DEX 
<b>715b</b>   10 f6      BPL <a href="#7153">$7153</a>
<b>715d</b>   60         RTS 
</div>
<a name="715e"></a>

<div class="disass_comment">; 
</div>

<b>.CheckIfGotDiamondQuota</b>

<div class="disass_code"><b>715e</b>   a5 b0      LDA .DiamondCountDigits[2]
<b>7160</b>   c5 b2      CMP .DiamondQuotaDigits[2]
<b>7162</b>   d0 25      BNE <a href="#7189">.__CheckIfGotDiamondQuota__Exit</a>
<b>7164</b>   a5 b1      LDA .DiamondCountDigits[2]+1
<b>7166</b>   c5 b3      CMP .DiamondQuotaDigits[2]+1
<b>7168</b>   d0 1f      BNE <a href="#7189">.__CheckIfGotDiamondQuota__Exit</a>
</div>


<div class="disass_comment">; Quota reached.
</div>


<div class="disass_code"><b>716a</b>   a9 01      LDA #$01
<b>716c</b>   85 90      STA .LevelCompleteFlag
</div>


<div class="disass_comment">; Set score increment to the value of diamonds above the quota.
</div>


<div class="disass_code"><b>716e</b>   a2 02      LDX #$02
<a name="7170"></a><b>7170</b>   b5 b4      LDA .ExtraDiamondValue[3],X
<b>7172</b>   95 51      STA $51,X
<b>7174</b>   ca         DEX 
<b>7175</b>   10 f9      BPL <a href="#7170">$7170</a>
<b>7177</b>   20 51 71   JSR <a href="#7151">.ScoreIncrementToString</a>
</div>


<div class="disass_comment">; Display diamonds where the diamond quota used to be displayed.
</div>


<div class="disass_code"><b>717a</b>   a9 3c      LDA #$3c
<b>717c</b>   8d 3b 98   STA .DiamondQuotaString
<b>717f</b>   8d 3c 98   STA .DiamondQuotaString+1
</div>


<div class="disass_comment">; Diamond quota FX.
</div>


<div class="disass_code"><b>7182</b>   20 87 70   JSR <a href="#7087">.InitiateDiamondQuotaReachedSound</a>
<b>7185</b>   a9 06      LDA #$06
<b>7187</b>   85 a5      STA .WhiteFlashWhiteCount
</div>
<a name="7189"></a>


<b>.__CheckIfGotDiamondQuota__Exit</b>

<div class="disass_code"><b>7189</b>   60         RTS 
</div>
<a name="718a"></a>

<div class="disass_comment">; 
</div>

<b>.RockfordCollectingDiamondSIDValues</b>

<div class="disass_code"><b>718a</b>   78 14 07 00  11 00 f0
</div>
<a name="7191"></a>

<div class="disass_comment">; 
</div>

<b>.RockfordMovingToDiamond</b>

<div class="disass_code"><b>7191</b>   ee 0d 98   INC .MusicTickRoutine::Voice1SustainLevel+1
<b>7194</b>   a2 06      LDX #$06
</div>
<a name="7196"></a>


<b>.RockfordMovingToDiamond__Loop</b>

<div class="disass_code"><b>7196</b>   bd 8a 71   LDA <a href="#718a">.RockfordCollectingDiamondSIDValues</a>,X
<b>7199</b>   9d 7d 98   STA .Voice1SIDRegsBuffer[7],X
<b>719c</b>   ca         DEX 
<b>719d</b>   10 f7      BPL <a href="#7196">.RockfordMovingToDiamond__Loop</a>
<b>719f</b>   20 5d 70   JSR <a href="#705d">.IncrementScore</a>
<b>71a2</b>   20 2d 71   JSR <a href="#712d">.IncrementDiamondCount</a>
<b>71a5</b>   20 5e 71   JSR <a href="#715e">.CheckIfGotDiamondQuota</a>
<b>71a8</b>   e6 b7      INC .RockfordMoveSucceededFlag
<b>71aa</b>   60         RTS 
</div>
<a name="71ab"></a>

<div class="disass_comment">; 
</div>

<b>.RockfordTriesToMoveBoulder</b>

<div class="disass_code"><b>71ab</b>   20 d0 6a   JSR <a href="#6ad0">.TrueRandom</a>
<b>71ae</b>   29 03      AND #$03
<b>71b0</b>   d0 0a      BNE <a href="#71bc">.RockfordTriesToMoveBoulder__CantMoveIt</a>
<b>71b2</b>   e6 b7      INC .RockfordMoveSucceededFlag
<b>71b4</b>   20 56 6e   JSR <a href="#6e56">.FallingBoulderSoundFX</a>
<b>71b7</b>   a9 11      LDA #$11
<b>71b9</b>   20 b6 6c   JSR <a href="#6cb6">.SetCaveCellAndScreenToObject</a>
</div>
<a name="71bc"></a>


<b>.RockfordTriesToMoveBoulder__CantMoveIt</b>

<div class="disass_code"><b>71bc</b>   60         RTS 
</div>
<a name="71bd"></a>

<div class="disass_comment">; 
</div>

<b>.TryToMoveRockford</b>

<div class="disass_code"><b>71bd</b>   a9 00      LDA #$00
<b>71bf</b>   85 b7      STA .RockfordMoveSucceededFlag
<b>71c1</b>   b1 32      LDA (.WorldCurrentCellPtrLow),Y
<b>71c3</b>   d0 08      BNE <a href="#71cd">.TryToMoveRockford__NotSpace</a>
<b>71c5</b>   e6 b7      INC .RockfordMoveSucceededFlag
<b>71c7</b>   a9 35      LDA #$35
<b>71c9</b>   8d 08 98   STA .BackBufferVICMemControl+1
<b>71cc</b>   60         RTS 
</div>
<a name="71cd"></a>


<b>.TryToMoveRockford__NotSpace</b>

<div class="disass_code"><b>71cd</b>   c9 01      CMP #$01
<b>71cf</b>   d0 08      BNE <a href="#71d9">.TryToMoveRockford__NotDirt</a>
<b>71d1</b>   e6 b7      INC .RockfordMoveSucceededFlag
<b>71d3</b>   a9 a5      LDA #$a5
<b>71d5</b>   8d 08 98   STA .BackBufferVICMemControl+1
<b>71d8</b>   60         RTS 
</div>
<a name="71d9"></a>


<b>.TryToMoveRockford__NotDirt</b>

<div class="disass_code"><b>71d9</b>   c9 14      CMP #$14
<b>71db</b>   d0 03      BNE <a href="#71e0">.TryToMoveRockford__NotDiamond</a>
<b>71dd</b>   4c 91 71   JMP <a href="#7191">.RockfordMovingToDiamond</a>
</div>
<a name="71e0"></a>


<b>.TryToMoveRockford__NotDiamond</b>

<div class="disass_code"><b>71e0</b>   c9 05      CMP #$05
<b>71e2</b>   d0 0a      BNE <a href="#71ee">.TryToMoveRockford__NotOutbox</a>
<b>71e4</b>   a9 02      LDA #$02
<b>71e6</b>   85 97      STA .__UnknownZP_97
<b>71e8</b>   a9 01      LDA #$01
<b>71ea</b>   85 9f      STA .EnteredOutboxFlag
<b>71ec</b>   e6 b7      INC .RockfordMoveSucceededFlag
</div>
<a name="71ee"></a>


<b>.TryToMoveRockford__NotOutbox</b>

<div class="disass_code"><b>71ee</b>   c9 10      CMP #$10
<b>71f0</b>   d0 1e      BNE <a href="#7210">.TryToMoveRockford__Finished</a>
<b>71f2</b>   c0 28      CPY #$28
<b>71f4</b>   d0 0b      BNE <a href="#7201">.TryToMoveRockford__NotMovingBoulderLeft</a>
<b>71f6</b>   a0 27      LDY #$27
<b>71f8</b>   b1 32      LDA (.WorldCurrentCellPtrLow),Y
<b>71fa</b>   d0 03      BNE <a href="#71ff">.TryToMoveRockford__CantMoveBoulderLeft</a>
<b>71fc</b>   20 ab 71   JSR <a href="#71ab">.RockfordTriesToMoveBoulder</a>
</div>
<a name="71ff"></a>


<b>.TryToMoveRockford__CantMoveBoulderLeft</b>

<div class="disass_code"><b>71ff</b>   a0 28      LDY #$28
</div>
<a name="7201"></a>


<b>.TryToMoveRockford__NotMovingBoulderLeft</b>

<div class="disass_code"><b>7201</b>   c0 2a      CPY #$2a
<b>7203</b>   d0 0b      BNE <a href="#7210">.TryToMoveRockford__Finished</a>
<b>7205</b>   a0 2b      LDY #$2b
<b>7207</b>   b1 32      LDA (.WorldCurrentCellPtrLow),Y
<b>7209</b>   d0 03      BNE <a href="#720e">.TryToMoveRockford__CantMoveBoulderRight</a>
<b>720b</b>   20 ab 71   JSR <a href="#71ab">.RockfordTriesToMoveBoulder</a>
</div>
<a name="720e"></a>


<b>.TryToMoveRockford__CantMoveBoulderRight</b>

<div class="disass_code"><b>720e</b>   a0 2a      LDY #$2a
</div>
<a name="7210"></a>


<b>.TryToMoveRockford__Finished</b>

<div class="disass_code"><b>7210</b>   60         RTS 
</div>
<a name="7211"></a>


<b>.MoveRockfordIfPossible</b>

<div class="disass_code"><b>7211</b>   20 bd 71   JSR <a href="#71bd">.TryToMoveRockford</a>
<b>7214</b>   a5 b7      LDA .RockfordMoveSucceededFlag
<b>7216</b>   f0 1d      BEQ <a href="#7235">.MoveRockfordIfPossible__CantMove</a>
<b>7218</b>   20 69 6b   JSR <a href="#6b69">.ReadFireButtonCurrentPlayer</a>
<b>721b</b>   d0 0a      BNE <a href="#7227">.MoveRockfordIfPossible__FireNotPressed</a>
<b>721d</b>   a9 00      LDA #$00
<b>721f</b>   20 b6 6c   JSR <a href="#6cb6">.SetCaveCellAndScreenToObject</a>
<b>7222</b>   a9 00      LDA #$00
<b>7224</b>   85 b7      STA .RockfordMoveSucceededFlag
<b>7226</b>   60         RTS 
</div>
<a name="7227"></a>


<b>.MoveRockfordIfPossible__FireNotPressed</b>

<div class="disass_code"><b>7227</b>   a9 39      LDA #$39
<b>7229</b>   20 b6 6c   JSR <a href="#6cb6">.SetCaveCellAndScreenToObject</a>
<b>722c</b>   a0 29      LDY #$29
<b>722e</b>   a9 00      LDA #$00
<b>7230</b>   20 b6 6c   JSR <a href="#6cb6">.SetCaveCellAndScreenToObject</a>
<b>7233</b>   e6 b7      INC .RockfordMoveSucceededFlag
</div>
<a name="7235"></a>


<b>.MoveRockfordIfPossible__CantMove</b>

<div class="disass_code"><b>7235</b>   60         RTS 
</div>
<a name="7236"></a>


<b>.HandleJoystickForRockford</b>

<div class="disass_comment">; 8 4 2 1
; -------
; . . . * Up    - $e (14)
; . . * . Down  - $d (13)
; . * . . Left  - $b (11)
; * . . . Right - $7 (7)
; * . . * ur    - $6 (6)
; * . * . dr    - $5 (5)
; . * * . dl    - $9 (9)
; . * . * ul    - $a (10)
</div>
<div class="disass_code"><b>7236</b>   c9 0d      CMP #$0d
<b>7238</b>   d0 17      BNE <a href="#7251">.HandleJoystickForRockford__NotDown</a>
</div>



<b>.HandleJoystickForRockford__Down</b>

<div class="disass_code"><b>723a</b>   a5 e5      LDA .RockfordCellsFromTopOfScreen
<b>723c</b>   c9 06      CMP #$06
<b>723e</b>   d0 05      BNE <a href="#7245">$7245</a>
<b>7240</b>   a5 ee      LDA .ScrollDirectionY__$00=StillOrUp_$ff=Down
<b>7242</b>   f0 01      BEQ <a href="#7245">$7245</a>
</div>


<div class="disass_comment">; Rockford stalls here. This is a weird effect which only happens in the
; x-direction when he's moving to the right, the x-component of the scroll
; is to the left and he's at a specific x-coordinate on the screen.
</div>


<div class="disass_code"><b>7244</b>   60         RTS 
<a name="7245"></a><b>7245</b>   a0 51      LDY #$51
<b>7247</b>   20 11 72   JSR <a href="#7211">.MoveRockfordIfPossible</a>
<b>724a</b>   a5 b7      LDA .RockfordMoveSucceededFlag
<b>724c</b>   f0 02      BEQ <a href="#7250">$7250</a>
<b>724e</b>   e6 45      INC .RockfordY
<a name="7250"></a><b>7250</b>   60         RTS 
</div>
<a name="7251"></a>


<b>.HandleJoystickForRockford__NotDown</b>

<div class="disass_code"><b>7251</b>   c9 0e      CMP #$0e
<b>7253</b>   d0 0c      BNE <a href="#7261">.HandleJoystickForRockford__NotUp</a>
</div>



<b>.HandleJoystickForRockford__Up</b>

<div class="disass_code"><b>7255</b>   a0 01      LDY #$01
<b>7257</b>   20 11 72   JSR <a href="#7211">.MoveRockfordIfPossible</a>
<b>725a</b>   a5 b7      LDA .RockfordMoveSucceededFlag
<b>725c</b>   f0 02      BEQ <a href="#7260">$7260</a>
<b>725e</b>   c6 45      DEC .RockfordY
<a name="7260"></a><b>7260</b>   60         RTS 
</div>
<a name="7261"></a>


<b>.HandleJoystickForRockford__NotUp</b>

<div class="disass_code"><b>7261</b>   c9 08      CMP #$08
<b>7263</b>   b0 1b      BCS <a href="#7280">.HandleJoystickForRockford__NotRight</a>
</div>



<b>.HandleJoystickForRockford__Right</b>

<div class="disass_comment">; Right or any diagional that includes right.
</div>
<div class="disass_code"><b>7265</b>   a5 e6      LDA .RockfordCellsFromLeftOfScreen
<b>7267</b>   c9 08      CMP #$08
<b>7269</b>   d0 05      BNE <a href="#7270">$7270</a>
<b>726b</b>   a5 ea      LDA .ScrollDirectionX__$00=StillOrLeft_$ff=Right
<b>726d</b>   f0 01      BEQ <a href="#7270">$7270</a>
</div>


<div class="disass_comment">; Rockford stalls here. This is a weird effect which only happens in the
; y-direction when he's moving down, the y-component of the scroll is up
; and he's at a specific y-coordinate on the screen.
</div>


<div class="disass_code"><b>726f</b>   60         RTS 
<a name="7270"></a><b>7270</b>   a9 00      LDA #$00
<b>7272</b>   85 98      STA .RockfordDir(0Right_1Left_is_sticky)
<b>7274</b>   a0 2a      LDY #$2a
<b>7276</b>   20 11 72   JSR <a href="#7211">.MoveRockfordIfPossible</a>
<b>7279</b>   a5 b7      LDA .RockfordMoveSucceededFlag
<b>727b</b>   f0 02      BEQ <a href="#727f">$727f</a>
<b>727d</b>   e6 44      INC .RockfordX
<a name="727f"></a><b>727f</b>   60         RTS 
</div>
<a name="7280"></a>


<b>.HandleJoystickForRockford__NotRight</b>

<div class="disass_code"><b>7280</b>   c9 0c      CMP #$0c
<b>7282</b>   b0 0f      BCS <a href="#7293">.HandleJoystickForRockford__Finished</a>
</div>



<b>.HandleJoystickForRockford__Left</b>

<div class="disass_comment">; >=$8 && <$c (not $e or $d)
; Left or any diagional that includes left.
</div>
<div class="disass_code"><b>7284</b>   a9 01      LDA #$01
<b>7286</b>   85 98      STA .RockfordDir(0Right_1Left_is_sticky)
<b>7288</b>   a0 28      LDY #$28
<b>728a</b>   20 11 72   JSR <a href="#7211">.MoveRockfordIfPossible</a>
<b>728d</b>   a5 b7      LDA .RockfordMoveSucceededFlag
<b>728f</b>   f0 02      BEQ <a href="#7293">.HandleJoystickForRockford__Finished</a>
<b>7291</b>   c6 44      DEC .RockfordX
</div>
<a name="7293"></a>


<b>.HandleJoystickForRockford__Finished</b>

<div class="disass_code"><b>7293</b>   60         RTS 
</div>
<a name="7294"></a>

<div class="disass_comment">; 
</div>

<b>.ProcessRockford</b>

<div class="disass_code"><b>7294</b>   a5 a2      LDA .IsDemoMode
<b>7296</b>   f0 05      BEQ <a href="#729d">.__ProcessRockford__NotDemoMode</a>
</div>



<b>.__ProcessRockford__DemoMode</b>

<div class="disass_code"><b>7298</b>   a5 8b      LDA .JoystickStatus
<b>729a</b>   4c ad 72   JMP <a href="#72ad">.__ProcessRockford__Process</a>
</div>
<a name="729d"></a>


<b>.__ProcessRockford__NotDemoMode</b>

<div class="disass_code"><b>729d</b>   a5 a4      LDA .NumJoysticksMinusOne
<b>729f</b>   25 9d      AND .CurrentPlayer
<b>72a1</b>   f0 05      BEQ <a href="#72a8">$72a8</a>
<b>72a3</b>   20 63 6b   JSR <a href="#6b63">.ReadJoystickDirectionPort2</a>
</div>


<div class="disass_comment">; Branch always taken.
</div>


<div class="disass_code"><b>72a6</b>   d0 03      BNE <a href="#72ab">$72ab</a>
<a name="72a8"></a><b>72a8</b>   20 5d 6b   JSR <a href="#6b5d">.ReadJoystickDirectionPort1</a>
<a name="72ab"></a><b>72ab</b>   85 8b      STA .JoystickStatus
</div>
<a name="72ad"></a>


<b>.__ProcessRockford__Process</b>

<div class="disass_code"><b>72ad</b>   20 36 72   JSR <a href="#7236">.HandleJoystickForRockford</a>
<b>72b0</b>   a9 00      LDA #$00
<b>72b2</b>   85 96      STA .RockfordDeadTicks
<b>72b4</b>   4c 15 7e   JMP <a href="#7e15">.__ProcessWorld__NoObjectHandler</a>
</div>
<a name="72b7"></a>

<div class="disass_comment">; 
; These two tables are processed in one sweep by '.ProcessExplosion'.
</div>

<b>.ExplodeToSpaceObjectSequenceTable</b>

<div class="disass_code"><b>72b7</b>   1f 00 1e 1f  1d 1e 1c 1d  1b 1c
</div>



<b>.ExplodeToDiamondObjectSequenceTable</b>

<div class="disass_code"><b>72c1</b>   24 14 23 24  22 23 21 22  20 21
</div>


<div class="disass_comment">; 
</div>

<b>.PreRockfordObjectSequenceTable</b>

<div class="disass_code"><b>72cb</b>   28 38 27 28  26 27 25 26
</div>
<a name="72d3"></a>

<div class="disass_comment">; 
</div>

<b>.ProcessExplosion</b>

<div class="disass_code"><b>72d3</b>   a0 29      LDY #$29
<b>72d5</b>   b1 32      LDA (.WorldCurrentCellPtrLow),Y
<b>72d7</b>   a0 00      LDY #$00
</div>
<a name="72d9"></a>


<b>.ProcessExplosion__FindSequenceLoop</b>

<div class="disass_code"><b>72d9</b>   d9 b7 72   CMP <a href="#72b7">.ExplodeToSpaceObjectSequenceTable</a>,Y
<b>72dc</b>   d0 03      BNE <a href="#72e1">.ProcessExplosion__SequenceNotMatched</a>
<b>72de</b>   be b8 72   LDX <a href="#72b7">.ExplodeToSpaceObjectSequenceTable</a>+1,Y
</div>
<a name="72e1"></a>


<b>.ProcessExplosion__SequenceNotMatched</b>

<div class="disass_code"><b>72e1</b>   c8         INY 
<b>72e2</b>   c8         INY 
<b>72e3</b>   c0 14      CPY #$14
<b>72e5</b>   d0 f2      BNE <a href="#72d9">.ProcessExplosion__FindSequenceLoop</a>
<b>72e7</b>   8a         TXA 
<b>72e8</b>   a0 29      LDY #$29
<b>72ea</b>   20 b6 6c   JSR <a href="#6cb6">.SetCaveCellAndScreenToObject</a>
<b>72ed</b>   4c 15 7e   JMP <a href="#7e15">.__ProcessWorld__NoObjectHandler</a>
</div>
<a name="72f0"></a>


<b>.ProcessRockfordsAppearance</b>

<div class="disass_code"><b>72f0</b>   a5 95      LDA .GeneralTimeRemaining
<b>72f2</b>   d0 1a      BNE <a href="#730e">.ProcessRockfordsAppearance__Exit</a>
<b>72f4</b>   a0 29      LDY #$29
<b>72f6</b>   b1 32      LDA (.WorldCurrentCellPtrLow),Y
<b>72f8</b>   a0 00      LDY #$00
</div>
<a name="72fa"></a>


<b>.ProcessRockfordsAppearance__FindSequenceLoop</b>

<div class="disass_code"><b>72fa</b>   d9 cb 72   CMP .PreRockfordObjectSequenceTable,Y
<b>72fd</b>   d0 03      BNE <a href="#7302">.ProcessRockfordsAppearance__SequenceNotMatched</a>
<b>72ff</b>   be cc 72   LDX .PreRockfordObjectSequenceTable+1,Y
</div>
<a name="7302"></a>


<b>.ProcessRockfordsAppearance__SequenceNotMatched</b>

<div class="disass_code"><b>7302</b>   c8         INY 
<b>7303</b>   c8         INY 
<b>7304</b>   c0 08      CPY #$08
<b>7306</b>   d0 f2      BNE <a href="#72fa">.ProcessRockfordsAppearance__FindSequenceLoop</a>
<b>7308</b>   8a         TXA 
<b>7309</b>   a0 29      LDY #$29
<b>730b</b>   20 b6 6c   JSR <a href="#6cb6">.SetCaveCellAndScreenToObject</a>
</div>
<a name="730e"></a>


<b>.ProcessRockfordsAppearance__Exit</b>

<div class="disass_code"><b>730e</b>   4c 15 7e   JMP <a href="#7e15">.__ProcessWorld__NoObjectHandler</a>
</div>
<a name="7311"></a>


<b>.RenderSteelWallInExpandedLatticeHelper</b>

<div class="disass_comment">; $2e is the base character of the first steel wall.
; There'a another at $4a.
</div>
<div class="disass_code"><b>7311</b>   a9 2e      LDA #$2e
<b>7313</b>   a0 00      LDY #$00
<b>7315</b>   91 36      STA (.ExpandedLatticeOutputPtrL),Y
<b>7317</b>   18         CLC 
<b>7318</b>   69 01      ADC #$01
<b>731a</b>   c8         INY 
<b>731b</b>   91 36      STA (.ExpandedLatticeOutputPtrL),Y
<b>731d</b>   69 0f      ADC #$0f
<b>731f</b>   a0 50      LDY #$50
<b>7321</b>   91 36      STA (.ExpandedLatticeOutputPtrL),Y
<b>7323</b>   69 01      ADC #$01
<b>7325</b>   c8         INY 
<b>7326</b>   91 36      STA (.ExpandedLatticeOutputPtrL),Y
<b>7328</b>   60         RTS 
</div>
<a name="7329"></a>


<b>.RenderSteelWallInExpandedLattice</b>

<div class="disass_code"><b>7329</b>   a5 92      LDA .CaveMatrixY
<b>732b</b>   0a         ASL A
<b>732c</b>   aa         TAX 
<b>732d</b>   a5 91      LDA .CaveMatrixX
<b>732f</b>   0a         ASL A
<b>7330</b>   18         CLC 
<b>7331</b>   7d da 53   ADC .ExpandedLatticeLineAddressTable,X
<b>7334</b>   85 34      STA .ExpandedLatticeCurrentCellPtrL
<b>7336</b>   a9 00      LDA #$00
<b>7338</b>   7d db 53   ADC .ExpandedLatticeLineAddressTable+1,X
<b>733b</b>   85 35      STA .ExpandedLatticeCurrentCellPtrH
<b>733d</b>   20 9b 6c   JSR <a href="#6c9b">.SetExpandedLatticeOutputPtr</a>
<b>7340</b>   20 11 73   JSR <a href="#7311">.RenderSteelWallInExpandedLatticeHelper</a>
<b>7343</b>   60         RTS 
</div>
<a name="7344"></a>

<div class="disass_comment">; 
</div>

<b>.ProcessInAndOutBoxes</b>

<div class="disass_code"><b>7344</b>   a0 29      LDY #$29
<b>7346</b>   e6 b9      INC .FlashingEntryBoxState
<b>7348</b>   a5 b9      LDA .FlashingEntryBoxState
<b>734a</b>   29 01      AND #$01
<b>734c</b>   d0 0c      BNE <a href="#735a">.__ProcessInAndOutBoxes__Steel</a>
</div>


<div class="disass_comment">; Render cell from lattice to expanded lattice.
; Is either cell $05[E] (outbox) or $25[%] (inbox),
; both of which map to (via .BaseCharNoForObjectTable)
; a hollow box.
</div>

<b>.__ProcessInAndOutBoxes__Door</b>

<div class="disass_code"><b>734e</b>   b1 32      LDA (.WorldCurrentCellPtrLow),Y
<b>7350</b>   20 b6 6c   JSR <a href="#6cb6">.SetCaveCellAndScreenToObject</a>
</div>


<div class="disass_comment">; If it's the inbox do some extra processing to arrange
; Rockford's appearence.
</div>


<div class="disass_code"><b>7353</b>   c9 25      CMP #$25
<b>7355</b>   d0 06      BNE <a href="#735d">.__ProcessInAndOutBoxes__Exit</a>
<b>7357</b>   4c f0 72   JMP <a href="#72f0">.ProcessRockfordsAppearance</a>
</div>
<a name="735a"></a>


<b>.__ProcessInAndOutBoxes__Steel</b>

<div class="disass_code"><b>735a</b>   20 29 73   JSR <a href="#7329">.RenderSteelWallInExpandedLattice</a>
</div>
<a name="735d"></a>


<b>.__ProcessInAndOutBoxes__Exit</b>

<div class="disass_code"><b>735d</b>   4c 15 7e   JMP <a href="#7e15">.__ProcessWorld__NoObjectHandler</a>
</div>
<a name="7360"></a>

<div class="disass_comment">; 
</div>

<b>.ProcessStationaryBoulder</b>

<div class="disass_code"><b>7360</b>   a0 51      LDY #$51
<b>7362</b>   b1 32      LDA (.WorldCurrentCellPtrLow),Y
<b>7364</b>   d0 0b      BNE <a href="#7371">.ProcessStationaryBoulder__NoSpaceBelow</a>
</div>


<div class="disass_comment">; $13 = Scanned falling boulder
</div>


<div class="disass_code"><b>7366</b>   a9 13      LDA #$13
<b>7368</b>   20 b6 6c   JSR <a href="#6cb6">.SetCaveCellAndScreenToObject</a>
<b>736b</b>   20 56 6e   JSR <a href="#6e56">.FallingBoulderSoundFX</a>
<b>736e</b>   4c d7 6c   JMP <a href="#6cd7">.__ProcessWorld__ClearCurrentCell</a>
</div>
<a name="7371"></a>


<b>.ProcessStationaryBoulder__NoSpaceBelow</b>

<div class="disass_code"><b>7371</b>   a0 51      LDY #$51
<b>7373</b>   b1 32      LDA (.WorldCurrentCellPtrLow),Y
<b>7375</b>   20 65 6e   JSR <a href="#6e65">.TestIfObjectSlippery</a>
<b>7378</b>   d0 28      BNE <a href="#73a2">.ProcessStationaryBoulder__Finished</a>
<b>737a</b>   a0 50      LDY #$50
<b>737c</b>   b1 32      LDA (.WorldCurrentCellPtrLow),Y
<b>737e</b>   d0 0e      BNE <a href="#738e">.ProcessStationaryBoulder__CantFallLeft</a>
<b>7380</b>   a0 28      LDY #$28
<b>7382</b>   b1 32      LDA (.WorldCurrentCellPtrLow),Y
<b>7384</b>   d0 08      BNE <a href="#738e">.ProcessStationaryBoulder__CantFallLeft</a>
<b>7386</b>   a9 13      LDA #$13
<b>7388</b>   20 b6 6c   JSR <a href="#6cb6">.SetCaveCellAndScreenToObject</a>
<b>738b</b>   4c d7 6c   JMP <a href="#6cd7">.__ProcessWorld__ClearCurrentCell</a>
</div>
<a name="738e"></a>


<b>.ProcessStationaryBoulder__CantFallLeft</b>

<div class="disass_code"><b>738e</b>   a0 52      LDY #$52
<b>7390</b>   b1 32      LDA (.WorldCurrentCellPtrLow),Y
<b>7392</b>   d0 0e      BNE <a href="#73a2">.ProcessStationaryBoulder__Finished</a>
<b>7394</b>   a0 2a      LDY #$2a
<b>7396</b>   b1 32      LDA (.WorldCurrentCellPtrLow),Y
<b>7398</b>   d0 08      BNE <a href="#73a2">.ProcessStationaryBoulder__Finished</a>
<b>739a</b>   a9 13      LDA #$13
<b>739c</b>   20 b6 6c   JSR <a href="#6cb6">.SetCaveCellAndScreenToObject</a>
<b>739f</b>   4c d7 6c   JMP <a href="#6cd7">.__ProcessWorld__ClearCurrentCell</a>
</div>
<a name="73a2"></a>


<b>.ProcessStationaryBoulder__Finished</b>

<div class="disass_code"><b>73a2</b>   4c 15 7e   JMP <a href="#7e15">.__ProcessWorld__NoObjectHandler</a>
</div>
<a name="73a5"></a>


<b>.CreateScannedStationaryBoulder</b>

<div class="disass_code"><b>73a5</b>   a0 29      LDY #$29
<b>73a7</b>   a9 11      LDA #$11
<b>73a9</b>   20 b6 6c   JSR <a href="#6cb6">.SetCaveCellAndScreenToObject</a>
<b>73ac</b>   60         RTS 
</div>
<a name="73ad"></a>


<b>.ProcessFallingBoulder</b>

<div class="disass_code"><b>73ad</b>   a0 51      LDY #$51
<b>73af</b>   b1 32      LDA (.WorldCurrentCellPtrLow),Y
<b>73b1</b>   d0 08      BNE <a href="#73bb">.ProcessFallingBoulder__NoSpaceBelow</a>
</div>


<div class="disass_comment">; $13 = Scanned falling boulder
</div>


<div class="disass_code"><b>73b3</b>   a9 13      LDA #$13
<b>73b5</b>   20 b6 6c   JSR <a href="#6cb6">.SetCaveCellAndScreenToObject</a>
<b>73b8</b>   4c d7 6c   JMP <a href="#6cd7">.__ProcessWorld__ClearCurrentCell</a>
</div>
<a name="73bb"></a>


<b>.ProcessFallingBoulder__NoSpaceBelow</b>

<div class="disass_code"><b>73bb</b>   c9 03      CMP #$03
<b>73bd</b>   d0 21      BNE <a href="#73e0">.ProcessFallingBoulder__NoMagicWallBelow</a>
<b>73bf</b>   a5 8d      LDA .MagicWallActiveState
<b>73c1</b>   d0 04      BNE <a href="#73c7">.ProcessFallingBoulder__MagicWallAlreadyActivated</a>
<b>73c3</b>   a9 01      LDA #$01
<b>73c5</b>   85 8d      STA .MagicWallActiveState
</div>
<a name="73c7"></a>


<b>.ProcessFallingBoulder__MagicWallAlreadyActivated</b>

<div class="disass_code"><b>73c7</b>   c9 01      CMP #$01
<b>73c9</b>   d0 0b      BNE <a href="#73d6">.ProcessFallingBoulder__ClearBoulderAboveMagicWall</a>
<b>73cb</b>   a0 79      LDY #$79
<b>73cd</b>   b1 32      LDA (.WorldCurrentCellPtrLow),Y
<b>73cf</b>   d0 05      BNE <a href="#73d6">.ProcessFallingBoulder__ClearBoulderAboveMagicWall</a>
</div>


<div class="disass_comment">; $17 = Scanned falling diamond
</div>


<div class="disass_code"><b>73d1</b>   a9 17      LDA #$17
<b>73d3</b>   20 b6 6c   JSR <a href="#6cb6">.SetCaveCellAndScreenToObject</a>
</div>
<a name="73d6"></a>


<b>.ProcessFallingBoulder__ClearBoulderAboveMagicWall</b>

<div class="disass_code"><b>73d6</b>   a9 00      LDA #$00
<b>73d8</b>   a0 29      LDY #$29
<b>73da</b>   20 b6 6c   JSR <a href="#6cb6">.SetCaveCellAndScreenToObject</a>
</div>


<div class="disass_comment">; NOTE: When a diamond is consumed my a magic wall the current scan is aborted.
</div>


<div class="disass_code"><b>73dd</b>   4c 28 6e   JMP <a href="#6e28">.FallingDiamondSoundFX</a>
</div>
<a name="73e0"></a>


<b>.ProcessFallingBoulder__NoMagicWallBelow</b>

<div class="disass_code"><b>73e0</b>   20 56 6e   JSR <a href="#6e56">.FallingBoulderSoundFX</a>
<b>73e3</b>   a0 51      LDY #$51
<b>73e5</b>   b1 32      LDA (.WorldCurrentCellPtrLow),Y
<b>73e7</b>   20 65 6e   JSR <a href="#6e65">.TestIfObjectSlippery</a>
<b>73ea</b>   d0 2e      BNE <a href="#741a">.ProcessFallingBoulder__NotSlipperyHit</a>
<b>73ec</b>   a0 50      LDY #$50
<b>73ee</b>   b1 32      LDA (.WorldCurrentCellPtrLow),Y
<b>73f0</b>   d0 0e      BNE <a href="#7400">.ProcessFallingBoulder__CantFallLeft</a>
<b>73f2</b>   a0 28      LDY #$28
<b>73f4</b>   b1 32      LDA (.WorldCurrentCellPtrLow),Y
<b>73f6</b>   d0 08      BNE <a href="#7400">.ProcessFallingBoulder__CantFallLeft</a>
<b>73f8</b>   a9 13      LDA #$13
<b>73fa</b>   20 b6 6c   JSR <a href="#6cb6">.SetCaveCellAndScreenToObject</a>
<b>73fd</b>   4c d7 6c   JMP <a href="#6cd7">.__ProcessWorld__ClearCurrentCell</a>
</div>
<a name="7400"></a>


<b>.ProcessFallingBoulder__CantFallLeft</b>

<div class="disass_code"><b>7400</b>   a0 52      LDY #$52
<b>7402</b>   b1 32      LDA (.WorldCurrentCellPtrLow),Y
<b>7404</b>   d0 0e      BNE <a href="#7414">.ProcessFallingBoulder__CantFallRight</a>
<b>7406</b>   a0 2a      LDY #$2a
<b>7408</b>   b1 32      LDA (.WorldCurrentCellPtrLow),Y
<b>740a</b>   d0 08      BNE <a href="#7414">.ProcessFallingBoulder__CantFallRight</a>
<b>740c</b>   a9 13      LDA #$13
<b>740e</b>   20 b6 6c   JSR <a href="#6cb6">.SetCaveCellAndScreenToObject</a>
<b>7411</b>   4c d7 6c   JMP <a href="#6cd7">.__ProcessWorld__ClearCurrentCell</a>
</div>
<a name="7414"></a>


<b>.ProcessFallingBoulder__CantFallRight</b>

<div class="disass_code"><b>7414</b>   20 a5 73   JSR <a href="#73a5">.CreateScannedStationaryBoulder</a>
<b>7417</b>   4c 15 7e   JMP <a href="#7e15">.__ProcessWorld__NoObjectHandler</a>
</div>
<a name="741a"></a>


<b>.ProcessFallingBoulder__NotSlipperyHit</b>

<div class="disass_code"><b>741a</b>   c9 38      CMP #$38
<b>741c</b>   d0 0a      BNE <a href="#7428">.ProcessFallingBoulder__DidntHitRockford</a>
<b>741e</b>   a9 1c      LDA #$1c
<b>7420</b>   85 89      STA .ObjectTypeForUpdateCaveCell
<b>7422</b>   20 22 6d   JSR <a href="#6d22">.Explode3x3CellsDownOneRow</a>
<b>7425</b>   4c 15 7e   JMP <a href="#7e15">.__ProcessWorld__NoObjectHandler</a>
</div>
<a name="7428"></a>


<b>.ProcessFallingBoulder__DidntHitRockford</b>

<div class="disass_code"><b>7428</b>   20 7c 6e   JSR <a href="#6e7c">.CheckIfFallingObjectKillsAnimal</a>
<b>742b</b>   d0 06      BNE <a href="#7433">.ProcessFallingBoulder__DidntHitAnimal</a>
<b>742d</b>   20 22 6d   JSR <a href="#6d22">.Explode3x3CellsDownOneRow</a>
<b>7430</b>   4c 15 7e   JMP <a href="#7e15">.__ProcessWorld__NoObjectHandler</a>
</div>
<a name="7433"></a>


<b>.ProcessFallingBoulder__DidntHitAnimal</b>

<div class="disass_code"><b>7433</b>   20 a5 73   JSR <a href="#73a5">.CreateScannedStationaryBoulder</a>
<b>7436</b>   4c 15 7e   JMP <a href="#7e15">.__ProcessWorld__NoObjectHandler</a>
</div>
<a name="7439"></a>


<b>.BlankLines0and4ofSpaceChars</b>

<div class="disass_code"><b>7439</b>   a9 00      LDA #$00
<b>743b</b>   8d 00 33   STA .CopiedGameCharDataBlock3
<b>743e</b>   8d 04 33   STA $3304
<b>7441</b>   8d 08 33   STA $3308
<b>7444</b>   8d 0c 33   STA $330c
<b>7447</b>   8d 80 33   STA $3380
<b>744a</b>   8d 84 33   STA $3384
<b>744d</b>   8d 88 33   STA $3388
<b>7450</b>   8d 8c 33   STA $338c
<b>7453</b>   60         RTS 
</div>
<a name="7454"></a>

<div class="disass_comment">; 
</div>

<b>.ExtraLifeFX</b>

<div class="disass_code"><b>7454</b>   a5 a8      LDA .ExtraLifeFXCounter
<b>7456</b>   c9 01      CMP #$01
<b>7458</b>   d0 06      BNE <a href="#7460">.__ExtraLifeFX__DoFX__</a>
<b>745a</b>   20 39 74   JSR <a href="#7439">.BlankLines0and4ofSpaceChars</a>
<b>745d</b>   c6 a8      DEC .ExtraLifeFXCounter
<b>745f</b>   60         RTS 
</div>
<a name="7460"></a>

<div class="disass_comment">; 
</div>

<b>.__ExtraLifeFX__DoFX__</b>

<div class="disass_code"><b>7460</b>   20 d0 6a   JSR <a href="#6ad0">.TrueRandom</a>
<b>7463</b>   8d 00 33   STA .CopiedGameCharDataBlock3
<b>7466</b>   8d 0c 33   STA $330c
<b>7469</b>   20 d0 6a   JSR <a href="#6ad0">.TrueRandom</a>
<b>746c</b>   8d 84 33   STA $3384
<b>746f</b>   8d 88 33   STA $3388
<b>7472</b>   20 d0 6a   JSR <a href="#6ad0">.TrueRandom</a>
<b>7475</b>   8d 04 33   STA $3304
<b>7478</b>   8d 08 33   STA $3308
<b>747b</b>   20 d0 6a   JSR <a href="#6ad0">.TrueRandom</a>
<b>747e</b>   8d 80 33   STA $3380
<b>7481</b>   8d 8c 33   STA $338c
<b>7484</b>   c6 a8      DEC .ExtraLifeFXCounter
<b>7486</b>   60         RTS 
</div>
<a name="7487"></a>

<div class="disass_comment">; 
</div>

<b>.AnimateTitleScreenBkgndChar</b>

<div class="disass_code"><b>7487</b>   ac 00 20   LDY .CopiedTitleCharDataBlock0
<b>748a</b>   a2 00      LDX #$00
</div>
<a name="748c"></a>


<b>._AnimateBkgndLoop</b>

<div class="disass_code"><b>748c</b>   bd 01 20   LDA .CopiedTitleCharDataBlock0+1,X
<b>748f</b>   9d 00 20   STA .CopiedTitleCharDataBlock0,X
<b>7492</b>   e8         INX 
<b>7493</b>   e0 07      CPX #$07
<b>7495</b>   d0 f5      BNE <a href="#748c">._AnimateBkgndLoop</a>
<b>7497</b>   8c 07 20   STY $2007
<b>749a</b>   60         RTS 
</div>
<a name="749b"></a>

<div class="disass_comment">; 
</div>

<b>.YScrollTable</b>

<div class="disass_code"><b>749b</b>   03 c0 ff 07  00 00 08 00  00 0c 40 00
</div>



<b>.XScrollTable</b>

<div class="disass_code"><b>74a7</b>   03 c0 ff 09  00 00 0a 00  00 10 40 00
</div>
<a name="74b3"></a>

<div class="disass_comment">; 
</div>

<b>.CalcScrollOffsets_XIfNeeded_YIfNeeded</b>

<div class="disass_code"><b>74b3</b>   a5 e1      LDA .XScrollTableIndex
<b>74b5</b>   d0 0e      BNE <a href="#74c5">$74c5</a>
<b>74b7</b>   a5 e2      LDA .XCoarseScrollDirFlag
<b>74b9</b>   d0 0a      BNE <a href="#74c5">$74c5</a>
</div>
<a name="74bb"></a>

<div class="disass_comment">; 
</div>

<b>.CalcXScrollOffsets_X_YIfNeeded</b>

<div class="disass_code"><b>74bb</b>   a5 e8      LDA .ScreenLeft
<b>74bd</b>   4a         LSR A
<b>74be</b>   49 ff      EOR #$ff
<b>74c0</b>   38         SEC 
<b>74c1</b>   65 44      ADC .RockfordX
</div>


<div class="disass_comment">; These instructions produce the same result as:
; 1. LDA .ScreenLeft
; 2. LSR A
; 3. EOR #$ff
; 5. CLC
; 6. ADC #$01
; 7. CLC
; 8. ADC .unsure_RockfordX
; Steps 1-2 : A = .ScreenLeft/2 (convert from chars to cells)
; Steps 3-6 : A = -A
; Steps 7-8 : A = A + .RockfordX
; So : A = .RockfordX - .ScreenLeft/2
; 
</div>


<div class="disass_code"><b>74c3</b>   85 e6      STA .RockfordCellsFromLeftOfScreen
</div>
<a name="74c5"></a>

<div class="disass_comment">; 
</div>


<div class="disass_code"><b>74c5</b>   a5 e3      LDA .YScrollTableIndex
<b>74c7</b>   d0 0e      BNE <a href="#74d7">$74d7</a>
<b>74c9</b>   a5 e4      LDA .YCoarseScrollDirFlag
<b>74cb</b>   d0 0a      BNE <a href="#74d7">$74d7</a>
</div>
<a name="74cd"></a>

<div class="disass_comment">; 
</div>

<b>.CalcYScrollOffsets_Y</b>

<div class="disass_code"><b>74cd</b>   a5 ec      LDA .ScreenTop
<b>74cf</b>   4a         LSR A
<b>74d0</b>   49 ff      EOR #$ff
<b>74d2</b>   38         SEC 
<b>74d3</b>   65 45      ADC .RockfordY
<b>74d5</b>   85 e5      STA .RockfordCellsFromTopOfScreen
<a name="74d7"></a><b>74d7</b>   60         RTS 
</div>
<a name="74d8"></a>

<div class="disass_comment">; 
</div>

<b>.XScrollVicCtl2Table[4]</b>

<div class="disass_code"><b>74d8</b>   15 13 11 17
</div>



<b>.YScrollVicCtl1Table[4]</b>

<div class="disass_comment">; Higher indices scroll up (Rockford moving down).
</div>
<div class="disass_code"><b>74dc</b>   17 15 13 11
</div>
<a name="74e0"></a>

<div class="disass_comment">; 
</div>

<b>.ScheduleYScroll</b>

<div class="disass_code"><b>74e0</b>   a5 e3      LDA .YScrollTableIndex
<b>74e2</b>   d0 11      BNE <a href="#74f5">.__ScheduleYScroll__ContinueScroll</a>
<b>74e4</b>   a5 e4      LDA .YCoarseScrollDirFlag
<b>74e6</b>   d0 0d      BNE <a href="#74f5">.__ScheduleYScroll__ContinueScroll</a>
<b>74e8</b>   a5 c2      LDA .AnotherFrameCounter
<b>74ea</b>   29 01      AND #$01
<b>74ec</b>   f0 01      BEQ <a href="#74ef">.__ScheduleYScroll__StartScroll</a>
<b>74ee</b>   60         RTS 
</div>
<a name="74ef"></a>


<b>.__ScheduleYScroll__StartScroll</b>

<div class="disass_comment">;  We only start a scroll if .AnotherFrameCounter is even.
; This is important to keep the scrolling logic in sync with the rest of the IRQ handler.
; (IRQ handler flips buffers on even frames and copies the visible section of the expand
; lattice the the back buffer on odd frames.)
; 
; .FineScrollDirY: $40 up, $c0 down.
</div>
<div class="disass_code"><b>74ef</b>   a5 ed      LDA .FineScrollDirY
<b>74f1</b>   c9 c0      CMP #$c0
<b>74f3</b>   f0 4d      BEQ <a href="#7542">.__ScheduleYScroll__DownOneChar</a>
</div>
<a name="74f5"></a>


<b>.__ScheduleYScroll__ContinueScroll</b>

<div class="disass_code"><b>74f5</b>   a5 eb      LDA .FineScrollY
<b>74f7</b>   18         CLC 
<b>74f8</b>   65 ed      ADC .FineScrollDirY
<b>74fa</b>   85 eb      STA .FineScrollY
</div>


<div class="disass_comment">; // THE C FLAG IS ALL-IMPORTANT HERE!
</div>


<div class="disass_code"><b>74fc</b>   a5 ec      LDA .ScreenTop
<b>74fe</b>   65 ee      ADC .ScrollDirectionY__$00=StillOrUp_$ff=Down
<b>7500</b>   85 ec      STA .ScreenTop
<b>7502</b>   a5 eb      LDA .FineScrollY
<b>7504</b>   18         CLC 
<b>7505</b>   2a         ROL A
<b>7506</b>   2a         ROL A
<b>7507</b>   2a         ROL A
<b>7508</b>   2a         ROL A
<b>7509</b>   29 07      AND #$07
<b>750b</b>   4a         LSR A
<b>750c</b>   85 e3      STA .YScrollTableIndex
<b>750e</b>   aa         TAX 
<b>750f</b>   bd dc 74   LDA .YScrollVicCtl1Table[4],X
</div>


<div class="disass_comment">; It is important to realise that this is the $d011 setting for the NEXT frame.
; $d011 has already been set from .RastInt_vic_control1 earlier in the handler.
</div>


<div class="disass_code"><b>7512</b>   85 54      STA .RastInt_vic_control1[]
<b>7514</b>   a5 e3      LDA .YScrollTableIndex
<b>7516</b>   c9 01      CMP #$01
</div>


<div class="disass_comment">; "Why compare to 1?", you ask:
; ============================================================================================
; 
; Let's assume we've just initiated a scroll.
; n is always even since scrolling only starts on even frames.
; 
; Frame n+0 (this frame):
; -----------------------
; 1) .RastInt_vic_control1 = .YScrollVicCtl1Table[1] ($15)
; This setting takes effect in the next frame.
; The previous setting was .YScrollVicCtl1Table[0] ($17), the resting state when not scrolling.
; 
; 2) We change .ExpandedLatticeSubsetPtrH & ExpandedLatticeSubsetPtrL.
; Since the expanded lattice is copied to the back buffer on odd frames and it then has to be
; flipped to the front, which happens in even frames, this change will not be seen for a bit.
; This is why we do it at what seems like a strange fine scroll value (not an extreme).
; 
; 3). Our caller flips the buffers (since we're an even frame).
; 
; Frame n+1:
; ----------
; The $d011 value set during in frame n+0 ($15) is now in effect.
; 
; 1) .RastInt_vic_control1 = .YScrollVicCtl1Table[2] ($13)
; 
; 2) Our caller copies the expanded lattice to the back buffer.
; The back buffer now reflects the changes made in frame n+0 step 2.
; It is not visible yet however as it has to be flipped to the front.
; 
; Frame n+2:
; ----------
; The $d011 value set during in frame n+1 ($13) is now in effect.
; We have looped! That means we need a coarse scroll.
; The sequence is 4, 5, 6, 7, 0, 1, 2, 3 because of bad line strangeness
; due to the screen splitting. Boulder Dash only uses 5, 7, 1, 3.
; 
; 1) .RastInt_vic_control1 = .YScrollVicCtl1Table[3] ($11)
; 
; 2) Our caller flips the buffers. The changes made in frame n+0 step 2 are now visible,
; just when we need them!
</div>


<div class="disass_code"><b>7518</b>   d0 11      BNE <a href="#752b">$752b</a>
<b>751a</b>   a5 e4      LDA .YCoarseScrollDirFlag
<b>751c</b>   d0 0d      BNE <a href="#752b">$752b</a>
</div>



<b>.__ScheduleYScroll__UpOneChar</b>

<div class="disass_comment">; Stuff on screen moves up, Rockford moving down.
</div>
<div class="disass_code"><b>751e</b>   a5 d6      LDA .ExpandedLatticeSubsetPtrL
<b>7520</b>   18         CLC 
<b>7521</b>   69 50      ADC #$50
<b>7523</b>   85 d6      STA .ExpandedLatticeSubsetPtrL
<b>7525</b>   a5 d7      LDA .ExpandedLatticeSubsetPtrH
<b>7527</b>   69 00      ADC #$00
<b>7529</b>   85 d7      STA .ExpandedLatticeSubsetPtrH
<a name="752b"></a><b>752b</b>   a5 e3      LDA .YScrollTableIndex
<b>752d</b>   d0 25      BNE <a href="#7554">$7554</a>
<b>752f</b>   a5 e4      LDA .YCoarseScrollDirFlag
<b>7531</b>   c9 01      CMP #$01
<b>7533</b>   d0 1f      BNE <a href="#7554">$7554</a>
<b>7535</b>   20 cd 74   JSR <a href="#74cd">.CalcYScrollOffsets_Y</a>
<b>7538</b>   a5 ec      LDA .ScreenTop
<b>753a</b>   f0 18      BEQ <a href="#7554">$7554</a>
<b>753c</b>   a5 e5      LDA .RockfordCellsFromTopOfScreen
<b>753e</b>   c9 07      CMP #$07
<b>7540</b>   f0 12      BEQ <a href="#7554">$7554</a>
</div>
<a name="7542"></a>


<b>.__ScheduleYScroll__DownOneChar</b>

<div class="disass_comment">; Stuff on screen moves down, Rockford moving up.
; 
; Things are slightly different when scrolling down (Rockford going up). We start scrolling on an
; even frame and under these conditions, as explained above. The fine scroll changes take one frame
; to reach the screen and the coarse scroll changes take two frames. The $d011 scroll settings to
; scroll up are 5, 7, 1 & 3, we rest on 7. Since the coarse scroll path is two frames we schedule a
; coarse scroll this frame but hold off scheduling a fine scroll till the next frame (which takes
; only one frame). This means it takes two frames to initiate an upward scroll whereas scrolling
; down takes one.
</div>
<div class="disass_code"><b>7542</b>   a5 d6      LDA .ExpandedLatticeSubsetPtrL
<b>7544</b>   38         SEC 
<b>7545</b>   e9 50      SBC #$50
<b>7547</b>   85 d6      STA .ExpandedLatticeSubsetPtrL
<b>7549</b>   a5 d7      LDA .ExpandedLatticeSubsetPtrH
<b>754b</b>   e9 00      SBC #$00
<b>754d</b>   85 d7      STA .ExpandedLatticeSubsetPtrH
<b>754f</b>   a9 03      LDA #$03
<b>7551</b>   85 e4      STA .YCoarseScrollDirFlag
<b>7553</b>   60         RTS 
<a name="7554"></a><b>7554</b>   a5 e3      LDA .YScrollTableIndex
<b>7556</b>   85 e4      STA .YCoarseScrollDirFlag
<b>7558</b>   60         RTS 
</div>
<a name="7559"></a>

<div class="disass_comment">; 
</div>

<b>.ScheduleXScroll</b>

<div class="disass_code"><b>7559</b>   a5 e1      LDA .XScrollTableIndex
<b>755b</b>   d0 11      BNE <a href="#756e">$756e</a>
<b>755d</b>   a5 e2      LDA .XCoarseScrollDirFlag
<b>755f</b>   d0 0d      BNE <a href="#756e">$756e</a>
<b>7561</b>   a5 c2      LDA .AnotherFrameCounter
<b>7563</b>   29 01      AND #$01
<b>7565</b>   f0 01      BEQ <a href="#7568">$7568</a>
<b>7567</b>   60         RTS 
<a name="7568"></a><b>7568</b>   a5 e9      LDA .FineScrollDirX
<b>756a</b>   c9 c0      CMP #$c0
<b>756c</b>   f0 50      BEQ <a href="#75be">$75be</a>
<a name="756e"></a><b>756e</b>   a5 e7      LDA .FineScrollX
<b>7570</b>   18         CLC 
<b>7571</b>   65 e9      ADC .FineScrollDirX
<b>7573</b>   85 e7      STA .FineScrollX
<b>7575</b>   a5 e8      LDA .ScreenLeft
<b>7577</b>   65 ea      ADC .ScrollDirectionX__$00=StillOrLeft_$ff=Right
<b>7579</b>   85 e8      STA .ScreenLeft
<b>757b</b>   a5 e7      LDA .FineScrollX
<b>757d</b>   18         CLC 
<b>757e</b>   2a         ROL A
<b>757f</b>   2a         ROL A
<b>7580</b>   2a         ROL A
<b>7581</b>   29 03      AND #$03
<b>7583</b>   85 e1      STA .XScrollTableIndex
<b>7585</b>   aa         TAX 
<b>7586</b>   bd d8 74   LDA <a href="#74d8">.XScrollVicCtl2Table[4]</a>,X
<b>7589</b>   a6 95      LDX .GeneralTimeRemaining
<b>758b</b>   d0 08      BNE <a href="#7595">$7595</a>
<b>758d</b>   a6 5d      LDX .Cave
<b>758f</b>   e0 11      CPX #$11
<b>7591</b>   90 02      BCC <a href="#7595">$7595</a>
<b>7593</b>   09 08      ORA #$08
<a name="7595"></a><b>7595</b>   85 56      STA .RastInt_vic_control2[]
<b>7597</b>   a5 e1      LDA .XScrollTableIndex
<b>7599</b>   c9 01      CMP #$01
<b>759b</b>   d0 0a      BNE <a href="#75a7">$75a7</a>
<b>759d</b>   a5 e2      LDA .XCoarseScrollDirFlag
<b>759f</b>   d0 06      BNE <a href="#75a7">$75a7</a>
<b>75a1</b>   e6 d6      INC .ExpandedLatticeSubsetPtrL
<b>75a3</b>   d0 02      BNE <a href="#75a7">$75a7</a>
<b>75a5</b>   e6 d7      INC .ExpandedLatticeSubsetPtrH
<a name="75a7"></a><b>75a7</b>   a5 e1      LDA .XScrollTableIndex
<b>75a9</b>   d0 25      BNE <a href="#75d0">$75d0</a>
<b>75ab</b>   a5 e2      LDA .XCoarseScrollDirFlag
<b>75ad</b>   c9 01      CMP #$01
<b>75af</b>   d0 1f      BNE <a href="#75d0">$75d0</a>
<b>75b1</b>   20 bb 74   JSR <a href="#74bb">.CalcXScrollOffsets_X_YIfNeeded</a>
<b>75b4</b>   a5 e8      LDA .ScreenLeft
<b>75b6</b>   f0 18      BEQ <a href="#75d0">$75d0</a>
<b>75b8</b>   a5 e6      LDA .RockfordCellsFromLeftOfScreen
<b>75ba</b>   c9 09      CMP #$09
<b>75bc</b>   f0 12      BEQ <a href="#75d0">$75d0</a>
<a name="75be"></a><b>75be</b>   a5 d6      LDA .ExpandedLatticeSubsetPtrL
<b>75c0</b>   38         SEC 
<b>75c1</b>   e9 01      SBC #$01
<b>75c3</b>   85 d6      STA .ExpandedLatticeSubsetPtrL
<b>75c5</b>   a5 d7      LDA .ExpandedLatticeSubsetPtrH
<b>75c7</b>   e9 00      SBC #$00
<b>75c9</b>   85 d7      STA .ExpandedLatticeSubsetPtrH
<b>75cb</b>   a9 03      LDA #$03
<b>75cd</b>   85 e2      STA .XCoarseScrollDirFlag
<b>75cf</b>   60         RTS 
<a name="75d0"></a><b>75d0</b>   a5 e1      LDA .XScrollTableIndex
<b>75d2</b>   85 e2      STA .XCoarseScrollDirFlag
<b>75d4</b>   60         RTS 
</div>
<a name="75d5"></a>

<div class="disass_comment">; 
</div>

<b>.StopScrollingAtEdges</b>

<div class="disass_code"><b>75d5</b>   a2 00      LDX #$00
</div>



<b>.__StopScrollingAtEdges__ClipYDir</b>

<div class="disass_comment">; We only stop the scroll if we've fine scrolled right up to the edge.
</div>
<div class="disass_code"><b>75d7</b>   a5 eb      LDA .FineScrollY
<b>75d9</b>   d0 18      BNE <a href="#75f3">.__StopScrollingAtEdges__ClipXDir</a>
<b>75db</b>   a5 ec      LDA .ScreenTop
<b>75dd</b>   d0 08      BNE <a href="#75e7">.__StopScrollingAtEdges__NotScrolledFullyDown</a>
</div>



<b>.__StopScrollingAtEdges__ScrolledFullyUp</b>

<div class="disass_code"><b>75df</b>   a4 ee      LDY .ScrollDirectionY__$00=StillOrUp_$ff=Down
<b>75e1</b>   f0 04      BEQ <a href="#75e7">.__StopScrollingAtEdges__NotScrolledFullyDown</a>
</div>



<b>.__StopScrollingAtEdges__DirUp</b>

<div class="disass_comment">; Stop the Y-scroll.
</div>
<div class="disass_code"><b>75e3</b>   86 ed      STX .FineScrollDirY
<b>75e5</b>   86 ee      STX .ScrollDirectionY__$00=StillOrUp_$ff=Down
</div>
<a name="75e7"></a>


<b>.__StopScrollingAtEdges__NotScrolledFullyDown</b>

<div class="disass_code"><b>75e7</b>   c9 15      CMP #$15
<b>75e9</b>   d0 08      BNE <a href="#75f3">.__StopScrollingAtEdges__ClipXDir</a>
</div>



<b>.__StopScrollingAtEdges__ScrolledFullyUp</b>

<div class="disass_code"><b>75eb</b>   a4 ee      LDY .ScrollDirectionY__$00=StillOrUp_$ff=Down
<b>75ed</b>   d0 04      BNE <a href="#75f3">.__StopScrollingAtEdges__ClipXDir</a>
</div>



<b>.__StopScrollingAtEdges__DirUp</b>

<div class="disass_comment">; Stop the Y-scroll.
</div>
<div class="disass_code"><b>75ef</b>   86 ed      STX .FineScrollDirY
<b>75f1</b>   86 ee      STX .ScrollDirectionY__$00=StillOrUp_$ff=Down
</div>
<a name="75f3"></a>

<div class="disass_comment">; 
</div>

<b>.__StopScrollingAtEdges__ClipXDir</b>

<div class="disass_comment">; We only stop the scroll if we've fine scrolled right up to the edge.
</div>
<div class="disass_code"><b>75f3</b>   a5 e7      LDA .FineScrollX
<b>75f5</b>   d0 18      BNE <a href="#760f">.__StopScrollingAtEdges__Exit</a>
<b>75f7</b>   a5 e8      LDA .ScreenLeft
<b>75f9</b>   d0 08      BNE <a href="#7603">$7603</a>
</div>



<b>.__StopScrollingAtEdges__ScrolledFullyRight</b>

<div class="disass_code"><b>75fb</b>   a4 ea      LDY .ScrollDirectionX__$00=StillOrLeft_$ff=Right
<b>75fd</b>   f0 04      BEQ <a href="#7603">$7603</a>
</div>



<b>.__StopScrollingAtEdges__DirLeft</b>

<div class="disass_comment">; Stop the X-scroll.
</div>
<div class="disass_code"><b>75ff</b>   86 e9      STX .FineScrollDirX
<b>7601</b>   86 ea      STX .ScrollDirectionX__$00=StillOrLeft_$ff=Right
</div>
<a name="7603"></a>

<div class="disass_comment">; 
</div>


<div class="disass_code"><b>7603</b>   c9 2a      CMP #$2a
<b>7605</b>   d0 08      BNE <a href="#760f">.__StopScrollingAtEdges__Exit</a>
</div>



<b>.__StopScrollingAtEdges__ScrolledFullyLeft</b>

<div class="disass_code"><b>7607</b>   a4 ea      LDY .ScrollDirectionX__$00=StillOrLeft_$ff=Right
<b>7609</b>   d0 04      BNE <a href="#760f">.__StopScrollingAtEdges__Exit</a>
</div>



<b>.__StopScrollingAtEdges__DirRight</b>

<div class="disass_comment">; Stop the X-scroll.
</div>
<div class="disass_code"><b>760b</b>   86 e9      STX .FineScrollDirX
<b>760d</b>   86 ea      STX .ScrollDirectionX__$00=StillOrLeft_$ff=Right
</div>
<a name="760f"></a>

<div class="disass_comment">; 
</div>

<b>.__StopScrollingAtEdges__Exit</b>

<div class="disass_code"><b>760f</b>   60         RTS 
</div>
<a name="7610"></a>

<div class="disass_comment">; 
</div>

<b>.ChooseYScrollDirection</b>

<div class="disass_code"><b>7610</b>   a5 e5      LDA .RockfordCellsFromTopOfScreen
<b>7612</b>   c9 0b      CMP #$0b
<b>7614</b>   30 08      BMI <a href="#761e">$761e</a>
</div>


<div class="disass_comment">; Scroll down if Rockford is >=11 cells from top.
</div>

<b>.__ChooseYScrollDirection__Up</b>

<div class="disass_code"><b>7616</b>   a9 40      LDA #$40
<b>7618</b>   85 ed      STA .FineScrollDirY
<b>761a</b>   a9 00      LDA #$00
<b>761c</b>   85 ee      STA .ScrollDirectionY__$00=StillOrUp_$ff=Down
<a name="761e"></a><b>761e</b>   a5 e5      LDA .RockfordCellsFromTopOfScreen
<b>7620</b>   c9 05      CMP #$05
<b>7622</b>   10 08      BPL <a href="#762c">$762c</a>
</div>


<div class="disass_comment">; Scroll up if Rockford is <5 cells from top.
</div>

<b>.__ChooseYScrollDirection__Down</b>

<div class="disass_code"><b>7624</b>   a9 c0      LDA #$c0
<b>7626</b>   85 ed      STA .FineScrollDirY
<b>7628</b>   a9 ff      LDA #$ff
<b>762a</b>   85 ee      STA .ScrollDirectionY__$00=StillOrUp_$ff=Down
<a name="762c"></a><b>762c</b>   60         RTS 
</div>
<a name="762d"></a>


<b>.ChooseXScrollDirection</b>

<div class="disass_code"><b>762d</b>   a5 e6      LDA .RockfordCellsFromLeftOfScreen
<b>762f</b>   c9 11      CMP #$11
<b>7631</b>   30 08      BMI <a href="#763b">$763b</a>
</div>


<div class="disass_comment">; Scroll right if Rockford >=17 cells from left.
</div>

<b>.__ChooseXScrollDirection__Left</b>

<div class="disass_code"><b>7633</b>   a9 40      LDA #$40
<b>7635</b>   85 e9      STA .FineScrollDirX
<b>7637</b>   a9 00      LDA #$00
<b>7639</b>   85 ea      STA .ScrollDirectionX__$00=StillOrLeft_$ff=Right
<a name="763b"></a><b>763b</b>   a5 e6      LDA .RockfordCellsFromLeftOfScreen
<b>763d</b>   c9 03      CMP #$03
<b>763f</b>   10 08      BPL <a href="#7649">$7649</a>
</div>


<div class="disass_comment">; Scroll left if Rockford <3 cells from left.
</div>

<b>.__ChooseXScrollDirection__Right</b>

<div class="disass_code"><b>7641</b>   a9 c0      LDA #$c0
<b>7643</b>   85 e9      STA .FineScrollDirX
<b>7645</b>   a9 ff      LDA #$ff
<b>7647</b>   85 ea      STA .ScrollDirectionX__$00=StillOrLeft_$ff=Right
<a name="7649"></a><b>7649</b>   60         RTS 
</div>
<a name="764a"></a>


<b>.ChooseScrollDirection</b>

<div class="disass_code"><b>764a</b>   a0 09      LDY #$09
<b>764c</b>   a2 04      LDX #$04
</div>
<a name="764e"></a>


<b>.__ChooseScrollDirection__YLoop</b>

<div class="disass_code"><b>764e</b>   a5 e5      LDA .RockfordCellsFromTopOfScreen
<b>7650</b>   d9 9b 74   CMP <a href="#749b">.YScrollTable</a>,Y
<b>7653</b>   d0 0a      BNE <a href="#765f">.__ChooseScrollDirection__YNoMatch</a>
</div>
<a name="7655"></a>


<b>.__ChooseScrollDirection__YMatch</b>

<div class="disass_code"><b>7655</b>   b9 9c 74   LDA <a href="#749b">.YScrollTable</a>+1,Y
<b>7658</b>   85 ed      STA .FineScrollDirY
<b>765a</b>   b9 9d 74   LDA $749d,Y
<b>765d</b>   85 ee      STA .ScrollDirectionY__$00=StillOrUp_$ff=Down
</div>
<a name="765f"></a>


<b>.__ChooseScrollDirection__YNoMatch</b>

<div class="disass_code"><b>765f</b>   a5 ec      LDA .ScreenTop
<b>7661</b>   f0 0f      BEQ <a href="#7672">.__ChooseScrollDirection__YNext</a>
<b>7663</b>   a5 ed      LDA .FineScrollDirY
<b>7665</b>   d0 0b      BNE <a href="#7672">.__ChooseScrollDirection__YNext</a>
<b>7667</b>   a5 95      LDA .GeneralTimeRemaining
<b>7669</b>   f0 07      BEQ <a href="#7672">.__ChooseScrollDirection__YNext</a>
<b>766b</b>   a5 e5      LDA .RockfordCellsFromTopOfScreen
<b>766d</b>   d9 9b 74   CMP <a href="#749b">.YScrollTable</a>,Y
<b>7670</b>   90 e3      BCC <a href="#7655">.__ChooseScrollDirection__YMatch</a>
</div>
<a name="7672"></a>


<b>.__ChooseScrollDirection__YNext</b>

<div class="disass_code"><b>7672</b>   88         DEY 
<b>7673</b>   88         DEY 
<b>7674</b>   88         DEY 
<b>7675</b>   ca         DEX 
<b>7676</b>   d0 d6      BNE <a href="#764e">.__ChooseScrollDirection__YLoop</a>
<b>7678</b>   20 10 76   JSR <a href="#7610">.ChooseYScrollDirection</a>
<b>767b</b>   a0 09      LDY #$09
<b>767d</b>   a2 04      LDX #$04
<a name="767f"></a><b>767f</b>   a5 e6      LDA .RockfordCellsFromLeftOfScreen
<b>7681</b>   d9 a7 74   CMP .XScrollTable,Y
<b>7684</b>   d0 0a      BNE <a href="#7690">$7690</a>
<a name="7686"></a><b>7686</b>   b9 a8 74   LDA .XScrollTable+1,Y
<b>7689</b>   85 e9      STA .FineScrollDirX
<b>768b</b>   b9 a9 74   LDA $74a9,Y
<b>768e</b>   85 ea      STA .ScrollDirectionX__$00=StillOrLeft_$ff=Right
<a name="7690"></a><b>7690</b>   a5 e8      LDA .ScreenLeft
<b>7692</b>   f0 0f      BEQ <a href="#76a3">$76a3</a>
<b>7694</b>   a5 e9      LDA .FineScrollDirX
<b>7696</b>   d0 0b      BNE <a href="#76a3">$76a3</a>
<b>7698</b>   a5 95      LDA .GeneralTimeRemaining
<b>769a</b>   f0 07      BEQ <a href="#76a3">$76a3</a>
<b>769c</b>   a5 e6      LDA .RockfordCellsFromLeftOfScreen
<b>769e</b>   d9 a7 74   CMP .XScrollTable,Y
<b>76a1</b>   90 e3      BCC <a href="#7686">$7686</a>
<a name="76a3"></a><b>76a3</b>   88         DEY 
<b>76a4</b>   88         DEY 
<b>76a5</b>   88         DEY 
<b>76a6</b>   ca         DEX 
<b>76a7</b>   d0 d6      BNE <a href="#767f">$767f</a>
<b>76a9</b>   20 2d 76   JSR <a href="#762d">.ChooseXScrollDirection</a>
<b>76ac</b>   60         RTS 
</div>
<a name="76ad"></a>

<div class="disass_comment">; 
</div>

<b>.Scroller</b>

<div class="disass_code"><b>76ad</b>   a5 a6      LDA .CurrentBonusLevelFlag
<b>76af</b>   f0 05      BEQ <a href="#76b6">.__Scroller__DoScroll</a>
<b>76b1</b>   a5 95      LDA .GeneralTimeRemaining
<b>76b3</b>   d0 01      BNE <a href="#76b6">.__Scroller__DoScroll</a>
<b>76b5</b>   60         RTS 
</div>
<a name="76b6"></a>


<b>.__Scroller__DoScroll</b>

<div class="disass_code"><b>76b6</b>   20 b3 74   JSR <a href="#74b3">.CalcScrollOffsets_XIfNeeded_YIfNeeded</a>
<b>76b9</b>   20 4a 76   JSR <a href="#764a">.ChooseScrollDirection</a>
<b>76bc</b>   20 d5 75   JSR <a href="#75d5">.StopScrollingAtEdges</a>
<b>76bf</b>   20 59 75   JSR <a href="#7559">.ScheduleXScroll</a>
<b>76c2</b>   20 e0 74   JSR <a href="#74e0">.ScheduleYScroll</a>
<b>76c5</b>   60         RTS 
</div>
<a name="76c6"></a>

<div class="disass_comment">; 
</div>

<b>.AdvanceWorldCurrentCellPtr</b>

<div class="disass_code"><b>76c6</b>   e6 32      INC .WorldCurrentCellPtrLow
<b>76c8</b>   d0 02      BNE <a href="#76cc">$76cc</a>
<b>76ca</b>   e6 33      INC .WorldCurrentCellPtrHigh
<a name="76cc"></a><b>76cc</b>   60         RTS 
</div>
<a name="76cd"></a>

<div class="disass_comment">; 
; IN: ZF, A
; 
; .WorldCurrentCellPtr(???) points to the NW cell ($00).
; The current cell C is at an offset of $29. See table below:
; ---------------------
; |NW:$00|N:$01|NE:$02|
; |------+-----+------|
; | W:$28|C:$29| E:$2a|
; |------+-----+------|
; |SW:$50|S:$51|SE:$52|
; |======+=====+======|
; |   $78|  $79|   $7a|
; ---------------------
</div>

<b>.ResetWorldCurrentCellPtr</b>

<div class="disass_code"><b>76cd</b>   f0 02      BEQ <a href="#76d1">$76d1</a>
<b>76cf</b>   a9 28      LDA #$28
<a name="76d1"></a><b>76d1</b>   18         CLC 
<b>76d2</b>   69 27      ADC #$27
<b>76d4</b>   85 32      STA .WorldCurrentCellPtrLow
<b>76d6</b>   a9 08      LDA #$08
<b>76d8</b>   85 33      STA .WorldCurrentCellPtrHigh
<b>76da</b>   60         RTS 
</div>
<a name="76db"></a>

<div class="disass_comment">; 
</div>

<b>.FillExpandedLatticeWithScrollingSteelWallChar</b>

<div class="disass_code"><b>76db</b>   a2 00      LDX #$00
<a name="76dd"></a><b>76dd</b>   bd da 53   LDA .ExpandedLatticeLineAddressTable,X
<b>76e0</b>   85 34      STA .ExpandedLatticeCurrentCellPtrL
<b>76e2</b>   bd db 53   LDA .ExpandedLatticeLineAddressTable+1,X
<b>76e5</b>   85 35      STA .ExpandedLatticeCurrentCellPtrH
<b>76e7</b>   a0 00      LDY #$00
<b>76e9</b>   a9 7c      LDA #$7c
<a name="76eb"></a><b>76eb</b>   91 34      STA (.ExpandedLatticeCurrentCellPtrL),Y
<b>76ed</b>   c8         INY 
</div>


<div class="disass_comment">; $a0(160) is two character lines (each cell is 2x2).
</div>


<div class="disass_code"><b>76ee</b>   c0 a0      CPY #$a0
<b>76f0</b>   d0 f9      BNE <a href="#76eb">$76eb</a>
<b>76f2</b>   e8         INX 
<b>76f3</b>   e8         INX 
<b>76f4</b>   e0 2c      CPX #$2c
<b>76f6</b>   d0 e5      BNE <a href="#76dd">$76dd</a>
<b>76f8</b>   60         RTS 
</div>
<a name="76f9"></a>

<div class="disass_comment">; 
</div>

<b>.CoverLevel</b>

<div class="disass_comment">; Build a line address table for currently visible
; portion of empanded lattice.
</div>
<div class="disass_code"><b>76f9</b>   a5 d6      LDA .ExpandedLatticeSubsetPtrL
<b>76fb</b>   85 02      STA .__CoverLevel__LineAddressTable[24]
<b>76fd</b>   a5 d7      LDA .ExpandedLatticeSubsetPtrH
<b>76ff</b>   85 03      STA .__CoverLevel__LineAddressTable[24]+1
<b>7701</b>   a2 00      LDX #$00
<a name="7703"></a><b>7703</b>   b5 02      LDA .__CoverLevel__LineAddressTable[24],X
<b>7705</b>   18         CLC 
<b>7706</b>   69 50      ADC #$50
<b>7708</b>   95 04      STA .__UnknownZP_04,X
<b>770a</b>   b5 03      LDA .__CoverLevel__LineAddressTable[24]+1,X
<b>770c</b>   69 00      ADC #$00
<b>770e</b>   95 05      STA .__UnknownZP_05,X
<b>7710</b>   e8         INX 
<b>7711</b>   e8         INX 
<b>7712</b>   e0 2e      CPX #$2e
<b>7714</b>   d0 ed      BNE <a href="#7703">$7703</a>
</div>


<div class="disass_comment">; 
</div>


<div class="disass_code"><b>7716</b>   a9 00      LDA #$00
</div>




<div class="disass_comment">; Not used as CellX. Is a simple loop counter.
</div>
<div class="disass_code"><b>7718</b>   85 91      STA .CaveMatrixX
</div>
<a name="771a"></a>


<b>.__CoverLevel__Outer</b>

<div class="disass_code"><b>771a</b>   a2 00      LDX #$00
</div>
<a name="771c"></a>


<b>.__CoverLevel__Inner</b>

<div class="disass_code"><b>771c</b>   a9 00      LDA #$00
</div>


<div class="disass_comment">; .CoverLevel::__POINTLESS really is totally pointless. The game does
; both read and write it but it has no effect. We never actually get
; to $7736 and even if we did we'd simply fall through to
; .__CoverLevel__PointlessBranchTarget. I suspect that during development
; the plan was to first cover the level with scrolling steel walls for a bit
; and then start filling with spaces - a sort of fade in fade out effect -
; and the pointless code and variable are what's left.
</div>


<div class="disass_code"><b>771e</b>   85 ba      STA .CoverLevel::__POINTLESS__
<b>7720</b>   b5 02      LDA .__CoverLevel__LineAddressTable[24],X
<b>7722</b>   85 36      STA .ExpandedLatticeOutputPtrL
<b>7724</b>   b5 03      LDA .__CoverLevel__LineAddressTable[24]+1,X
<b>7726</b>   85 37      STA .ExpandedLatticeOutputPtrH
</div>
<a name="7728"></a>


<b>.__CoverLevel__RandomNumber</b>

<div class="disass_code"><b>7728</b>   20 d0 6a   JSR <a href="#6ad0">.TrueRandom</a>
<b>772b</b>   29 3f      AND #$3f
<b>772d</b>   c9 2b      CMP #$2b
</div>


<div class="disass_comment">; Take branch below if A>=$2b(43)
</div>


<div class="disass_code"><b>772f</b>   b0 f7      BCS <a href="#7728">.__CoverLevel__RandomNumber</a>
</div>


<div class="disass_comment">; 0<=A<=$2a(42)
</div>


<div class="disass_code"><b>7731</b>   a8         TAY 
<b>7732</b>   e6 ba      INC .CoverLevel::__POINTLESS__
<b>7734</b>   d0 04      BNE <a href="#773a">.__CoverLevel__PointlessBranchTarget</a>
<b>7736</b>   a9 00      LDA #$00
<b>7738</b>   91 36      STA (.ExpandedLatticeOutputPtrL),Y
</div>
<a name="773a"></a>


<b>.__CoverLevel__PointlessBranchTarget</b>

<div class="disass_comment">; $7c is scrolling steel wall.
</div>
<div class="disass_code"><b>773a</b>   a9 7c      LDA #$7c
<b>773c</b>   91 36      STA (.ExpandedLatticeOutputPtrL),Y
<b>773e</b>   e8         INX 
<b>773f</b>   e8         INX 
<b>7740</b>   e0 30      CPX #$30
<b>7742</b>   d0 d8      BNE <a href="#771c">.__CoverLevel__Inner</a>
<b>7744</b>   e6 91      INC .CaveMatrixX
<b>7746</b>   a5 91      LDA .CaveMatrixX
<b>7748</b>   c9 30      CMP #$30
<b>774a</b>   d0 ce      BNE <a href="#771a">.__CoverLevel__Outer</a>
<b>774c</b>   60         RTS 
</div>
<a name="774d"></a>

<div class="disass_comment">; 
; Pads the expanded lattice ($4003 - $4DC2) with 1st steel wall char ($4a).
; Padded bytes: $4000-4002 (3 bytes) and $4dc3-4ec2 (256 bytes).
</div>

<b>.PadExpandedLattice</b>

<div class="disass_code"><b>774d</b>   a2 00      LDX #$00
<b>774f</b>   a9 4a      LDA #$4a
<a name="7751"></a><b>7751</b>   9d c3 4d   STA .ExpandedLattice__END_PLUS_ONE__,X
<b>7754</b>   ca         DEX 
<b>7755</b>   d0 fa      BNE <a href="#7751">$7751</a>
<b>7757</b>   a2 02      LDX #$02
<a name="7759"></a><b>7759</b>   9d 00 40   STA $4000,X
<b>775c</b>   ca         DEX 
<b>775d</b>   10 fa      BPL <a href="#7759">$7759</a>
<b>775f</b>   60         RTS 
</div>
<a name="7760"></a>

<div class="disass_comment">; 
; Uncover one random cell on each line, 69 times (no already uncovered checks).
</div>

<b>.RandomlyUncoverScreen</b>

<div class="disass_comment">; Loop 69 times.
</div>
<div class="disass_code"><b>7760</b>   a9 45      LDA #$45
<b>7762</b>   85 bb      STA ._LoopCounter
</div>
<a name="7764"></a>

<div class="disass_comment">; 
</div>


<div class="disass_code"><b>7764</b>   a9 00      LDA #$00
<b>7766</b>   85 92      STA .CaveMatrixY
<b>7768</b>   20 cd 76   JSR <a href="#76cd">.ResetWorldCurrentCellPtr</a>
</div>
<a name="776b"></a>


<b>.__RandomlyUncoverScreen__GetRandomNumber</b>

<div class="disass_code"><b>776b</b>   20 d0 6a   JSR <a href="#6ad0">.TrueRandom</a>
<b>776e</b>   85 91      STA .CaveMatrixX
<b>7770</b>   a9 27      LDA #$27
<b>7772</b>   38         SEC 
<b>7773</b>   e5 91      SBC .CaveMatrixX
<b>7775</b>   90 f4      BCC <a href="#776b">.__RandomlyUncoverScreen__GetRandomNumber</a>
</div>


<div class="disass_comment">; .WorldCurrentCellX <= $27(39)
; A = 39-.WorldCurrentCellX
; 
</div>


<div class="disass_code"><b>7777</b>   85 bc      STA .RandomlyUncoverScreen::OffsetToStartOfNextLine
<b>7779</b>   e6 bc      INC .RandomlyUncoverScreen::OffsetToStartOfNextLine
</div>


<div class="disass_comment">; .RandomlyUncoverScreen::OffsetToStartOfNextLine = 40-.WorldCurrentCellX
; 
; Adjust .WorldCurrentCellPtr(Low&High) to point to .WorldCurrentCellX on the line.
</div>


<div class="disass_code"><b>777b</b>   a5 32      LDA .WorldCurrentCellPtrLow
<b>777d</b>   18         CLC 
<b>777e</b>   65 91      ADC .CaveMatrixX
<b>7780</b>   85 32      STA .WorldCurrentCellPtrLow
<b>7782</b>   a5 33      LDA .WorldCurrentCellPtrHigh
<b>7784</b>   69 00      ADC #$00
<b>7786</b>   85 33      STA .WorldCurrentCellPtrHigh
</div>


<div class="disass_comment">; 
; Setting the cell to itself like this will make it appear.
</div>


<div class="disass_code"><b>7788</b>   a0 29      LDY #$29
<b>778a</b>   b1 32      LDA (.WorldCurrentCellPtrLow),Y
<b>778c</b>   20 b6 6c   JSR <a href="#6cb6">.SetCaveCellAndScreenToObject</a>
</div>


<div class="disass_comment">; 
; Move to the start of the next line.
</div>


<div class="disass_code"><b>778f</b>   a5 32      LDA .WorldCurrentCellPtrLow
<b>7791</b>   18         CLC 
<b>7792</b>   65 bc      ADC .RandomlyUncoverScreen::OffsetToStartOfNextLine
<b>7794</b>   85 32      STA .WorldCurrentCellPtrLow
<b>7796</b>   a5 33      LDA .WorldCurrentCellPtrHigh
<b>7798</b>   69 00      ADC #$00
<b>779a</b>   85 33      STA .WorldCurrentCellPtrHigh
</div>


<div class="disass_comment">; 
</div>


<div class="disass_code"><b>779c</b>   e6 92      INC .CaveMatrixY
<b>779e</b>   a5 92      LDA .CaveMatrixY
<b>77a0</b>   c9 16      CMP #$16
<b>77a2</b>   d0 c7      BNE <a href="#776b">.__RandomlyUncoverScreen__GetRandomNumber</a>
<b>77a4</b>   c6 bb      DEC ._LoopCounter
<b>77a6</b>   d0 bc      BNE <a href="#7764">$7764</a>
<b>77a8</b>   60         RTS 
</div>
<a name="77a9"></a>

<div class="disass_comment">; 
</div>

<b>.PlayRevealLevelSoundAndRedefineChar</b>

<div class="disass_code"><b>77a9</b>   a5 bd      LDA .PlayRevealLevelSoundAndRedefineCharFlag
<b>77ab</b>   f0 4b      BEQ <a href="#77f8">.__PlayRevealLevelSoundAndRedefineChar__Disabled</a>
</div>



<b>.__PlayRevealLevelSoundAndRedefineChar__Enabled</b>

<div class="disass_code"><b>77ad</b>   a9 00      LDA #$00
<b>77af</b>   8d 0d 98   STA .MusicTickRoutine::Voice1SustainLevel+1
</div>


<div class="disass_comment">; We add one before we use it, so the phase number outside are one less than in here.
</div>


<div class="disass_code"><b>77b2</b>   ee 0b 98   INC .PlayRevealLevelSoundAndRedefineChar::SFXPhase
<b>77b5</b>   ad 0b 98   LDA .PlayRevealLevelSoundAndRedefineChar::SFXPhase
<b>77b8</b>   c9 02      CMP #$02
<b>77ba</b>   f0 24      BEQ <a href="#77e0">.__PlayRevealLevelSoundAndRedefineChar__RedefineChar</a>
<b>77bc</b>   c9 01      CMP #$01
<b>77be</b>   d0 16      BNE <a href="#77d6">.__PlayRevealLevelSoundAndRedefineChar__ReleasePhase</a>
</div>


<div class="disass_comment">; 1 = Attack phase
</div>

<b>.__PlayRevealLevelSoundAndRedefineChar__AttackPhase</b>

<div class="disass_code"><b>77c0</b>   a9 05      LDA #$05
<b>77c2</b>   8d 0c d4   STA .Sid_Voice2AttackDecay
<b>77c5</b>   20 d0 6a   JSR <a href="#6ad0">.TrueRandom</a>
<b>77c8</b>   29 7f      AND #$7f
<b>77ca</b>   69 64      ADC #$64
<b>77cc</b>   8d 08 d4   STA .Sid_Voice2FreqHi
<b>77cf</b>   a9 11      LDA #$11
<b>77d1</b>   8d 0b d4   STA .Sid_Voice2Ctrl
</div>


<div class="disass_comment">; Branch always taken.
</div>


<div class="disass_code"><b>77d4</b>   d0 0a      BNE <a href="#77e0">.__PlayRevealLevelSoundAndRedefineChar__RedefineChar</a>
</div>
<a name="77d6"></a>

<div class="disass_comment">; 3 = Release phase
</div>

<b>.__PlayRevealLevelSoundAndRedefineChar__ReleasePhase</b>

<div class="disass_code"><b>77d6</b>   a2 00      LDX #$00
<b>77d8</b>   8e 0b 98   STX .PlayRevealLevelSoundAndRedefineChar::SFXPhase
<b>77db</b>   a9 10      LDA #$10
<b>77dd</b>   8d 0b d4   STA .Sid_Voice2Ctrl
</div>
<a name="77e0"></a>

<div class="disass_comment">; 2 = Sustain phase
</div>

<b>.__PlayRevealLevelSoundAndRedefineChar__RedefineChar</b>

<div class="disass_code"><b>77e0</b>   ad e0 33   LDA $33e0
<b>77e3</b>   85 4a      STA .PlayRevealLevelSoundAndRedefineChar::FirstLine
<b>77e5</b>   a2 00      LDX #$00
</div>
<a name="77e7"></a>


<b>.__PlayRevealLevelSoundAndRedefineChar__Loop</b>

<div class="disass_code"><b>77e7</b>   bd e1 33   LDA $33e1,X
<b>77ea</b>   9d e0 33   STA $33e0,X
<b>77ed</b>   e8         INX 
<b>77ee</b>   e0 07      CPX #$07
<b>77f0</b>   d0 f5      BNE <a href="#77e7">.__PlayRevealLevelSoundAndRedefineChar__Loop</a>
<b>77f2</b>   a5 4a      LDA .PlayRevealLevelSoundAndRedefineChar::FirstLine
<b>77f4</b>   8d e7 33   STA $33e7
<b>77f7</b>   60         RTS 
</div>
<a name="77f8"></a>


<b>.__PlayRevealLevelSoundAndRedefineChar__Disabled</b>

<div class="disass_comment">; When can be disabled in any phase so reset it to the attack phase.
</div>
<div class="disass_code"><b>77f8</b>   a9 00      LDA #$00
<b>77fa</b>   8d 0b 98   STA .PlayRevealLevelSoundAndRedefineChar::SFXPhase
<b>77fd</b>   60         RTS 
</div>
<a name="77fe"></a>

<div class="disass_comment">; 
</div>

<b>.UncoverCaveScreen</b>

<div class="disass_comment">;  Randomly "uncover" screen.
; The game is mainly interrupt driven and the this function takes some
; time to complete. When it returns the screen will not be totally uncovered.
</div>
<div class="disass_code"><b>77fe</b>   20 60 77   JSR <a href="#7760">.RandomlyUncoverScreen</a>
</div>


<div class="disass_comment">; Uncover the entire screen.
</div>


<div class="disass_code"><b>7801</b>   a9 00      LDA #$00
<b>7803</b>   85 92      STA .CaveMatrixY
<b>7805</b>   20 cd 76   JSR <a href="#76cd">.ResetWorldCurrentCellPtr</a>
<a name="7808"></a><b>7808</b>   a9 00      LDA #$00
<b>780a</b>   85 91      STA .CaveMatrixX
<a name="780c"></a><b>780c</b>   a0 29      LDY #$29
<b>780e</b>   b1 32      LDA (.WorldCurrentCellPtrLow),Y
<b>7810</b>   20 b6 6c   JSR <a href="#6cb6">.SetCaveCellAndScreenToObject</a>
<b>7813</b>   20 c6 76   JSR <a href="#76c6">.AdvanceWorldCurrentCellPtr</a>
<b>7816</b>   e6 91      INC .CaveMatrixX
<b>7818</b>   a5 91      LDA .CaveMatrixX
<b>781a</b>   c9 28      CMP #$28
<b>781c</b>   d0 ee      BNE <a href="#780c">$780c</a>
<b>781e</b>   e6 92      INC .CaveMatrixY
<b>7820</b>   a5 92      LDA .CaveMatrixY
<b>7822</b>   c9 16      CMP #$16
<b>7824</b>   d0 e2      BNE <a href="#7808">$7808</a>
</div>


<div class="disass_comment">; What is the purpose of the padding?
</div>


<div class="disass_code"><b>7826</b>   20 4d 77   JSR <a href="#774d">.PadExpandedLattice</a>
<b>7829</b>   60         RTS 
</div>
<a name="782a"></a>

<div class="disass_comment">; 
; Handle animating Rockford.
; IN: X is source offset. Y is destination offset.
; X and Y are preserved.
</div>

<b>.AnimateRockford</b>

<div class="disass_code"><b>782a</b>   a5 8b      LDA .JoystickStatus
<b>782c</b>   c9 0f      CMP #$0f
<b>782e</b>   f0 3c      BEQ <a href="#786c">.AnimateRockford__Bored</a>
<b>7830</b>   a9 00      LDA #$00
<b>7832</b>   85 be      STA .__TapFootFlag
<b>7834</b>   85 bf      STA .__BlinkFlag
<b>7836</b>   a5 98      LDA .RockfordDir(0Right_1Left_is_sticky)
<b>7838</b>   d0 19      BNE <a href="#7853">$7853</a>
</div>


<div class="disass_comment">; Right facing.
</div>


<div class="disass_code"><b>783a</b>   bd e8 65   LDA $65e8,X
<b>783d</b>   99 60 32   STA $3260,Y
<b>7840</b>   bd f0 65   LDA $65f0,X
<b>7843</b>   99 68 32   STA $3268,Y
<b>7846</b>   bd 68 66   LDA $6668,X
<b>7849</b>   99 e0 32   STA $32e0,Y
<b>784c</b>   bd 70 66   LDA $6670,X
<b>784f</b>   99 e8 32   STA $32e8,Y
<b>7852</b>   60         RTS 
</div>
<a name="7853"></a>

<div class="disass_comment">; Left facing.
</div>


<div class="disass_code"><b>7853</b>   bd e8 64   LDA $64e8,X
<b>7856</b>   99 60 32   STA $3260,Y
<b>7859</b>   bd f0 64   LDA $64f0,X
<b>785c</b>   99 68 32   STA $3268,Y
<b>785f</b>   bd 68 65   LDA $6568,X
<b>7862</b>   99 e0 32   STA $32e0,Y
<b>7865</b>   bd 70 65   LDA $6570,X
<b>7868</b>   99 e8 32   STA $32e8,Y
<b>786b</b>   60         RTS 
</div>
<a name="786c"></a>


<b>.AnimateRockford__Bored</b>

<div class="disass_code"><b>786c</b>   e0 00      CPX #$00
<b>786e</b>   d0 1c      BNE <a href="#788c">.AnimateRockford__RedfineBlinkingChars</a>
</div>



<b>.AnimateRockford__FirstLine</b>

<div class="disass_code"><b>7870</b>   a9 00      LDA #$00
<b>7872</b>   85 bf      STA .__BlinkFlag
<b>7874</b>   20 d0 6a   JSR <a href="#6ad0">.TrueRandom</a>
<b>7877</b>   29 03      AND #$03
<b>7879</b>   d0 04      BNE <a href="#787f">.AnimateRockford__DontBlink</a>
</div>


<div class="disass_comment">; Set blink flag. There's a 1 in 4 chance of this occuring.
</div>


<div class="disass_code"><b>787b</b>   a9 01      LDA #$01
<b>787d</b>   85 bf      STA .__BlinkFlag
</div>
<a name="787f"></a>


<b>.AnimateRockford__DontBlink</b>

<div class="disass_code"><b>787f</b>   20 d0 6a   JSR <a href="#6ad0">.TrueRandom</a>
<b>7882</b>   29 0f      AND #$0f
<b>7884</b>   d0 06      BNE <a href="#788c">.AnimateRockford__RedfineBlinkingChars</a>
</div>


<div class="disass_comment">; Toggle the foot tapping. There's a one in 16 chance of this.
</div>


<div class="disass_code"><b>7886</b>   a9 01      LDA #$01
<b>7888</b>   45 be      EOR .__TapFootFlag
<b>788a</b>   85 be      STA .__TapFootFlag
</div>
<a name="788c"></a>


<b>.AnimateRockford__RedfineBlinkingChars</b>

<div class="disass_code"><b>788c</b>   a5 bf      LDA .__BlinkFlag
<b>788e</b>   f0 0f      BEQ <a href="#789f">.AnimateRockford__ResetBlinkingChars</a>
<b>7890</b>   bd e8 63   LDA <a href="#63e8">.RockfordAnimationChars</a>,X
<b>7893</b>   99 60 32   STA $3260,Y
<b>7896</b>   bd f0 63   LDA $63f0,X
<b>7899</b>   99 68 32   STA $3268,Y
<b>789c</b>   4c ab 78   JMP <a href="#78ab">.AnimateRockford__RedfineFootTappingChars</a>
</div>
<a name="789f"></a>


<b>.AnimateRockford__ResetBlinkingChars</b>

<div class="disass_code"><b>789f</b>   b9 10 32   LDA $3210,Y
<b>78a2</b>   99 60 32   STA $3260,Y
<b>78a5</b>   b9 18 32   LDA $3218,Y
<b>78a8</b>   99 68 32   STA $3268,Y
</div>
<a name="78ab"></a>


<b>.AnimateRockford__RedfineFootTappingChars</b>

<div class="disass_code"><b>78ab</b>   a5 be      LDA .__TapFootFlag
<b>78ad</b>   f0 0d      BEQ <a href="#78bc">.AnimateRockford__ResetFootTappingChars</a>
<b>78af</b>   bd 68 64   LDA $6468,X
<b>78b2</b>   99 e0 32   STA $32e0,Y
<b>78b5</b>   bd 70 64   LDA $6470,X
<b>78b8</b>   99 e8 32   STA $32e8,Y
<b>78bb</b>   60         RTS 
</div>
<a name="78bc"></a>


<b>.AnimateRockford__ResetFootTappingChars</b>

<div class="disass_code"><b>78bc</b>   b9 90 32   LDA $3290,Y
<b>78bf</b>   99 e0 32   STA $32e0,Y
<b>78c2</b>   b9 98 32   LDA $3298,Y
<b>78c5</b>   99 e8 32   STA $32e8,Y
<b>78c8</b>   60         RTS 
</div>
<a name="78c9"></a>


<b>.AnimateGameCharsAndHandleTopLineSwitch</b>

<div class="disass_code"><b>78c9</b>   a5 95      LDA .GeneralTimeRemaining
<b>78cb</b>   d0 07      BNE <a href="#78d4">$78d4</a>
<b>78cd</b>   a5 94      LDA .EnableIRQTriggeredSFXAndTopLineUpdates
<b>78cf</b>   f0 03      BEQ <a href="#78d4">$78d4</a>
<b>78d1</b>   20 05 71   JSR <a href="#7105">.SetTopLineToScore</a>
<a name="78d4"></a><b>78d4</b>   a5 c0      LDA .AnimationFrameTimes8
<b>78d6</b>   0a         ASL A
<b>78d7</b>   aa         TAX 
<b>78d8</b>   a0 00      LDY #$00
</div>
<a name="78da"></a>


<b>.AnimateGameCharsAndHandleTopLineSwitch__Loop</b>

<div class="disass_comment">; Diamonds
</div>
<div class="disass_code"><b>78da</b>   bd 06 56   LDA $5606,X
<b>78dd</b>   99 40 32   STA $3240,Y
<b>78e0</b>   bd 0e 56   LDA $560e,X
<b>78e3</b>   99 48 32   STA $3248,Y
<b>78e6</b>   bd 86 56   LDA $5686,X
<b>78e9</b>   99 c0 32   STA $32c0,Y
<b>78ec</b>   bd 8e 56   LDA $568e,X
<b>78ef</b>   99 c8 32   STA $32c8,Y
</div>


<div class="disass_comment">; 
</div>


<div class="disass_code"><b>78f2</b>   a5 ff      LDA .AnimationEnableFlags
<b>78f4</b>   f0 58      BEQ <a href="#794e">$794e</a>
<b>78f6</b>   c9 04      CMP #$04
<b>78f8</b>   90 18      BCC <a href="#7912">$7912</a>
</div>


<div class="disass_comment">; Amoeba
</div>


<div class="disass_code"><b>78fa</b>   bd 06 54   LDA <a href="#5406">.AnimatedCharData</a>,X
<b>78fd</b>   99 00 32   STA .CopiedGameCharDataBlock2,Y
<b>7900</b>   bd 0e 54   LDA $540e,X
<b>7903</b>   99 08 32   STA $3208,Y
<b>7906</b>   bd 86 54   LDA $5486,X
<b>7909</b>   99 80 32   STA $3280,Y
<b>790c</b>   bd 8e 54   LDA $548e,X
<b>790f</b>   99 88 32   STA $3288,Y
</div>
<a name="7912"></a>

<div class="disass_comment">; 
</div>


<div class="disass_code"><b>7912</b>   a5 ff      LDA .AnimationEnableFlags
<b>7914</b>   29 02      AND #$02
<b>7916</b>   f0 18      BEQ <a href="#7930">$7930</a>
</div>


<div class="disass_comment">; Butterfly
</div>


<div class="disass_code"><b>7918</b>   bd 06 57   LDA $5706,X
<b>791b</b>   99 00 31   STA .CopiedGameCharDataBlock1,Y
<b>791e</b>   bd 0e 57   LDA $570e,X
<b>7921</b>   99 08 31   STA $3108,Y
<b>7924</b>   bd 86 57   LDA $5786,X
<b>7927</b>   99 80 31   STA $3180,Y
<b>792a</b>   bd 8e 57   LDA $578e,X
<b>792d</b>   99 88 31   STA $3188,Y
</div>
<a name="7930"></a>

<div class="disass_comment">; 
</div>


<div class="disass_code"><b>7930</b>   a5 ff      LDA .AnimationEnableFlags
<b>7932</b>   29 01      AND #$01
<b>7934</b>   f0 18      BEQ <a href="#794e">$794e</a>
</div>


<div class="disass_comment">; Firefly
</div>


<div class="disass_code"><b>7936</b>   bd 06 55   LDA $5506,X
<b>7939</b>   99 20 33   STA $3320,Y
<b>793c</b>   bd 0e 55   LDA $550e,X
<b>793f</b>   99 28 33   STA $3328,Y
<b>7942</b>   bd 86 55   LDA $5586,X
<b>7945</b>   99 a0 33   STA $33a0,Y
<b>7948</b>   bd 8e 55   LDA $558e,X
<b>794b</b>   99 a8 33   STA $33a8,Y
</div>
<a name="794e"></a>

<div class="disass_comment">; 
</div>


<div class="disass_code"><b>794e</b>   20 2a 78   JSR <a href="#782a">.AnimateRockford</a>
<b>7951</b>   e8         INX 
<b>7952</b>   c8         INY 
<b>7953</b>   c0 08      CPY #$08
<b>7955</b>   d0 83      BNE <a href="#78da">.AnimateGameCharsAndHandleTopLineSwitch__Loop</a>
<b>7957</b>   60         RTS 
</div>
<a name="7958"></a>


<b>.WhiteFlash</b>

<div class="disass_code"><b>7958</b>   a5 a5      LDA .WhiteFlashWhiteCount
<b>795a</b>   f0 14      BEQ <a href="#7970">$7970</a>
<b>795c</b>   a9 01      LDA #$01
<b>795e</b>   8d 21 d0   STA .Vic_BkgndColour0
<b>7961</b>   8d 20 d0   STA .Vic_BorderColour
<b>7964</b>   c6 a5      DEC .WhiteFlashWhiteCount
<b>7966</b>   d0 08      BNE <a href="#7970">$7970</a>
<b>7968</b>   a9 00      LDA #$00
<b>796a</b>   8d 21 d0   STA .Vic_BkgndColour0
<b>796d</b>   8d 20 d0   STA .Vic_BorderColour
<a name="7970"></a><b>7970</b>   60         RTS 
</div>
<a name="7971"></a>

<div class="disass_comment">; 
</div>

<b>.SoundFX</b>

<div class="disass_code"><b>7971</b>   a9 0f      LDA #$0f
<b>7973</b>   8d 18 d4   STA .Sid_FilterModeAndVolume
<b>7976</b>   a5 9b      LDA .UNSURE__AmoebaOrMagicWallRunningFlag
<b>7978</b>   f0 01      BEQ <a href="#797b">.__SoundFX__NotPaused__</a>
</div>



<b>.__SoundFX__Paused__</b>

<div class="disass_code"><b>797a</b>   60         RTS 
</div>
<a name="797b"></a>


<b>.__SoundFX__NotPaused__</b>

<div class="disass_code"><b>797b</b>   a5 d8      LDA .DiamondQuotaReachedOrEntryBoxExplodeSoundFlag
<b>797d</b>   f0 21      BEQ <a href="#79a0">$79a0</a>
<b>797f</b>   a5 d9      LDA .DiamondQuotaReachedOrEntryBoxExplode_SFXDurationCounter
<b>7981</b>   d0 12      BNE <a href="#7995">.__SoundFX__SoundOnVoice3InProgress</a>
</div>



<b>.__SoundFX__DiamondQuotaReachedOrEntryBoxExplode__</b>

<div class="disass_code"><b>7983</b>   20 e7 7c   JSR <a href="#7ce7">.ResetVoice3</a>
<b>7986</b>   a2 06      LDX #$06
<a name="7988"></a><b>7988</b>   bd 80 70   LDA <a href="#7080">.DiamondQuotaReachedSoundSIDValues[7]</a>,X
<b>798b</b>   9d 0e d4   STA .Sid_Voice3FreqLo,X
<b>798e</b>   ca         DEX 
<b>798f</b>   10 f7      BPL <a href="#7988">$7988</a>
<b>7991</b>   a9 21      LDA #$21
<b>7993</b>   85 d9      STA .DiamondQuotaReachedOrEntryBoxExplode_SFXDurationCounter
</div>
<a name="7995"></a>


<b>.__SoundFX__SoundOnVoice3InProgress</b>

<div class="disass_code"><b>7995</b>   c6 d9      DEC .DiamondQuotaReachedOrEntryBoxExplode_SFXDurationCounter
<b>7997</b>   d0 07      BNE <a href="#79a0">$79a0</a>
<b>7999</b>   a9 00      LDA #$00
<b>799b</b>   85 d8      STA .DiamondQuotaReachedOrEntryBoxExplodeSoundFlag
<b>799d</b>   20 e7 7c   JSR <a href="#7ce7">.ResetVoice3</a>
<a name="79a0"></a><b>79a0</b>   a5 d9      LDA .DiamondQuotaReachedOrEntryBoxExplode_SFXDurationCounter
<b>79a2</b>   d0 2e      BNE <a href="#79d2">$79d2</a>
<b>79a4</b>   a5 94      LDA .EnableIRQTriggeredSFXAndTopLineUpdates
<b>79a6</b>   f0 21      BEQ <a href="#79c9">$79c9</a>
<b>79a8</b>   a5 43      LDA .AmoebaIsGrowingAndAmoebaSFX
<b>79aa</b>   f0 1d      BEQ <a href="#79c9">$79c9</a>
<b>79ac</b>   a9 10      LDA #$10
<b>79ae</b>   8d 12 d4   STA .Sid_Voice3Ctrl
<a name="79b1"></a><b>79b1</b>   20 d0 6a   JSR <a href="#6ad0">.TrueRandom</a>
<b>79b4</b>   29 1f      AND #$1f
<b>79b6</b>   c9 08      CMP #$08
<b>79b8</b>   90 f7      BCC <a href="#79b1">$79b1</a>
<b>79ba</b>   8d 0f d4   STA .Sid_Voice3FreqHi
<b>79bd</b>   a9 30      LDA #$30
<b>79bf</b>   8d 13 d4   STA .Sid_Voice3AttackDecay
<b>79c2</b>   a9 11      LDA #$11
<b>79c4</b>   8d 12 d4   STA .Sid_Voice3Ctrl
<b>79c7</b>   d0 09      BNE <a href="#79d2">$79d2</a>
<a name="79c9"></a><b>79c9</b>   a5 8d      LDA .MagicWallActiveState
<b>79cb</b>   c9 01      CMP #$01
<b>79cd</b>   f0 03      BEQ <a href="#79d2">$79d2</a>
<b>79cf</b>   20 e7 7c   JSR <a href="#7ce7">.ResetVoice3</a>
<a name="79d2"></a><b>79d2</b>   ee 0f 98   INC $980f
<b>79d5</b>   ad 0f 98   LDA $980f
<b>79d8</b>   2d 78 98   AND $9878
<b>79db</b>   d0 55      BNE <a href="#7a32">$7a32</a>
<b>79dd</b>   ad 0d 98   LDA .MusicTickRoutine::Voice1SustainLevel+1
<b>79e0</b>   29 7f      AND #$7f
<b>79e2</b>   f0 29      BEQ <a href="#7a0d">$7a0d</a>
<b>79e4</b>   ae 7a 98   LDX $987a
<b>79e7</b>   ca         DEX 
<b>79e8</b>   8e 04 d4   STX .Sid_Voice1Ctrl
<b>79eb</b>   e0 80      CPX #$80
<b>79ed</b>   d0 05      BNE <a href="#79f4">$79f4</a>
<b>79ef</b>   a9 08      LDA #$08
<b>79f1</b>   8d 04 d4   STA .Sid_Voice1Ctrl
<a name="79f4"></a><b>79f4</b>   a2 06      LDX #$06
<a name="79f6"></a><b>79f6</b>   bd 7d 98   LDA .Voice1SIDRegsBuffer[7],X
<b>79f9</b>   9d 76 98   STA $9876,X
<b>79fc</b>   9d 00 d4   STA .Sid_Voice1FreqLo,X
<b>79ff</b>   ca         DEX 
<b>7a00</b>   10 f4      BPL <a href="#79f6">$79f6</a>
<b>7a02</b>   ad 0d 98   LDA .MusicTickRoutine::Voice1SustainLevel+1
<b>7a05</b>   29 80      AND #$80
<b>7a07</b>   8d 0d 98   STA .MusicTickRoutine::Voice1SustainLevel+1
<b>7a0a</b>   4c 32 7a   JMP <a href="#7a32">$7a32</a>
<a name="7a0d"></a><b>7a0d</b>   4e 7c 98   LSR $987c
<b>7a10</b>   ad 7c 98   LDA $987c
<b>7a13</b>   29 f0      AND #$f0
<b>7a15</b>   8d 7c 98   STA $987c
<b>7a18</b>   8d 06 d4   STA .Sid_Voice1SustainRelease
<b>7a1b</b>   f0 0b      BEQ <a href="#7a28">$7a28</a>
<b>7a1d</b>   c9 04      CMP #$04
<b>7a1f</b>   b0 11      BCS <a href="#7a32">$7a32</a>
<b>7a21</b>   ae 7a 98   LDX $987a
<b>7a24</b>   e0 11      CPX #$11
<b>7a26</b>   d0 0a      BNE <a href="#7a32">$7a32</a>
<a name="7a28"></a><b>7a28</b>   a2 08      LDX #$08
<b>7a2a</b>   8e 04 d4   STX .Sid_Voice1Ctrl
<b>7a2d</b>   a9 00      LDA #$00
<b>7a2f</b>   8d 7c 98   STA $987c
<a name="7a32"></a><b>7a32</b>   a5 bd      LDA .PlayRevealLevelSoundAndRedefineCharFlag
<b>7a34</b>   f0 01      BEQ <a href="#7a37">$7a37</a>
<b>7a36</b>   60         RTS 
<a name="7a37"></a><b>7a37</b>   ad 11 98   LDA $9811
<b>7a3a</b>   f0 03      BEQ <a href="#7a3f">$7a3f</a>
<b>7a3c</b>   ce 11 98   DEC $9811
<a name="7a3f"></a><b>7a3f</b>   ad 0d 98   LDA .MusicTickRoutine::Voice1SustainLevel+1
<b>7a42</b>   29 80      AND #$80
<b>7a44</b>   f0 01      BEQ <a href="#7a47">$7a47</a>
<b>7a46</b>   60         RTS 
<a name="7a47"></a><b>7a47</b>   ad 11 98   LDA $9811
<b>7a4a</b>   f0 01      BEQ <a href="#7a4d">$7a4d</a>
<b>7a4c</b>   60         RTS 
<a name="7a4d"></a><b>7a4d</b>   ad 09 98   LDA $9809
<b>7a50</b>   d0 2d      BNE <a href="#7a7f">$7a7f</a>
<b>7a52</b>   ac 08 98   LDY .BackBufferVICMemControl+1
<b>7a55</b>   f0 2c      BEQ <a href="#7a83">$7a83</a>
<b>7a57</b>   20 e3 7c   JSR <a href="#7ce3">.ResetVoice2</a>
<b>7a5a</b>   8c 08 d4   STY .Sid_Voice2FreqHi
<b>7a5d</b>   a9 00      LDA #$00
<b>7a5f</b>   8d 08 98   STA .BackBufferVICMemControl+1
<b>7a62</b>   a9 c0      LDA #$c0
<b>7a64</b>   8d 0d d4   STA .Sid_Voice2SustainRelease
<b>7a67</b>   a9 30      LDA #$30
<b>7a69</b>   8d 0c d4   STA .Sid_Voice2AttackDecay
<b>7a6c</b>   a9 81      LDA #$81
<b>7a6e</b>   8d 0b d4   STA .Sid_Voice2Ctrl
<b>7a71</b>   ad 0a 98   LDA $980a
<b>7a74</b>   c9 02      CMP #$02
<b>7a76</b>   f0 04      BEQ <a href="#7a7c">$7a7c</a>
<b>7a78</b>   4a         LSR A
<b>7a79</b>   8d 0a 98   STA $980a
<a name="7a7c"></a><b>7a7c</b>   8d 09 98   STA $9809
<a name="7a7f"></a><b>7a7f</b>   ce 09 98   DEC $9809
<b>7a82</b>   60         RTS 
<a name="7a83"></a><b>7a83</b>   4c e3 7c   JMP <a href="#7ce3">.ResetVoice2</a>
</div>
<a name="7a86"></a>

<div class="disass_comment">; 
</div>

<b>.RedefineMagicWallCharsToNormalWall</b>

<div class="disass_code"><b>7a86</b>   a2 07      LDX #$07
<a name="7a88"></a><b>7a88</b>   bd 70 32   LDA $3270,X
<b>7a8b</b>   9d 10 31   STA $3110,X
<b>7a8e</b>   9d 18 31   STA $3118,X
<b>7a91</b>   9d 90 31   STA $3190,X
<b>7a94</b>   9d 98 31   STA $3198,X
<b>7a97</b>   ca         DEX 
<b>7a98</b>   10 ee      BPL <a href="#7a88">$7a88</a>
<b>7a9a</b>   60         RTS 
</div>
<a name="7a9b"></a>


<b>.MagicWallFX</b>

<div class="disass_code"><b>7a9b</b>   a5 c2      LDA .AnotherFrameCounter
<b>7a9d</b>   29 01      AND #$01
<b>7a9f</b>   f0 21      BEQ <a href="#7ac2">.MagicWallFX__Animate</a>
</div>



<b>.MagicWallFX__Sound</b>

<div class="disass_code"><b>7aa1</b>   a9 10      LDA #$10
<b>7aa3</b>   8d 12 d4   STA .Sid_Voice3Ctrl
<b>7aa6</b>   20 d0 6a   JSR <a href="#6ad0">.TrueRandom</a>
<b>7aa9</b>   29 03      AND #$03
<b>7aab</b>   0a         ASL A
<b>7aac</b>   0a         ASL A
<b>7aad</b>   0a         ASL A
<b>7aae</b>   69 86      ADC #$86
<b>7ab0</b>   8d 0f d4   STA .Sid_Voice3FreqHi
<b>7ab3</b>   a9 00      LDA #$00
<b>7ab5</b>   8d 13 d4   STA .Sid_Voice3AttackDecay
<b>7ab8</b>   a9 a0      LDA #$a0
<b>7aba</b>   8d 14 d4   STA .Sid_Voice3SustainRelease
<b>7abd</b>   a9 11      LDA #$11
<b>7abf</b>   8d 12 d4   STA .Sid_Voice3Ctrl
</div>
<a name="7ac2"></a>


<b>.MagicWallFX__Animate</b>

<div class="disass_code"><b>7ac2</b>   a5 c0      LDA .AnimationFrameTimes8
<b>7ac4</b>   29 1f      AND #$1f
</div>


<div class="disass_comment">; A = 0 to 24 in multiples of 8.
</div>


<div class="disass_code"><b>7ac6</b>   aa         TAX 
<b>7ac7</b>   a0 00      LDY #$00
</div>
<a name="7ac9"></a>


<b>.MagicWallFX__AnimateLoop</b>

<div class="disass_code"><b>7ac9</b>   bd 60 33   LDA $3360,X
<b>7acc</b>   99 10 31   STA $3110,Y
<b>7acf</b>   99 18 31   STA $3118,Y
<b>7ad2</b>   99 90 31   STA $3190,Y
<b>7ad5</b>   99 98 31   STA $3198,Y
<b>7ad8</b>   e8         INX 
<b>7ad9</b>   c8         INY 
<b>7ada</b>   c0 08      CPY #$08
<b>7adc</b>   d0 eb      BNE <a href="#7ac9">.MagicWallFX__AnimateLoop</a>
<b>7ade</b>   60         RTS 
</div>
<a name="7adf"></a>


<b>.HandleMagicWall</b>

<div class="disass_code"><b>7adf</b>   a5 8d      LDA .MagicWallActiveState
<b>7ae1</b>   c9 01      CMP #$01
<b>7ae3</b>   d0 03      BNE <a href="#7ae8">$7ae8</a>
<b>7ae5</b>   4c 9b 7a   JMP <a href="#7a9b">.MagicWallFX</a>
<a name="7ae8"></a><b>7ae8</b>   c9 02      CMP #$02
<b>7aea</b>   d0 0a      BNE <a href="#7af6">$7af6</a>
<b>7aec</b>   20 86 7a   JSR <a href="#7a86">.RedefineMagicWallCharsToNormalWall</a>
<b>7aef</b>   20 e7 7c   JSR <a href="#7ce7">.ResetVoice3</a>
<b>7af2</b>   a9 03      LDA #$03
<b>7af4</b>   85 8d      STA .MagicWallActiveState
<a name="7af6"></a><b>7af6</b>   60         RTS 
</div>
<a name="7af7"></a>


<b>.Animate</b>

<div class="disass_comment">; Move to the next frame in animations.
; There are 8 frames in each animatiom and each
; character has 8 lines. So .AnimationFrameLineOffset
; is a multiple of 8 from 0 to 56.
</div>
<div class="disass_code"><b>7af7</b>   a5 c0      LDA .AnimationFrameTimes8
<b>7af9</b>   18         CLC 
<b>7afa</b>   69 08      ADC #$08
<b>7afc</b>   29 3f      AND #$3f
<b>7afe</b>   85 c0      STA .AnimationFrameTimes8
<b>7b00</b>   20 c9 78   JSR <a href="#78c9">.AnimateGameCharsAndHandleTopLineSwitch</a>
<b>7b03</b>   20 df 7a   JSR <a href="#7adf">.HandleMagicWall</a>
<b>7b06</b>   60         RTS 
</div>
<a name="7b07"></a>


<b>.HandleMagicWallState</b>

<div class="disass_comment">; FWI: .MagicWallActiveState:
; 0 inactive. 1 active. 2 finished (signal to restore chars & kill sfx).
; 3 done and chars restored.
</div>
<div class="disass_code"><b>7b07</b>   a5 9b      LDA .UNSURE__AmoebaOrMagicWallRunningFlag
<b>7b09</b>   49 01      EOR #$01
<b>7b0b</b>   25 8d      AND .MagicWallActiveState
<b>7b0d</b>   c9 01      CMP #$01
<b>7b0f</b>   d0 19      BNE <a href="#7b2a">$7b2a</a>
</div>


<div class="disass_comment">; We get here when state is 1 OR 3. I think the OR is a mistake.
; The error has no ramifications unless .MagicWallActiveSeconds wraps.
</div>


<div class="disass_code"><b>7b11</b>   e6 8e      INC .MagicWallActiveFrameCounter
<b>7b13</b>   a5 8e      LDA .MagicWallActiveFrameCounter
<b>7b15</b>   c9 3c      CMP #$3c
<b>7b17</b>   d0 11      BNE <a href="#7b2a">$7b2a</a>
<b>7b19</b>   a9 00      LDA #$00
<b>7b1b</b>   85 8e      STA .MagicWallActiveFrameCounter
<b>7b1d</b>   e6 8f      INC .MagicWallActiveSeconds
<b>7b1f</b>   a5 8f      LDA .MagicWallActiveSeconds
<b>7b21</b>   cd 01 24   CMP .BufferedLevel_MagicWallMillingTimeOrAmoeba3PercentMax
<b>7b24</b>   d0 04      BNE <a href="#7b2a">$7b2a</a>
<b>7b26</b>   a9 02      LDA #$02
<b>7b28</b>   85 8d      STA .MagicWallActiveState
<a name="7b2a"></a><b>7b2a</b>   60         RTS 
</div>
<a name="7b2b"></a>


<b>.GameIRQActions</b>

<div class="disass_code"><b>7b2b</b>   a5 a7      LDA .MarqueeOrGameArea
<b>7b2d</b>   f0 01      BEQ <a href="#7b30">.__GameIRQActions__InBody</a>
<b>7b2f</b>   60         RTS 
</div>
<a name="7b30"></a>


<b>.__GameIRQActions__InBody</b>

<div class="disass_code"><b>7b30</b>   20 58 79   JSR <a href="#7958">.WhiteFlash</a>
<b>7b33</b>   20 a9 77   JSR <a href="#77a9">.PlayRevealLevelSoundAndRedefineChar</a>
<b>7b36</b>   20 07 7b   JSR <a href="#7b07">.HandleMagicWallState</a>
<b>7b39</b>   20 11 71   JSR <a href="#7111">.HandleTick</a>
<b>7b3c</b>   20 71 79   JSR <a href="#7971">.SoundFX</a>
<b>7b3f</b>   e6 c2      INC .AnotherFrameCounter
<b>7b41</b>   20 ad 76   JSR <a href="#76ad">.Scroller</a>
<b>7b44</b>   a5 c2      LDA .AnotherFrameCounter
<b>7b46</b>   29 01      AND #$01
<b>7b48</b>   d0 0b      BNE <a href="#7b55">.__GameIRQActions__CopyExpandedLatticeToBackBuffer</a>
</div>



<b>.__GameIRQActions__FlipBuffers</b>

<div class="disass_code"><b>7b4a</b>   ad 07 98   LDA .BackBufferVICMemControl
<b>7b4d</b>   85 58      STA .RastInt_vic_memory_control[]
<b>7b4f</b>   49 80      EOR #$80
<b>7b51</b>   8d 07 98   STA .BackBufferVICMemControl
<b>7b54</b>   60         RTS 
</div>
<a name="7b55"></a>


<b>.__GameIRQActions__CopyExpandedLatticeToBackBuffer</b>

<div class="disass_code"><b>7b55</b>   4c 00 9e   JMP .MOVEDCopyExpandedLatticeSubsetToBackBuffer
</div>


<div class="disass_comment">; 
; Code moved to $9e00 and executed there. Is self-modifying!
; $7b58-$7d57 is moved to $9e00-$9fff. More code than needed is moved. 
; The routine occupies $7b58-$7c90.
; 
</div>

<b>.CopyExpandedLatticeSubsetToBackBuffer</b>

<div class="disass_code"><b>7b58</b>   a5 d6      LDA .ExpandedLatticeSubsetPtrL
<b>7b5a</b>   18         CLC 
<b>7b5b</b>   69 20      ADC #$20
<b>7b5d</b>   8d 51 9e   STA $9e51
</div>


<div class="disass_comment">; Patched byte corresponds to $7ba9.
</div>


<div class="disass_code"><b>7b60</b>   a5 d7      LDA .ExpandedLatticeSubsetPtrH
<b>7b62</b>   69 03      ADC #$03
<b>7b64</b>   8d 52 9e   STA $9e52
</div>


<div class="disass_comment">; Patched byte corresponds to $7baa.
</div>


<div class="disass_code"><b>7b67</b>   ad 07 98   LDA .BackBufferVICMemControl
<b>7b6a</b>   4a         LSR A
<b>7b6b</b>   4a         LSR A
<b>7b6c</b>   49 03      EOR #$03
<b>7b6e</b>   18         CLC 
<b>7b6f</b>   69 01      ADC #$01
<b>7b71</b>   8d 55 9e   STA $9e55
</div>


<div class="disass_comment">; Patched byte corresponds to $7bad.
</div>


<div class="disass_code"><b>7b74</b>   a9 b8      LDA #$b8
<b>7b76</b>   8d 54 9e   STA $9e54
</div>


<div class="disass_comment">; Patched byte corresponds to $7bac.
; 
; Now clone the patch (with adjustment) for the next 13 entries.
</div>


<div class="disass_code"><b>7b79</b>   a2 00      LDX #$00
<a name="7b7b"></a><b>7b7b</b>   bd 51 9e   LDA $9e51,X
<b>7b7e</b>   18         CLC 
<b>7b7f</b>   69 50      ADC #$50
<b>7b81</b>   9d 57 9e   STA $9e57,X
<b>7b84</b>   bd 52 9e   LDA $9e52,X
<b>7b87</b>   69 00      ADC #$00
<b>7b89</b>   9d 58 9e   STA $9e58,X
<b>7b8c</b>   bd 54 9e   LDA $9e54,X
<b>7b8f</b>   18         CLC 
<b>7b90</b>   69 28      ADC #$28
<b>7b92</b>   9d 5a 9e   STA $9e5a,X
<b>7b95</b>   bd 55 9e   LDA $9e55,X
<b>7b98</b>   69 00      ADC #$00
<b>7b9a</b>   9d 5b 9e   STA $9e5b,X
<b>7b9d</b>   8a         TXA 
<b>7b9e</b>   18         CLC 
<b>7b9f</b>   69 06      ADC #$06
<b>7ba1</b>   aa         TAX 
<b>7ba2</b>   e0 4e      CPX #$4e
<b>7ba4</b>   90 d5      BCC <a href="#7b7b">$7b7b</a>
</div>


<div class="disass_comment">; 
; Now move the lower 14 lines of the subset to the lower 14 lines
; of the screen back-buffer.
</div>


<div class="disass_code"><b>7ba6</b>   a2 27      LDX #$27
<a name="7ba8"></a><b>7ba8</b>   bd 00 50   LDA <a href="#5000">.TitleCharDataBlock0</a>,X
<b>7bab</b>   9d 50 0c   STA $0c50,X
<b>7bae</b>   bd 00 50   LDA <a href="#5000">.TitleCharDataBlock0</a>,X
<b>7bb1</b>   9d 50 0c   STA $0c50,X
<b>7bb4</b>   bd 00 50   LDA <a href="#5000">.TitleCharDataBlock0</a>,X
<b>7bb7</b>   9d 50 0c   STA $0c50,X
<b>7bba</b>   bd 00 50   LDA <a href="#5000">.TitleCharDataBlock0</a>,X
<b>7bbd</b>   9d 50 0c   STA $0c50,X
<b>7bc0</b>   bd 00 50   LDA <a href="#5000">.TitleCharDataBlock0</a>,X
<b>7bc3</b>   9d 50 0c   STA $0c50,X
<b>7bc6</b>   bd 00 50   LDA <a href="#5000">.TitleCharDataBlock0</a>,X
<b>7bc9</b>   9d 50 0c   STA $0c50,X
<b>7bcc</b>   bd 00 50   LDA <a href="#5000">.TitleCharDataBlock0</a>,X
<b>7bcf</b>   9d 50 0c   STA $0c50,X
<b>7bd2</b>   bd 00 50   LDA <a href="#5000">.TitleCharDataBlock0</a>,X
<b>7bd5</b>   9d 50 0c   STA $0c50,X
<b>7bd8</b>   bd 00 50   LDA <a href="#5000">.TitleCharDataBlock0</a>,X
<b>7bdb</b>   9d 50 0c   STA $0c50,X
<b>7bde</b>   bd 00 50   LDA <a href="#5000">.TitleCharDataBlock0</a>,X
<b>7be1</b>   9d 50 0c   STA $0c50,X
<b>7be4</b>   bd 00 50   LDA <a href="#5000">.TitleCharDataBlock0</a>,X
<b>7be7</b>   9d 50 0c   STA $0c50,X
<b>7bea</b>   bd 00 50   LDA <a href="#5000">.TitleCharDataBlock0</a>,X
<b>7bed</b>   9d 50 0c   STA $0c50,X
<b>7bf0</b>   bd 00 50   LDA <a href="#5000">.TitleCharDataBlock0</a>,X
<b>7bf3</b>   9d 50 0c   STA $0c50,X
<b>7bf6</b>   bd 00 50   LDA <a href="#5000">.TitleCharDataBlock0</a>,X
<b>7bf9</b>   9d 50 0c   STA $0c50,X
<b>7bfc</b>   ca         DEX 
<b>7bfd</b>   10 a9      BPL <a href="#7ba8">$7ba8</a>
</div>


<div class="disass_comment">; 
</div>


<div class="disass_code"><b>7bff</b>   ad 07 98   LDA .BackBufferVICMemControl
<b>7c02</b>   4a         LSR A
<b>7c03</b>   4a         LSR A
<b>7c04</b>   49 03      EOR #$03
<b>7c06</b>   8d f4 9e   STA $9ef4
</div>


<div class="disass_comment">; Patched byte corresponds to $9ef4
</div>


<div class="disass_code"><b>7c09</b>   a9 28      LDA #$28
<b>7c0b</b>   8d f3 9e   STA $9ef3
</div>


<div class="disass_comment">; Patched byte corresponds to $9ef3
</div>


<div class="disass_code"><b>7c0e</b>   a5 d6      LDA .ExpandedLatticeSubsetPtrL
<b>7c10</b>   8d f0 9e   STA $9ef0
</div>


<div class="disass_comment">; Patched byte corresponds to $9ef0
</div>


<div class="disass_code"><b>7c13</b>   a5 d7      LDA .ExpandedLatticeSubsetPtrH
<b>7c15</b>   8d f1 9e   STA $9ef1
</div>


<div class="disass_comment">; Patched byte corresponds to $9ef1
; 
; Now clone the patch (with adjustment) for the next 9 entries.	
</div>


<div class="disass_code"><b>7c18</b>   a2 00      LDX #$00
<a name="7c1a"></a><b>7c1a</b>   bd f0 9e   LDA $9ef0,X
<b>7c1d</b>   18         CLC 
<b>7c1e</b>   69 50      ADC #$50
<b>7c20</b>   9d f6 9e   STA $9ef6,X
<b>7c23</b>   bd f1 9e   LDA $9ef1,X
<b>7c26</b>   69 00      ADC #$00
<b>7c28</b>   9d f7 9e   STA $9ef7,X
<b>7c2b</b>   bd f3 9e   LDA $9ef3,X
<b>7c2e</b>   18         CLC 
<b>7c2f</b>   69 28      ADC #$28
<b>7c31</b>   9d f9 9e   STA $9ef9,X
<b>7c34</b>   bd f4 9e   LDA $9ef4,X
<b>7c37</b>   69 00      ADC #$00
<b>7c39</b>   9d fa 9e   STA $9efa,X
<b>7c3c</b>   8a         TXA 
<b>7c3d</b>   18         CLC 
<b>7c3e</b>   69 06      ADC #$06
<b>7c40</b>   aa         TAX 
<b>7c41</b>   e0 36      CPX #$36
<b>7c43</b>   90 d5      BCC <a href="#7c1a">$7c1a</a>
</div>


<div class="disass_comment">; 
; Now move the upper 10 lines of the subset to the upper 10 lines
; of the screen back-buffer ***NOT*** including the top line.
</div>


<div class="disass_code"><b>7c45</b>   a2 27      LDX #$27
<a name="7c47"></a><b>7c47</b>   bd 00 50   LDA <a href="#5000">.TitleCharDataBlock0</a>,X
<b>7c4a</b>   9d 50 0c   STA $0c50,X
<b>7c4d</b>   bd 00 50   LDA <a href="#5000">.TitleCharDataBlock0</a>,X
<b>7c50</b>   9d 50 0c   STA $0c50,X
<b>7c53</b>   bd 00 50   LDA <a href="#5000">.TitleCharDataBlock0</a>,X
<b>7c56</b>   9d 50 0c   STA $0c50,X
<b>7c59</b>   bd 00 50   LDA <a href="#5000">.TitleCharDataBlock0</a>,X
<b>7c5c</b>   9d 50 0c   STA $0c50,X
<b>7c5f</b>   bd 00 50   LDA <a href="#5000">.TitleCharDataBlock0</a>,X
<b>7c62</b>   9d 50 0c   STA $0c50,X
<b>7c65</b>   bd 00 50   LDA <a href="#5000">.TitleCharDataBlock0</a>,X
<b>7c68</b>   9d 50 0c   STA $0c50,X
<b>7c6b</b>   bd 00 50   LDA <a href="#5000">.TitleCharDataBlock0</a>,X
<b>7c6e</b>   9d 50 0c   STA $0c50,X
<b>7c71</b>   bd 00 50   LDA <a href="#5000">.TitleCharDataBlock0</a>,X
<b>7c74</b>   9d 50 0c   STA $0c50,X
<b>7c77</b>   bd 00 50   LDA <a href="#5000">.TitleCharDataBlock0</a>,X
<b>7c7a</b>   9d 50 0c   STA $0c50,X
<b>7c7d</b>   bd 00 50   LDA <a href="#5000">.TitleCharDataBlock0</a>,X
<b>7c80</b>   9d 50 0c   STA $0c50,X
<b>7c83</b>   ca         DEX 
<b>7c84</b>   10 c1      BPL <a href="#7c47">$7c47</a>
<b>7c86</b>   20 f7 7a   JSR <a href="#7af7">.Animate</a>
<b>7c89</b>   a5 a8      LDA .ExtraLifeFXCounter
<b>7c8b</b>   f0 03      BEQ <a href="#7c90">$7c90</a>
<b>7c8d</b>   20 54 74   JSR <a href="#7454">.ExtraLifeFX</a>
<a name="7c90"></a><b>7c90</b>   60         RTS 
</div>
<a name="7c91"></a>

<div class="disass_comment">; 
</div>

<b>.InstallRandomCaveObjectForCell</b>

<div class="disass_code"><b>7c91</b>   a2 01      LDX #$01
<b>7c93</b>   20 ed 6c   JSR <a href="#6ced">.PseudoRandom</a>
<b>7c96</b>   a0 00      LDY #$00
</div>
<a name="7c98"></a>


<b>._RandomObjTestLoop</b>

<div class="disass_code"><b>7c98</b>   d9 1c 24   CMP .BufferedLevel_ProbabilityOfObject1,Y
<b>7c9b</b>   b0 03      BCS <a href="#7ca0">._NotThisRandomObject</a>
</div>



<b>__.FWDAROProcessRandomObjectsForCell__FoundACandidate</b>

<div class="disass_comment">; BufferedLevel_ProbabilityOfObject1 > AF
</div>
<div class="disass_code"><b>7c9d</b>   be 18 24   LDX .BufferedLevel_RandomObjectNumber1,Y
</div>
<a name="7ca0"></a>


<b>._NotThisRandomObject</b>

<div class="disass_code"><b>7ca0</b>   c8         INY 
<b>7ca1</b>   c0 04      CPY #$04
<b>7ca3</b>   d0 f3      BNE <a href="#7c98">._RandomObjTestLoop</a>
</div>



<b>__.FWDAROProcessRandomObjectsForCell__CheckedAllRandomObjects</b>

<div class="disass_code"><b>7ca5</b>   8a         TXA 
<b>7ca6</b>   a0 29      LDY #$29
<b>7ca8</b>   91 32      STA (.WorldCurrentCellPtrLow),Y
<b>7caa</b>   60         RTS 
</div>
<a name="7cab"></a>

<div class="disass_comment">; 
</div>

<b>.PlaceRandomObjs</b>

<div class="disass_code"><b>7cab</b>   a9 01      LDA #$01
<b>7cad</b>   85 92      STA .CaveMatrixY
<b>7caf</b>   20 cd 76   JSR <a href="#76cd">.ResetWorldCurrentCellPtr</a>
</div>
<a name="7cb2"></a>


<b>._PlaceRandomObjsNextRow</b>

<div class="disass_code"><b>7cb2</b>   a9 00      LDA #$00
<b>7cb4</b>   85 91      STA .CaveMatrixX
</div>
<a name="7cb6"></a>


<b>._PlaceRandomObjsNextCol</b>

<div class="disass_code"><b>7cb6</b>   20 91 7c   JSR <a href="#7c91">.InstallRandomCaveObjectForCell</a>
<b>7cb9</b>   20 c6 76   JSR <a href="#76c6">.AdvanceWorldCurrentCellPtr</a>
<b>7cbc</b>   e6 91      INC .CaveMatrixX
<b>7cbe</b>   a5 91      LDA .CaveMatrixX
<b>7cc0</b>   c9 28      CMP #$28
<b>7cc2</b>   d0 f2      BNE <a href="#7cb6">._PlaceRandomObjsNextCol</a>
<b>7cc4</b>   e6 92      INC .CaveMatrixY
<b>7cc6</b>   a5 92      LDA .CaveMatrixY
<b>7cc8</b>   c9 16      CMP #$16
<b>7cca</b>   d0 e6      BNE <a href="#7cb2">._PlaceRandomObjsNextRow</a>
<b>7ccc</b>   60         RTS 
</div>
<a name="7ccd"></a>

<div class="disass_comment">; 
</div>

<b>.CaveLevelDelayValueTable</b>

<div class="disass_code"><b>7ccd</b>   0c 06 03 01  00
</div>
<a name="7cd2"></a>


<b>.WorldRowTransitionDelay</b>

<div class="disass_code"><b>7cd2</b>   a4 9c      LDY .CurrentDelayValue
<b>7cd4</b>   f0 08      BEQ <a href="#7cde">$7cde</a>
<a name="7cd6"></a><b>7cd6</b>   a2 10      LDX #$10
<a name="7cd8"></a><b>7cd8</b>   ca         DEX 
<b>7cd9</b>   d0 fd      BNE <a href="#7cd8">$7cd8</a>
<b>7cdb</b>   88         DEY 
<b>7cdc</b>   d0 f8      BNE <a href="#7cd6">$7cd6</a>
<a name="7cde"></a><b>7cde</b>   60         RTS 
</div>
<a name="7cdf"></a>


<b>.ResetVoice1</b>

<div class="disass_code"><b>7cdf</b>   a2 04      LDX #$04
</div>


<div class="disass_comment">; .Sid_Voice1Ctrl
</div>


<div class="disass_code"><b>7ce1</b>   d0 06      BNE <a href="#7ce9">$7ce9</a>
</div>
<a name="7ce3"></a>


<b>.ResetVoice2</b>

<div class="disass_code"><b>7ce3</b>   a2 0b      LDX #$0b
</div>


<div class="disass_comment">; .Sid_Voice2Ctrl
</div>


<div class="disass_code"><b>7ce5</b>   d0 02      BNE <a href="#7ce9">$7ce9</a>
</div>
<a name="7ce7"></a>


<b>.ResetVoice3</b>

<div class="disass_code"><b>7ce7</b>   a2 12      LDX #$12
</div>
<a name="7ce9"></a>

<div class="disass_comment">; .Sid_Voice3Ctrl
</div>


<div class="disass_code"><b>7ce9</b>   a9 08      LDA #$08
<b>7ceb</b>   9d 00 d4   STA .Sid_Voice1FreqLo,X
<b>7cee</b>   a9 00      LDA #$00
<b>7cf0</b>   9d 00 d4   STA .Sid_Voice1FreqLo,X
</div>


<div class="disass_comment">; .Sid_VoiceXCtrl
; 7      Select Random Noise Waveform, 1 = On
; 6      Select Pulse Waveform, 1 = On
; 5      Select Sawtooth Waveform, 1 = On
; 4      Select Triangle Waveform, 1 = On
; 3      Test Bit: 1 = Disable Oscillator
; 2      Ring Modulate Osc. X with Osc. X-1 Output, 1 = On
; 1      Synchronize Osc. X with Osc. X-1 Frequency, 1 = On
; 0      Gate Bit: 1 = Start Att/Dec/Sus, 0 = Start Release
</div>


<div class="disass_code"><b>7cf3</b>   60         RTS 
</div>
<a name="7cf4"></a>


<b>.ResetSound</b>

<div class="disass_code"><b>7cf4</b>   20 df 7c   JSR <a href="#7cdf">.ResetVoice1</a>
<b>7cf7</b>   20 e3 7c   JSR <a href="#7ce3">.ResetVoice2</a>
<b>7cfa</b>   20 e7 7c   JSR <a href="#7ce7">.ResetVoice3</a>
<b>7cfd</b>   a9 4f      LDA #$4f
<b>7cff</b>   8d 18 d4   STA .Sid_FilterModeAndVolume
</div>


<div class="disass_comment">; 
; .Sid_FilterModeAndVolume
; Select Filter Mode and Volume
; 7      Cut-Off Voice 3 Output: 1 = Off, 0 = On
; 6      Select Filter High-Pass Mode: 1 = On
; 5      Select Filter Band-Pass Mode: 1 = On
; 4      Select Filter Low-Pass Mode: 1 = On
; 3-0    Select Output Volume: 0-15
</div>


<div class="disass_code"><b>7d02</b>   60         RTS 
</div>
<a name="7d03"></a>


<b>.Delay</b>

<div class="disass_code"><b>7d03</b>   a0 80      LDY #$80
<a name="7d05"></a><b>7d05</b>   ca         DEX 
<b>7d06</b>   d0 fd      BNE <a href="#7d05">$7d05</a>
<b>7d08</b>   88         DEY 
<b>7d09</b>   d0 fa      BNE <a href="#7d05">$7d05</a>
<b>7d0b</b>   60         RTS 
</div>
<a name="7d0c"></a>


<b>.FourDelays</b>

<div class="disass_code"><b>7d0c</b>   20 03 7d   JSR <a href="#7d03">.Delay</a>
<b>7d0f</b>   20 03 7d   JSR <a href="#7d03">.Delay</a>
<b>7d12</b>   20 03 7d   JSR <a href="#7d03">.Delay</a>
<b>7d15</b>   20 03 7d   JSR <a href="#7d03">.Delay</a>
<b>7d18</b>   60         RTS 
</div>
<a name="7d19"></a>

<div class="disass_comment">; 
</div>

<b>DelaySpaceKeyAborts</b>

<div class="disass_code"><b>7d19</b>   a0 90      LDY #$90
<a name="7d1b"></a><b>7d1b</b>   a2 00      LDX #$00
<a name="7d1d"></a><b>7d1d</b>   a5 fc      LDA .LastKeyInScanRow7_ScannedMoreThanOnce
<b>7d1f</b>   c9 ef      CMP #$ef
<b>7d21</b>   d0 01      BNE <a href="#7d24">$7d24</a>
<b>7d23</b>   60         RTS 
<a name="7d24"></a><b>7d24</b>   ca         DEX 
<b>7d25</b>   d0 f6      BNE <a href="#7d1d">$7d1d</a>
<b>7d27</b>   88         DEY 
<b>7d28</b>   d0 f1      BNE <a href="#7d1b">$7d1b</a>
<b>7d2a</b>   60         RTS 
</div>
<a name="7d2b"></a>

<div class="disass_comment">; 
; While paused we spin in this function until we're unpaused.
</div>

<b>PauseLoop</b>

<div class="disass_code"><b>7d2b</b>   20 04 6b   JSR <a href="#6b04">.BackupTopLine</a>
</div>


<div class="disass_comment">; .spacebar.to.resume.
</div>


<div class="disass_code"><b>7d2e</b>   a9 58      LDA #$58
<b>7d30</b>   85 46      STA .__Local1__
<b>7d32</b>   a9 6c      LDA #$6c
<b>7d34</b>   85 47      STA .__Local2__
<b>7d36</b>   20 16 6b   JSR <a href="#6b16">.SetTopLineText</a>
<b>7d39</b>   a5 9b      LDA .UNSURE__AmoebaOrMagicWallRunningFlag
<b>7d3b</b>   c9 01      CMP #$01
<b>7d3d</b>   d0 07      BNE <a href="#7d46">$7d46</a>
<b>7d3f</b>   e6 9b      INC .UNSURE__AmoebaOrMagicWallRunningFlag
<b>7d41</b>   20 03 7d   JSR <a href="#7d03">.Delay</a>
<b>7d44</b>   85 fc      STA .LastKeyInScanRow7_ScannedMoreThanOnce
<a name="7d46"></a><b>7d46</b>   20 19 7d   JSR <a href="#7d19">DelaySpaceKeyAborts</a>
<b>7d49</b>   a9 62      LDA #$62
<b>7d4b</b>   85 46      STA .__Local1__
<b>7d4d</b>   a9 98      LDA #$98
<b>7d4f</b>   85 47      STA .__Local2__
<b>7d51</b>   20 16 6b   JSR <a href="#6b16">.SetTopLineText</a>
<b>7d54</b>   20 19 7d   JSR <a href="#7d19">DelaySpaceKeyAborts</a>
<b>7d57</b>   20 19 7d   JSR <a href="#7d19">DelaySpaceKeyAborts</a>
<b>7d5a</b>   20 19 7d   JSR <a href="#7d19">DelaySpaceKeyAborts</a>
<b>7d5d</b>   a5 fc      LDA .LastKeyInScanRow7_ScannedMoreThanOnce
<b>7d5f</b>   c9 ef      CMP #$ef
<b>7d61</b>   d0 c8      BNE <a href="#7d2b">PauseLoop</a>
<b>7d63</b>   20 03 7d   JSR <a href="#7d03">.Delay</a>
<b>7d66</b>   a9 00      LDA #$00
<b>7d68</b>   85 fc      STA .LastKeyInScanRow7_ScannedMoreThanOnce
<b>7d6a</b>   60         RTS 
</div>
<a name="7d6b"></a>

<div class="disass_comment">; 
</div>

<b>.HandleInGameKeys</b>

<div class="disass_code"><b>7d6b</b>   a5 fc      LDA .LastKeyInScanRow7_ScannedMoreThanOnce
<b>7d6d</b>   c9 ef      CMP #$ef
<b>7d6f</b>   d0 12      BNE <a href="#7d83">$7d83</a>
</div>


<div class="disass_comment">; Pause game.
</div>

<b>.__HandleInGameKeys__SpacePressed</b>

<div class="disass_code"><b>7d71</b>   a2 00      LDX #$00
<b>7d73</b>   86 94      STX .EnableIRQTriggeredSFXAndTopLineUpdates
<b>7d75</b>   20 f4 7c   JSR <a href="#7cf4">.ResetSound</a>
<b>7d78</b>   e6 9b      INC .UNSURE__AmoebaOrMagicWallRunningFlag
<b>7d7a</b>   20 2b 7d   JSR <a href="#7d2b">PauseLoop</a>
<b>7d7d</b>   a9 00      LDA #$00
<b>7d7f</b>   85 9b      STA .UNSURE__AmoebaOrMagicWallRunningFlag
<b>7d81</b>   e6 94      INC .EnableIRQTriggeredSFXAndTopLineUpdates
<a name="7d83"></a><b>7d83</b>   a5 fc      LDA .LastKeyInScanRow7_ScannedMoreThanOnce
<b>7d85</b>   c9 7f      CMP #$7f
<b>7d87</b>   d0 0c      BNE <a href="#7d95">$7d95</a>
</div>


<div class="disass_comment">; Suicide.
</div>

<b>.__HandleInGameKeys__RunStopPressed</b>

<div class="disass_code"><b>7d89</b>   a5 95      LDA .GeneralTimeRemaining
<b>7d8b</b>   d0 08      BNE <a href="#7d95">$7d95</a>
<b>7d8d</b>   a9 00      LDA #$00
<b>7d8f</b>   85 94      STA .EnableIRQTriggeredSFXAndTopLineUpdates
<b>7d91</b>   a9 02      LDA #$02
<b>7d93</b>   85 97      STA .__UnknownZP_97
<a name="7d95"></a><b>7d95</b>   a9 00      LDA #$00
<b>7d97</b>   85 fc      STA .LastKeyInScanRow7_ScannedMoreThanOnce
<b>7d99</b>   a5 fb      LDA .LastKeyInScanRow0_ScannedMoreThanOnce
<b>7d9b</b>   c9 ef      CMP #$ef
<b>7d9d</b>   d0 03      BNE <a href="#7da2">$7da2</a>
</div>


<div class="disass_comment">; Back to title screen.
</div>

<b>.__HandleInGameKeys_F1Pressed</b>

<div class="disass_code"><b>7d9f</b>   4c b3 8a   JMP <a href="#8ab3">.Start</a>
<a name="7da2"></a><b>7da2</b>   60         RTS 
</div>
<a name="7da3"></a>

<div class="disass_comment">; 
; Remember that this runs before the tick so 'ThisTick' refers to the previous one.
; 
; In C the function looks like this:
; 
; if (!.AmeobaCouldGrowThisTick && .AmoebaIsGrowingAndAmoebaSFX)
; {
; .AmeobaCouldGrowLastTick = false;
; }
; 
; .AmoebaIsGrowingAndAmoebaSFX = AmeobaCouldGrowThisTick
; 
; .AmeobaCouldGrowThisTick = false;
; .AmoebaCellCountPreviousTick = AmoebaCellCountThisTick;
; .AmoebaCellCountThisTick = 0;
</div>

<b>.PreTickAmoebaProcessing</b>

<div class="disass_code"><b>7da3</b>   a5 42      LDA .AmeobaCouldGrowThisTick
<b>7da5</b>   d0 08      BNE <a href="#7daf">$7daf</a>
<b>7da7</b>   a5 43      LDA .AmoebaIsGrowingAndAmoebaSFX
<b>7da9</b>   f0 04      BEQ <a href="#7daf">$7daf</a>
<b>7dab</b>   a9 00      LDA #$00
<b>7dad</b>   85 8c      STA .AmeobaCouldGrowLastTick
<a name="7daf"></a><b>7daf</b>   a5 42      LDA .AmeobaCouldGrowThisTick
<b>7db1</b>   85 43      STA .AmoebaIsGrowingAndAmoebaSFX
</div>


<div class="disass_comment">; Reset variables for next frame.
</div>


<div class="disass_code"><b>7db3</b>   a9 00      LDA #$00
<b>7db5</b>   85 42      STA .AmeobaCouldGrowThisTick
<b>7db7</b>   ad 02 98   LDA .AmoebaCellCountThisTick
<b>7dba</b>   8d 03 98   STA .AmoebaCellCountPreviousTick
<b>7dbd</b>   a9 00      LDA #$00
<b>7dbf</b>   8d 02 98   STA .AmoebaCellCountThisTick
<b>7dc2</b>   60         RTS 
</div>
<a name="7dc3"></a>

<div class="disass_comment">; 
; After Rockford has been dead for 16 ticks pressing fire continues.
</div>

<b>.DeathClick</b>

<div class="disass_code"><b>7dc3</b>   20 69 6b   JSR <a href="#6b69">.ReadFireButtonCurrentPlayer</a>
<b>7dc6</b>   a5 96      LDA .RockfordDeadTicks
<b>7dc8</b>   c9 10      CMP #$10
<b>7dca</b>   d0 0c      BNE <a href="#7dd8">$7dd8</a>
<b>7dcc</b>   a5 b8      LDA .FireButtonStatus
<b>7dce</b>   d0 08      BNE <a href="#7dd8">$7dd8</a>
<b>7dd0</b>   a5 af      LDA .TimeCaveHasRan
<b>7dd2</b>   f0 04      BEQ <a href="#7dd8">$7dd8</a>
<b>7dd4</b>   a9 02      LDA #$02
<b>7dd6</b>   85 97      STA .__UnknownZP_97
<a name="7dd8"></a><b>7dd8</b>   60         RTS 
</div>
<a name="7dd9"></a>

<div class="disass_comment">; 
</div>

<b>.ProcessWorld</b>

<div class="disass_code"><b>7dd9</b>   a9 16      LDA #$16
<b>7ddb</b>   85 02      STA .__CoverLevel__LineAddressTable[24]
<b>7ddd</b>   a5 5d      LDA .Cave
<b>7ddf</b>   c9 11      CMP #$11
<b>7de1</b>   90 04      BCC <a href="#7de7">.__ProcessWorld__NotBonusCave</a>
</div>



<b>.__ProcessWorld__BonusCave</b>

<div class="disass_code"><b>7de3</b>   a9 0f      LDA #$0f
<b>7de5</b>   85 02      STA .__CoverLevel__LineAddressTable[24]
</div>
<a name="7de7"></a>


<b>.__ProcessWorld__NotBonusCave</b>

<div class="disass_code"><b>7de7</b>   a9 01      LDA #$01
<b>7de9</b>   85 92      STA .CaveMatrixY
<b>7deb</b>   20 cd 76   JSR <a href="#76cd">.ResetWorldCurrentCellPtr</a>
<b>7dee</b>   a9 10      LDA #$10
<b>7df0</b>   c5 96      CMP .RockfordDeadTicks
<b>7df2</b>   f0 02      BEQ <a href="#7df6">$7df6</a>
<b>7df4</b>   e6 96      INC .RockfordDeadTicks
<a name="7df6"></a><b>7df6</b>   20 c3 7d   JSR <a href="#7dc3">.DeathClick</a>
<b>7df9</b>   20 a3 7d   JSR <a href="#7da3">.PreTickAmoebaProcessing</a>
</div>
<a name="7dfc"></a>


<b>.__ProcessWorld__NewRow</b>

<div class="disass_code"><b>7dfc</b>   a9 00      LDA #$00
<b>7dfe</b>   85 91      STA .CaveMatrixX
</div>
<a name="7e00"></a>


<b>.__ProcessWorld__ProcessCurrentCell</b>

<div class="disass_code"><b>7e00</b>   a0 29      LDY #$29
<b>7e02</b>   b1 32      LDA (.WorldCurrentCellPtrLow),Y
<b>7e04</b>   0a         ASL A
<b>7e05</b>   aa         TAX 
<b>7e06</b>   bd 69 5f   LDA <a href="#5f68">.ObjHandlerVectorTableLo</a>+1,X
<b>7e09</b>   f0 0a      BEQ <a href="#7e15">.__ProcessWorld__NoObjectHandler</a>
</div>



<b>.__ProcessWorld__ObjectHandler</b>

<div class="disass_code"><b>7e0b</b>   85 39      STA .ObjHandlerVectorHi
<b>7e0d</b>   bd 68 5f   LDA <a href="#5f68">.ObjHandlerVectorTableLo</a>,X
<b>7e10</b>   85 38      STA .ObjHandlerVectorLo
<b>7e12</b>   6c 38 00   JMP (.ObjHandlerVectorLo)
</div>
<a name="7e15"></a>


<b>.__ProcessWorld__NoObjectHandler</b>

<div class="disass_code"><b>7e15</b>   a0 00      LDY #$00
<b>7e17</b>   b1 32      LDA (.WorldCurrentCellPtrLow),Y
<b>7e19</b>   aa         TAX 
<b>7e1a</b>   bd e8 5e   LDA .ObjCodeFromScannedThisFrameCodeTable,X
<b>7e1d</b>   f0 02      BEQ <a href="#7e21">.__ProcessWorld__NextCell</a>
</div>



<b>.__ProcessWorld__TurnTrailerToBaseType</b>

<div class="disass_code"><b>7e1f</b>   91 32      STA (.WorldCurrentCellPtrLow),Y
</div>
<a name="7e21"></a>


<b>.__ProcessWorld__NextCell</b>

<div class="disass_code"><b>7e21</b>   e6 32      INC .WorldCurrentCellPtrLow
<b>7e23</b>   d0 02      BNE <a href="#7e27">.__ProcessWorld__IncX</a>
</div>



<b>.__ProcessWorld__BumpUpCellPtrHigh</b>

<div class="disass_code"><b>7e25</b>   e6 33      INC .WorldCurrentCellPtrHigh
</div>
<a name="7e27"></a>


<b>.__ProcessWorld__IncX</b>

<div class="disass_code"><b>7e27</b>   e6 91      INC .CaveMatrixX
<b>7e29</b>   a5 91      LDA .CaveMatrixX
<b>7e2b</b>   c9 28      CMP #$28
<b>7e2d</b>   d0 d1      BNE <a href="#7e00">.__ProcessWorld__ProcessCurrentCell</a>
</div>



<b>.__ProcessWorld__NextRow</b>

<div class="disass_code"><b>7e2f</b>   20 d2 7c   JSR <a href="#7cd2">.WorldRowTransitionDelay</a>
<b>7e32</b>   e6 92      INC .CaveMatrixY
<b>7e34</b>   a5 92      LDA .CaveMatrixY
<b>7e36</b>   c5 02      CMP .__CoverLevel__LineAddressTable[24]
<b>7e38</b>   d0 c2      BNE <a href="#7dfc">.__ProcessWorld__NewRow</a>
<b>7e3a</b>   20 6b 7d   JSR <a href="#7d6b">.HandleInGameKeys</a>
<b>7e3d</b>   60         RTS 
</div>
<a name="7e3e"></a>


<b>.?NumTo3DigitDigits?_Data_</b>

<div class="disass_code"><b>7e3e</b>   00 00 01
</div>
<a name="7e41"></a>


<b>.NumTo3DigitDigits</b>

<div class="disass_code"><b>7e41</b>   a2 02      LDX #$02
<b>7e43</b>   a9 00      LDA #$00
</div>
<a name="7e45"></a>


<b>.NumTo3DigitDigits__ZeroDigit</b>

<div class="disass_code"><b>7e45</b>   95 c3      STA .NumTo3DigitDigits__Result,X
<b>7e47</b>   ca         DEX 
<b>7e48</b>   10 fb      BPL <a href="#7e45">.NumTo3DigitDigits__ZeroDigit</a>
</div>



<b>.NumTo3DigitDigits__CheckForTrivialCase</b>

<div class="disass_code"><b>7e4a</b>   a5 c6      LDA .NumTo3DigitDigits__NumberToConvert
<b>7e4c</b>   f0 17      BEQ <a href="#7e65">.NextCaveAndBonusFlagTable</a>
</div>
<a name="7e4e"></a>


<b>.NumTo3DigitDigits__NonTrivialCase</b>

<div class="disass_code"><b>7e4e</b>   a2 02      LDX #$02
<b>7e50</b>   18         CLC 
</div>
<a name="7e51"></a>


<b>.NumTo3DigitDigits__IncrementResultLoop</b>

<div class="disass_code"><b>7e51</b>   b5 c3      LDA .NumTo3DigitDigits__Result,X
<b>7e53</b>   7d 3e 7e   ADC <a href="#7e3e">.?NumTo3DigitDigits?_Data_</a>,X
<b>7e56</b>   c9 0a      CMP #$0a
<b>7e58</b>   90 02      BCC <a href="#7e5c">$7e5c</a>
<b>7e5a</b>   e9 0a      SBC #$0a
<a name="7e5c"></a><b>7e5c</b>   95 c3      STA .NumTo3DigitDigits__Result,X
<b>7e5e</b>   ca         DEX 
<b>7e5f</b>   10 f0      BPL <a href="#7e51">.NumTo3DigitDigits__IncrementResultLoop</a>
</div>



<b>.NumTo3DigitDigits__CheckIfDone</b>

<div class="disass_code"><b>7e61</b>   c6 c6      DEC .NumTo3DigitDigits__NumberToConvert
<b>7e63</b>   d0 e9      BNE <a href="#7e4e">.NumTo3DigitDigits__NonTrivialCase</a>
</div>
<a name="7e65"></a>


<b>.NextCaveAndBonusFlagTable</b>

<div class="disass_code"><b>7e65</b>   60         RTS 
</div>


<div class="disass_comment">; 
; 0: Next level
; 1: Is bonus cave
</div>

<b>.LevelSequenceAndBonusLevelStatusArray</b>

<div class="disass_code"><b>7e66</b>   02 00 03 00  04 00 11 00  06 00 07 00  08 00 12 00
<b>7e76</b>   0a 00 0b 00  0c 00 13 00  0e 00 0f 00  10 00 14 00
<b>7e86</b>   05 01 09 01  0d 01 15 01
</div>
<a name="7e8e"></a>

<div class="disass_comment">; 
</div>

<b>.LoadCave</b>

<div class="disass_code"><b>7e8e</b>   a5 5d      LDA .Cave
<b>7e90</b>   c5 99      CMP .UnpackedCaveNumber
<b>7e92</b>   f0 24      BEQ <a href="#7eb8">._RawCaveAlreadyCopied</a>
</div>



<b>.__BufferLevel__DoBuffer</b>

<div class="disass_code"><b>7e94</b>   85 99      STA .UnpackedCaveNumber
<b>7e96</b>   0a         ASL A
<b>7e97</b>   aa         TAX 
</div>


<div class="disass_comment">; .NumTo3DigitZeroBasedString__Exit = .LevelSequenceAndBonusLevelStatusArray-1
</div>


<div class="disass_code"><b>7e98</b>   bd 65 7e   LDA <a href="#7e65">.NextCaveAndBonusFlagTable</a>,X
<b>7e9b</b>   85 a6      STA .CurrentBonusLevelFlag
</div>


<div class="disass_comment">; $5806 : .LevelOffsetArray
; $582e : .CaveAData
</div>


<div class="disass_code"><b>7e9d</b>   18         CLC 
<b>7e9e</b>   a9 2e      LDA #$2e
<b>7ea0</b>   7d 04 58   ADC $5804,X
<b>7ea3</b>   85 3c      STA .CurrentLevelDataPtrLow
<b>7ea5</b>   a9 58      LDA #$58
<b>7ea7</b>   7d 05 58   ADC $5805,X
<b>7eaa</b>   85 3d      STA .CurrentLevelDataPtrHigh
<b>7eac</b>   a0 00      LDY #$00
</div>
<a name="7eae"></a>


<b>._CopyRawCaveData</b>

<div class="disass_code"><b>7eae</b>   b1 3c      LDA (.CurrentLevelDataPtrLow),Y
<b>7eb0</b>   99 00 24   STA .BufferedLevel_CaveNumber,Y
<b>7eb3</b>   c8         INY 
<b>7eb4</b>   c0 f0      CPY #$f0
<b>7eb6</b>   d0 f6      BNE <a href="#7eae">._CopyRawCaveData</a>
</div>
<a name="7eb8"></a>


<b>._RawCaveAlreadyCopied</b>

<div class="disass_code"><b>7eb8</b>   a6 5e      LDX .Level
<b>7eba</b>   bd 04 24   LDA .BufferedLevel_InitialRandomSeedForSublevel1,X
<b>7ebd</b>   85 3e      STA .RandSeed2
<b>7ebf</b>   85 40      STA .OrgRandSeed2_UNUSED_
<b>7ec1</b>   a9 00      LDA #$00
<b>7ec3</b>   85 3f      STA .RandSeed1
<b>7ec5</b>   85 41      STA .OrgRandSeed1_UNUSED_
<b>7ec7</b>   ad 13 24   LDA .BufferedLevel_BackgroundColour1
<b>7eca</b>   8d 22 d0   STA .Vic_BkgndColour1
<b>7ecd</b>   ad 14 24   LDA .BufferedLevel_BackgroundColour2
<b>7ed0</b>   8d 23 d0   STA .Vic_BkgndColour2
<b>7ed3</b>   a0 28      LDY #$28
<b>7ed5</b>   ad 15 24   LDA .BufferedLevel_ForegroundColour
<b>7ed8</b>   20 e3 6a   JSR <a href="#6ae3">.SetColourRamForCave</a>
<b>7edb</b>   60         RTS 
</div>
<a name="7edc"></a>

<div class="disass_comment">; $
</div>

<b>.InitVarsBeforePlayingCave</b>

<div class="disass_code"><b>7edc</b>   a9 00      LDA #$00
<b>7ede</b>   85 42      STA .AmeobaCouldGrowThisTick
<b>7ee0</b>   85 43      STA .AmoebaIsGrowingAndAmoebaSFX
<b>7ee2</b>   85 96      STA .RockfordDeadTicks
<b>7ee4</b>   85 97      STA .__UnknownZP_97
<b>7ee6</b>   85 8d      STA .MagicWallActiveState
<b>7ee8</b>   85 8e      STA .MagicWallActiveFrameCounter
<b>7eea</b>   85 8f      STA .MagicWallActiveSeconds
<b>7eec</b>   85 90      STA .LevelCompleteFlag
<b>7eee</b>   8d 02 98   STA .AmoebaCellCountThisTick
<b>7ef1</b>   85 af      STA .TimeCaveHasRan
<b>7ef3</b>   85 ae      STA .SubSecondCounter
<b>7ef5</b>   85 9f      STA .EnteredOutboxFlag
<b>7ef7</b>   85 9b      STA .UNSURE__AmoebaOrMagicWallRunningFlag
<b>7ef9</b>   8d 78 98   STA $9878
<b>7efc</b>   20 86 7a   JSR <a href="#7a86">.RedefineMagicWallCharsToNormalWall</a>
<b>7eff</b>   a6 5e      LDX .Level
<b>7f01</b>   bd cd 7c   LDA <a href="#7ccd">.CaveLevelDelayValueTable</a>,X
<b>7f04</b>   85 9c      STA .CurrentDelayValue
</div>


<div class="disass_comment">; Set cave time limit.
</div>


<div class="disass_code"><b>7f06</b>   bd 0e 24   LDA .BufferedLevel_CaveTimeForSublevel1,X
<b>7f09</b>   85 c7      STA .CaveTimeLimit
<b>7f0b</b>   85 c6      STA .NumTo3DigitDigits__NumberToConvert
<b>7f0d</b>   20 41 7e   JSR <a href="#7e41">.NumTo3DigitDigits</a>
<b>7f10</b>   a2 02      LDX #$02
<a name="7f12"></a><b>7f12</b>   b5 c3      LDA .NumTo3DigitDigits__Result,X
<b>7f14</b>   95 ab      STA .TimeLeftZBS[3],X
<b>7f16</b>   09 10      ORA #$10
<b>7f18</b>   9d 44 98   STA .TimeLeftText[3],X
<b>7f1b</b>   ca         DEX 
<b>7f1c</b>   10 f4      BPL <a href="#7f12">$7f12</a>
</div>


<div class="disass_comment">; Set cave diamond quota.
</div>


<div class="disass_code"><b>7f1e</b>   a6 5e      LDX .Level
<b>7f20</b>   bd 09 24   LDA .BufferedLevel_DiamondsNeededForSublevel1,X
<b>7f23</b>   85 c6      STA .NumTo3DigitDigits__NumberToConvert
<b>7f25</b>   20 41 7e   JSR <a href="#7e41">.NumTo3DigitDigits</a>
<b>7f28</b>   a2 01      LDX #$01
<a name="7f2a"></a><b>7f2a</b>   b5 c4      LDA .NumTo3DigitDigits__Result2ndDigit,X
<b>7f2c</b>   95 b2      STA .DiamondQuotaDigits[2],X
<b>7f2e</b>   ca         DEX 
<b>7f2f</b>   10 f9      BPL <a href="#7f2a">$7f2a</a>
</div>


<div class="disass_comment">; Set cave diamond diamond values.
</div>


<div class="disass_code"><b>7f31</b>   20 44 71   JSR <a href="#7144">.DiamondQuotaDigitsToString</a>
<b>7f34</b>   ad 02 24   LDA .BufferedLevel_InitialDiamondValue
<b>7f37</b>   85 c6      STA .NumTo3DigitDigits__NumberToConvert
<b>7f39</b>   20 41 7e   JSR <a href="#7e41">.NumTo3DigitDigits</a>
<b>7f3c</b>   a2 02      LDX #$02
<a name="7f3e"></a><b>7f3e</b>   b5 c3      LDA .NumTo3DigitDigits__Result,X
<b>7f40</b>   95 51      STA $51,X
<b>7f42</b>   ca         DEX 
<b>7f43</b>   10 f9      BPL <a href="#7f3e">$7f3e</a>
<b>7f45</b>   ad 03 24   LDA .BufferedLevel_ExtraDiamondValue
<b>7f48</b>   85 c6      STA .NumTo3DigitDigits__NumberToConvert
<b>7f4a</b>   20 41 7e   JSR <a href="#7e41">.NumTo3DigitDigits</a>
<b>7f4d</b>   a2 02      LDX #$02
<a name="7f4f"></a><b>7f4f</b>   b5 c3      LDA .NumTo3DigitDigits__Result,X
<b>7f51</b>   95 b4      STA .ExtraDiamondValue[3],X
<b>7f53</b>   ca         DEX 
<b>7f54</b>   10 f9      BPL <a href="#7f4f">$7f4f</a>
<b>7f56</b>   20 51 71   JSR <a href="#7151">.ScoreIncrementToString</a>
</div>


<div class="disass_comment">; Reset diamond count.
</div>


<div class="disass_code"><b>7f59</b>   a9 00      LDA #$00
<b>7f5b</b>   85 b0      STA .DiamondCountDigits[2]
<b>7f5d</b>   85 b1      STA .DiamondCountDigits[2]+1
<b>7f5f</b>   09 10      ORA #$10
<b>7f61</b>   8d 41 98   STA $9841
<b>7f64</b>   8d 42 98   STA $9842
</div>


<div class="disass_comment">; 
</div>


<div class="disass_code"><b>7f67</b>   a9 01      LDA #$01
<b>7f69</b>   85 8c      STA .AmeobaCouldGrowLastTick
<b>7f6b</b>   85 93      STA .AmoebaOrMagicWallFlag__A0_M1
<b>7f6d</b>   a9 04      LDA #$04
<b>7f6f</b>   85 95      STA .GeneralTimeRemaining
<b>7f71</b>   a5 9f      LDA .EnteredOutboxFlag
<b>7f73</b>   d0 0c      BNE <a href="#7f81">.__InitGameVariablesFromLevelData__NotTwoJoysticksOnePlayer</a>
<b>7f75</b>   a5 a4      LDA .NumJoysticksMinusOne
<b>7f77</b>   49 01      EOR #$01
<b>7f79</b>   25 9e      AND .NumPlayerMinusOne
<b>7f7b</b>   f0 04      BEQ <a href="#7f81">.__InitGameVariablesFromLevelData__NotTwoJoysticksOnePlayer</a>
</div>



<b>.__InitGameVariablesFromLevelData__TwoJoysticksOnePlayer</b>

<div class="disass_comment">; If we've got two players using a single joystick give them a bit more time.
</div>
<div class="disass_code"><b>7f7d</b>   a9 06      LDA #$06
<b>7f7f</b>   85 95      STA .GeneralTimeRemaining
</div>
<a name="7f81"></a>


<b>.__InitGameVariablesFromLevelData__NotTwoJoysticksOnePlayer</b>

<div class="disass_code"><b>7f81</b>   a5 5d      LDA .Cave
<b>7f83</b>   c9 02      CMP #$02
<b>7f85</b>   d0 02      BNE <a href="#7f89">.__InitGameVariablesFromLevelData__NotCaveB</a>
</div>



<b>.__InitGameVariablesFromLevelData__CaveB</b>

<div class="disass_comment">; Cave B gets a tad more time.
</div>
<div class="disass_code"><b>7f87</b>   e6 95      INC .GeneralTimeRemaining
</div>
<a name="7f89"></a>


<b>.__InitGameVariablesFromLevelData__NotCaveB</b>

<div class="disass_code"><b>7f89</b>   a9 7f      LDA #$7f
<b>7f8b</b>   85 9a      STA .AmoebaGrowthProbabilityMask
<b>7f8d</b>   a9 07      LDA #$07
<b>7f8f</b>   85 ff      STA .AnimationEnableFlags
</div>


<div class="disass_comment">; Bonus caves have all animations enabled and the rest use .LevelActiveAnimations[].
; Why all the logic for enabling animations are not part of the level data is beyond me.
</div>


<div class="disass_code"><b>7f91</b>   a6 5d      LDX .Cave
<b>7f93</b>   e0 11      CPX #$11
<b>7f95</b>   b0 06      BCS <a href="#7f9d">$7f9d</a>
</div>



<b>.__InitGameVariablesFromLevelData__NotBonusCave</b>

<div class="disass_code"><b>7f97</b>   ca         DEX 
<b>7f98</b>   bd 79 83   LDA .LevelActiveAnimations[],X
</div>



<b>.__InitGameVariablesFromLevelData__BonusCave</b>

<div class="disass_code"><b>7f9b</b>   85 ff      STA .AnimationEnableFlags
<a name="7f9d"></a><b>7f9d</b>   60         RTS 
</div>
<a name="7f9e"></a>

<div class="disass_comment">; 
</div>

<b>.SetTopLineTextToGameOverAndDelay</b>

<div class="disass_comment">; .g.a.m.e...o.v.e.r..
</div>
<div class="disass_code"><b>7f9e</b>   a9 f4      LDA #$f4
<b>7fa0</b>   85 46      STA .__Local1__
<b>7fa2</b>   a9 6b      LDA #$6b
<b>7fa4</b>   85 47      STA .__Local2__
<b>7fa6</b>   20 16 6b   JSR <a href="#6b16">.SetTopLineText</a>
<b>7fa9</b>   20 0c 7d   JSR <a href="#7d0c">.FourDelays</a>
<b>7fac</b>   60         RTS 
</div>
<a name="7fad"></a>

<div class="disass_comment">; 
</div>

<b>.WaitForDelayOrNextPlayersButton</b>

<div class="disass_code"><b>7fad</b>   a0 75      LDY #$75
</div>
<a name="7faf"></a>


<b>.__WaitForDelayOrNextPlayersButton__OuterDelayLoop</b>

<div class="disass_code"><b>7faf</b>   a2 80      LDX #$80
</div>
<a name="7fb1"></a>


<b>.__WaitForDelayOrNextPlayersButton__InnerDelayLoop</b>

<div class="disass_code"><b>7fb1</b>   a5 a6      LDA .CurrentBonusLevelFlag
<b>7fb3</b>   d0 07      BNE <a href="#7fbc">.__WaitForDelayOrNextPlayersButton__IsBonusLevel</a>
</div>



<b>.__WaitForDelayOrNextPlayersButton__NotBonusLevel</b>

<div class="disass_code"><b>7fb5</b>   a5 9d      LDA .CurrentPlayer
<b>7fb7</b>   49 01      EOR #$01
<b>7fb9</b>   4c be 7f   JMP <a href="#7fbe">.__WaitForDelayOrNextPlayersButton__ReadButton</a>
</div>
<a name="7fbc"></a>


<b>.__WaitForDelayOrNextPlayersButton__IsBonusLevel</b>

<div class="disass_code"><b>7fbc</b>   a5 9d      LDA .CurrentPlayer
</div>
<a name="7fbe"></a>


<b>.__WaitForDelayOrNextPlayersButton__ReadButton</b>

<div class="disass_code"><b>7fbe</b>   20 6b 6b   JSR <a href="#6b6b">.ReadFireButtonPlayerInA</a>
<b>7fc1</b>   d0 04      BNE <a href="#7fc7">.__WaitForDelayOrNextPlayersButton__NotPressed</a>
</div>



<b>.__WaitForDelayOrNextPlayersButton__Pressed</b>

<div class="disass_code"><b>7fc3</b>   a0 01      LDY #$01
<b>7fc5</b>   a2 01      LDX #$01
</div>
<a name="7fc7"></a>


<b>.__WaitForDelayOrNextPlayersButton__NotPressed</b>

<div class="disass_code"><b>7fc7</b>   ca         DEX 
<b>7fc8</b>   d0 e7      BNE <a href="#7fb1">.__WaitForDelayOrNextPlayersButton__InnerDelayLoop</a>
<b>7fca</b>   88         DEY 
<b>7fcb</b>   d0 e2      BNE <a href="#7faf">.__WaitForDelayOrNextPlayersButton__OuterDelayLoop</a>
<b>7fcd</b>   60         RTS 
</div>
<a name="7fce"></a>

<div class="disass_comment">; 
</div>

<b>.OutOfTimeLoop</b>

<div class="disass_code"><b>7fce</b>   a9 14      LDA #$14
<b>7fd0</b>   8d 06 98   STA .__OutOfTimeLoop__Counter
<a name="7fd3"></a><b>7fd3</b>   20 04 6b   JSR <a href="#6b04">.BackupTopLine</a>
</div>


<div class="disass_comment">; Set top line text to:
; ....out.of.time.....
</div>


<div class="disass_code"><b>7fd6</b>   a9 1c      LDA #$1c
<b>7fd8</b>   85 46      STA .__Local1__
<b>7fda</b>   a9 6c      LDA #$6c
<b>7fdc</b>   85 47      STA .__Local2__
<b>7fde</b>   20 16 6b   JSR <a href="#6b16">.SetTopLineText</a>
<b>7fe1</b>   20 ad 7f   JSR <a href="#7fad">.WaitForDelayOrNextPlayersButton</a>
</div>


<div class="disass_comment">; Restore top line text.
</div>


<div class="disass_code"><b>7fe4</b>   a9 62      LDA #$62
<b>7fe6</b>   85 46      STA .__Local1__
<b>7fe8</b>   a9 98      LDA #$98
<b>7fea</b>   85 47      STA .__Local2__
<b>7fec</b>   20 16 6b   JSR <a href="#6b16">.SetTopLineText</a>
<b>7fef</b>   20 ad 7f   JSR <a href="#7fad">.WaitForDelayOrNextPlayersButton</a>
<b>7ff2</b>   20 ad 7f   JSR <a href="#7fad">.WaitForDelayOrNextPlayersButton</a>
<b>7ff5</b>   20 ad 7f   JSR <a href="#7fad">.WaitForDelayOrNextPlayersButton</a>
<b>7ff8</b>   ce 06 98   DEC .__OutOfTimeLoop__Counter
<b>7ffb</b>   d0 04      BNE <a href="#8001">$8001</a>
<b>7ffd</b>   a9 00      LDA #$00
<b>7fff</b>   85 b8      STA .FireButtonStatus
<a name="8001"></a><b>8001</b>   a5 b8      LDA .FireButtonStatus
<b>8003</b>   d0 ce      BNE <a href="#7fd3">$7fd3</a>
<b>8005</b>   60         RTS 
</div>
<a name="8006"></a>

<div class="disass_comment">; 
</div>

<b>.ProcessBonusLevelAndInterLevelInfoDisplay</b>

<div class="disass_code"><b>8006</b>   a5 5d      LDA .Cave
<b>8008</b>   0a         ASL A
<b>8009</b>   aa         TAX 
<b>800a</b>   bd 65 7e   LDA <a href="#7e65">.NextCaveAndBonusFlagTable</a>,X
<b>800d</b>   85 a6      STA .CurrentBonusLevelFlag
<b>800f</b>   f0 11      BEQ <a href="#8022">$8022</a>
</div>


<div class="disass_comment">; .b.o.n.u.s..l.i.f.e.
</div>


<div class="disass_code"><b>8011</b>   a9 30      LDA #$30
<b>8013</b>   85 46      STA .__Local1__
<b>8015</b>   a9 6c      LDA #$6c
<b>8017</b>   85 47      STA .__Local2__
<b>8019</b>   20 16 6b   JSR <a href="#6b16">.SetTopLineText</a>
<b>801c</b>   20 39 70   JSR <a href="#7039">.ExtraLife</a>
<b>801f</b>   4c 2d 80   JMP <a href="#802d">$802d</a>
</div>
<a name="8022"></a>

<div class="disass_comment">; $094e = .CurrentPlayerInfoText
</div>


<div class="disass_code"><b>8022</b>   a9 4e      LDA #$4e
<b>8024</b>   85 46      STA .__Local1__
<b>8026</b>   a9 98      LDA #$98
<b>8028</b>   85 47      STA .__Local2__
<b>802a</b>   20 16 6b   JSR <a href="#6b16">.SetTopLineText</a>
<a name="802d"></a><b>802d</b>   60         RTS 
</div>
<a name="802e"></a>

<div class="disass_comment">; 
</div>

<b>.PostCaveRunActions</b>

<div class="disass_code"><b>802e</b>   a5 af      LDA .TimeCaveHasRan
<b>8030</b>   c5 c7      CMP .CaveTimeLimit
<b>8032</b>   d0 0c      BNE <a href="#8040">.__PostRunCaveActions__CheckIfGameOver</a>
</div>



<b>.__PostRunCaveActions__TimeLimitReached</b>

<div class="disass_code"><b>8034</b>   a9 00      LDA #$00
<b>8036</b>   85 94      STA .EnableIRQTriggeredSFXAndTopLineUpdates
</div>


<div class="disass_comment">; Without this the timer never display 000.
; It sets the first character of the third digit to zero.
; Only the first character need be set because .BackupTopLine
; only looks at the first and .SetTopLineText takes a string.
</div>


<div class="disass_code"><b>8038</b>   a9 10      LDA #$10
<b>803a</b>   8d 18 0c   STA $0c18
<b>803d</b>   20 ce 7f   JSR <a href="#7fce">.OutOfTimeLoop</a>
</div>
<a name="8040"></a>


<b>.__PostRunCaveActions__CheckIfGameOver</b>

<div class="disass_code"><b>8040</b>   a5 a0      LDA .GameOverFlag
<b>8042</b>   f0 0e      BEQ <a href="#8052">.__PostRunCaveActions__NotGameOver</a>
</div>



<b>.__PostRunCaveActions__GameOver</b>

<div class="disass_code"><b>8044</b>   a9 00      LDA #$00
<b>8046</b>   85 94      STA .EnableIRQTriggeredSFXAndTopLineUpdates
<b>8048</b>   20 9e 7f   JSR <a href="#7f9e">.SetTopLineTextToGameOverAndDelay</a>
<b>804b</b>   a9 02      LDA #$02
<b>804d</b>   85 8d      STA .MagicWallActiveState
<b>804f</b>   4c 59 80   JMP <a href="#8059">$8059</a>
</div>
<a name="8052"></a>


<b>.__PostRunCaveActions__NotGameOver</b>

<div class="disass_code"><b>8052</b>   a5 5d      LDA .Cave
<b>8054</b>   f0 03      BEQ <a href="#8059">$8059</a>
<b>8056</b>   20 06 80   JSR <a href="#8006">.ProcessBonusLevelAndInterLevelInfoDisplay</a>
</div>
<a name="8059"></a>

<div class="disass_comment">; Shut down magic walls.
</div>


<div class="disass_code"><b>8059</b>   a9 01      LDA #$01
<b>805b</b>   85 bd      STA .PlayRevealLevelSoundAndRedefineCharFlag
<b>805d</b>   20 f4 7c   JSR <a href="#7cf4">.ResetSound</a>
<b>8060</b>   20 f9 76   JSR <a href="#76f9">.CoverLevel</a>
<b>8063</b>   20 db 76   JSR <a href="#76db">.FillExpandedLatticeWithScrollingSteelWallChar</a>
<b>8066</b>   a5 a0      LDA .GameOverFlag
<b>8068</b>   f0 03      BEQ <a href="#806d">$806d</a>
<b>806a</b>   20 0c 7d   JSR <a href="#7d0c">.FourDelays</a>
<a name="806d"></a><b>806d</b>   60         RTS 
</div>
<a name="806e"></a>

<div class="disass_comment">; 
; For level 1:
; >C:0800 -A)}#w2F/C  &z5I.B TU -A)}#w2F/C  &z5I.B
; >C:0828             0D2F%y3G%y.B4H3G
; >C:0850 GGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGG
; >C:0878 GAAAAAA.AATAP.AAAAAPAPAAAAAAA.AAAAPAAAAG
; >C:08a0 GAP%PAAAAAA.AAAAAAAAAPTAAPAAAA.AAAAA.AAG
; >C:08c8 GAAAAAAAAAA.AA.AAAAAPAPAAPAAAAAAAAPAAAAG
; >C:08f0 GPA..AAAAAAAAAPAAAAAAPAAPAAAAPAAAPAAAAAG
; >C:0918 GPAPPAAAAAAAAAPPAAPAAAAAAAAPAAAAAAPAP.AG
; >C:0940 GAAAPAAPAAAAAAAAPAAAAAPA.PAAAAAAAAPAPPAG
; >C:0968 GBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBAAAPAAPAG
; >C:0990 GA.AAAPAATA.AAPAPAAAAAAAAAATAP.AAAAAAPAG
; >C:09b8 GAATAAAAAPAAAAA.AAAAAAAAP..PAATAAAAPAAAG
; >C:09e0 GAAAPAAPAPAAAAAAAAAAAAAAPPAPAAPAAAAAAAAG
; >C:0a08 GA.AAAAAPAAAAAAAAPP.AAAAAAAPAAPATAAAA.AG
; >C:0a30 GAPAA.AAPA..AAAAAPAPTAATAAAAPAAAPAATAPAG
; >C:0a58 GATPAAAAAAAAAAAAAAPPPAAPAAAAAAAATAAAAAPG
; >C:0a80 GAAAAAAAABBBBBBBBBBBBBBBBBBBBBBBBBBBBBBG
; >C:0aa8 G..AAAAAAAAA.AAATAAAAPAAAAAPAAAPAAAAAAAG
; >C:0ad0 GP.AAAAAAAAAPPAAPAAAAAAAAPAAAAAAPAP.AADG
; >C:0af8 GAPAAPAAAAAAAAPAAAAAPA..AAAATAAAPAPPAAAG
; >C:0b20 GAAAAPTAA.AAAAAAAAPAAAAAAPAPTAAAAAAPAAAG
; >C:0b48 GAAA.AA.APAAPAPPAAAAAAAAAPAPTAAAAAAPAAPG
; >C:0b70 GATAAAAPAAAAA.AAAAAAAAA.APAAPAAAAPAAAPAG
; >C:0b98 GGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGGG
; 
</div>

<b>.UnpackedCaveMatrixRowVectorTable</b>

<table><tr><td><b>806e</b>&nbsp;&nbsp;&nbsp;</td><td>.UnpackedCaveMatrix&nbsp;&nbsp;&nbsp;</td><td>0828&nbsp;&nbsp;&nbsp;</td><td>0850&nbsp;&nbsp;&nbsp;</td><td>0878&nbsp;&nbsp;&nbsp;</td></tr>
<tr><td><b>8076</b>&nbsp;&nbsp;&nbsp;</td><td>08a0&nbsp;&nbsp;&nbsp;</td><td>08c8&nbsp;&nbsp;&nbsp;</td><td>08f0&nbsp;&nbsp;&nbsp;</td><td>0918&nbsp;&nbsp;&nbsp;</td></tr>
<tr><td><b>807e</b>&nbsp;&nbsp;&nbsp;</td><td>0940&nbsp;&nbsp;&nbsp;</td><td>0968&nbsp;&nbsp;&nbsp;</td><td>0990&nbsp;&nbsp;&nbsp;</td><td>09b8&nbsp;&nbsp;&nbsp;</td></tr>
<tr><td><b>8086</b>&nbsp;&nbsp;&nbsp;</td><td>09e0&nbsp;&nbsp;&nbsp;</td><td>0a08&nbsp;&nbsp;&nbsp;</td><td>0a30&nbsp;&nbsp;&nbsp;</td><td>0a58&nbsp;&nbsp;&nbsp;</td></tr>
<tr><td><b>808e</b>&nbsp;&nbsp;&nbsp;</td><td>0a80&nbsp;&nbsp;&nbsp;</td><td>0aa8&nbsp;&nbsp;&nbsp;</td><td>0ad0&nbsp;&nbsp;&nbsp;</td><td>0af8&nbsp;&nbsp;&nbsp;</td></tr>
<tr><td><b>8096</b>&nbsp;&nbsp;&nbsp;</td><td>0b20&nbsp;&nbsp;&nbsp;</td><td>0b48&nbsp;&nbsp;&nbsp;</td><td>0b70&nbsp;&nbsp;&nbsp;</td><td>0b98&nbsp;&nbsp;&nbsp;</td></tr>
</table>
<a name="809e"></a>


<b>.UnpackedCaveRowColToPtr</b>

<div class="disass_code"><b>809e</b>   a5 dc      LDA .ObjParam2DuringUnpack
<b>80a0</b>   0a         ASL A
<b>80a1</b>   a8         TAY 
<b>80a2</b>   18         CLC 
<b>80a3</b>   b9 6e 80   LDA <a href="#806e">.UnpackedCaveMatrixRowVectorTable</a>,Y
<b>80a6</b>   65 db      ADC .ObjParam1DuringUnpack
<b>80a8</b>   85 3a      STA .ExecuteLevelDrawCommands::OutPtrLow
<b>80aa</b>   b9 6f 80   LDA <a href="#806e">.UnpackedCaveMatrixRowVectorTable</a>+1,Y
<b>80ad</b>   69 00      ADC #$00
<b>80af</b>   85 3b      STA .ExecuteLevelDrawCommands::OutPtrHigh
<b>80b1</b>   60         RTS 
</div>
<a name="80b2"></a>

<div class="disass_comment">; 
; .ObjTypeDuringUnpack   : object
; .ObjParam1DuringUnpack : x
; .ObjParam2DuringUnpack : y
</div>

<b>.CaveCmdSingleObj</b>

<div class="disass_code"><b>80b2</b>   20 9e 80   JSR <a href="#809e">.UnpackedCaveRowColToPtr</a>
<b>80b5</b>   a5 da      LDA .ObjTypeDuringUnpack
<b>80b7</b>   a0 00      LDY #$00
<b>80b9</b>   91 3a      STA (.ExecuteLevelDrawCommands::OutPtrLow),Y
<b>80bb</b>   60         RTS 
</div>
<a name="80bc"></a>

<div class="disass_comment">; 
</div>

<b>.ExecuteLevelDrawCommands::DrawLine::StepTable</b>

<div class="disass_comment">; $ffd8 = -40 --> N
; $ffd9 = -39 --> NE
; $0001 = +1  --> E
; $0029 = +41 --> SE
; $0028 = +40 --> S
; $0027 = +39 --> SW
; $ffff = -1  --> W
; $ffd7 = -41 --> NW
</div>
<div class="disass_code"><b>80bc</b>   d8 ff d9 ff  01 00 29 00  28 00 27 00  ff ff d7 ff
</div>
<a name="80cc"></a>

<div class="disass_comment">; 
; A : direction : 0->N, 1->NE, 2->E, 3->SE, 4->S, 5->SW, 6->W, 7->NW
; .ExecuteLevelDrawCommands::LineLength: length
</div>

<b>.ExecuteLevelDrawCommands::DrawLine</b>

<div class="disass_code"><b>80cc</b>   a0 00      LDY #$00
<b>80ce</b>   0a         ASL A
<b>80cf</b>   aa         TAX 
<b>80d0</b>   bd bc 80   LDA <a href="#80bc">.ExecuteLevelDrawCommands::DrawLine::StepTable</a>,X
<b>80d3</b>   85 c9      STA .CaveLineStepValueLo
<b>80d5</b>   bd bd 80   LDA <a href="#80bc">.ExecuteLevelDrawCommands::DrawLine::StepTable</a>+1,X
<b>80d8</b>   85 ca      STA .CaveLineStepValueHi
</div>
<a name="80da"></a>


<b>.__ExecuteLevelDrawCommands::DrawLine__Next</b>

<div class="disass_code"><b>80da</b>   c6 c8      DEC .ExecuteLevelDrawCommands::LineLength
<b>80dc</b>   30 14      BMI <a href="#80f2">.__ExecuteLevelDrawCommands::DrawLine__Finished</a>
<b>80de</b>   a5 da      LDA .ObjTypeDuringUnpack
<b>80e0</b>   91 3a      STA (.ExecuteLevelDrawCommands::OutPtrLow),Y
<b>80e2</b>   18         CLC 
<b>80e3</b>   a5 3a      LDA .ExecuteLevelDrawCommands::OutPtrLow
<b>80e5</b>   65 c9      ADC .CaveLineStepValueLo
<b>80e7</b>   85 3a      STA .ExecuteLevelDrawCommands::OutPtrLow
<b>80e9</b>   a5 3b      LDA .ExecuteLevelDrawCommands::OutPtrHigh
<b>80eb</b>   65 ca      ADC .CaveLineStepValueHi
<b>80ed</b>   85 3b      STA .ExecuteLevelDrawCommands::OutPtrHigh
<b>80ef</b>   4c da 80   JMP <a href="#80da">.__ExecuteLevelDrawCommands::DrawLine__Next</a>
</div>
<a name="80f2"></a>


<b>.__ExecuteLevelDrawCommands::DrawLine__Finished</b>

<div class="disass_code"><b>80f2</b>   60         RTS 
</div>
<a name="80f3"></a>

<div class="disass_comment">; 
</div>

<b>.CaveCmdDrawLine</b>

<div class="disass_code"><b>80f3</b>   20 9e 80   JSR <a href="#809e">.UnpackedCaveRowColToPtr</a>
<b>80f6</b>   a5 dd      LDA .ObjParam3DuringUnpack
<b>80f8</b>   85 c8      STA .ExecuteLevelDrawCommands::LineLength
<b>80fa</b>   a5 df      LDA .ObjParam4DuringUnpack
<b>80fc</b>   20 cc 80   JSR <a href="#80cc">.ExecuteLevelDrawCommands::DrawLine</a>
<b>80ff</b>   60         RTS 
</div>
<a name="8100"></a>

<div class="disass_comment">; 
; .ObjTypeDuringUnpack   : object
; .ObjParam1DuringUnpack : x
; .ObjParam2DuringUnpack : y
; .ObjParam3DuringUnpack : width
; .ObjParam4DuringUnpack : height
</div>

<b>.CaveUnpackSubFillRect</b>

<div class="disass_code"><b>8100</b>   20 9e 80   JSR <a href="#809e">.UnpackedCaveRowColToPtr</a>
<b>8103</b>   a5 df      LDA .ObjParam4DuringUnpack
<b>8105</b>   85 c8      STA .ExecuteLevelDrawCommands::LineLength
</div>
<a name="8107"></a>

<div class="disass_comment">; 
</div>

<b>.__ExecuteLevelDrawCommands::DrawFilledRect__NextLine</b>

<div class="disass_comment">; In this function .ExecuteLevelDrawCommands::LineLength is the height of the rect.
</div>
<div class="disass_code"><b>8107</b>   c6 c8      DEC .ExecuteLevelDrawCommands::LineLength
<b>8109</b>   30 1c      BMI <a href="#8127">.__ExecuteLevelDrawCommands::DrawFilledRect__Finished</a>
</div>


<div class="disass_comment">; 
; Draw a horizontal line of .ObjTypeDuringUnpack, length .ObjParam3DuringUnpack.
</div>


<div class="disass_code"><b>810b</b>   a4 dd      LDY .ObjParam3DuringUnpack
</div>
<a name="810d"></a>


<b>.__ExecuteLevelDrawCommands::DrawFilledRect__NextCell</b>

<div class="disass_code"><b>810d</b>   88         DEY 
<b>810e</b>   30 07      BMI <a href="#8117">.__ExecuteLevelDrawCommands::DrawFilledRect__LineFinished</a>
<b>8110</b>   a5 da      LDA .ObjTypeDuringUnpack
<b>8112</b>   91 3a      STA (.ExecuteLevelDrawCommands::OutPtrLow),Y
<b>8114</b>   4c 0d 81   JMP <a href="#810d">.__ExecuteLevelDrawCommands::DrawFilledRect__NextCell</a>
</div>
<a name="8117"></a>

<div class="disass_comment">; 
; Next row.
</div>

<b>.__ExecuteLevelDrawCommands::DrawFilledRect__LineFinished</b>

<div class="disass_code"><b>8117</b>   18         CLC 
<b>8118</b>   a5 3a      LDA .ExecuteLevelDrawCommands::OutPtrLow
<b>811a</b>   69 28      ADC #$28
<b>811c</b>   85 3a      STA .ExecuteLevelDrawCommands::OutPtrLow
<b>811e</b>   a5 3b      LDA .ExecuteLevelDrawCommands::OutPtrHigh
<b>8120</b>   69 00      ADC #$00
<b>8122</b>   85 3b      STA .ExecuteLevelDrawCommands::OutPtrHigh
<b>8124</b>   4c 07 81   JMP <a href="#8107">.__ExecuteLevelDrawCommands::DrawFilledRect__NextLine</a>
</div>
<a name="8127"></a>

<div class="disass_comment">; 
</div>

<b>.__ExecuteLevelDrawCommands::DrawFilledRect__Finished</b>

<div class="disass_code"><b>8127</b>   60         RTS 
</div>
<a name="8128"></a>

<div class="disass_comment">; 
; .ObjTypeDuringUnpack   : outer object
; .ObjParam1DuringUnpack : x
; .ObjParam2DuringUnpack : y
; .ObjParam3DuringUnpack : width
; .ObjParam4DuringUnpack : height
; .ObjParam5DuringUnpack : inner object
</div>

<b>.CaveCmdDrawFilledRect</b>

<div class="disass_code"><b>8128</b>   20 00 81   JSR <a href="#8100">.CaveUnpackSubFillRect</a>
<b>812b</b>   a5 e0      LDA .ObjParam5DuringUnpack
<b>812d</b>   85 da      STA .ObjTypeDuringUnpack
<b>812f</b>   e6 db      INC .ObjParam1DuringUnpack
<b>8131</b>   e6 dc      INC .ObjParam2DuringUnpack
<b>8133</b>   c6 dd      DEC .ObjParam3DuringUnpack
<b>8135</b>   c6 dd      DEC .ObjParam3DuringUnpack
<b>8137</b>   c6 df      DEC .ObjParam4DuringUnpack
<b>8139</b>   c6 df      DEC .ObjParam4DuringUnpack
<b>813b</b>   20 00 81   JSR <a href="#8100">.CaveUnpackSubFillRect</a>
<b>813e</b>   60         RTS 
</div>
<a name="813f"></a>

<div class="disass_comment">; 
; .ObjTypeDuringUnpack   : object
; .ObjParam1DuringUnpack : x
; .ObjParam2DuringUnpack : y
; .ObjParam3DuringUnpack : width
; .ObjParam4DuringUnpack : height	
</div>

<b>.CaveCmdDrawRectLine</b>

<div class="disass_code"><b>813f</b>   20 9e 80   JSR <a href="#809e">.UnpackedCaveRowColToPtr</a>
</div>


<div class="disass_comment">; Draw top edge heading east, length is param3-1.
</div>


<div class="disass_code"><b>8142</b>   a5 dd      LDA .ObjParam3DuringUnpack
<b>8144</b>   85 c8      STA .ExecuteLevelDrawCommands::LineLength
<b>8146</b>   c6 c8      DEC .ExecuteLevelDrawCommands::LineLength
<b>8148</b>   a9 02      LDA #$02
<b>814a</b>   20 cc 80   JSR <a href="#80cc">.ExecuteLevelDrawCommands::DrawLine</a>
</div>


<div class="disass_comment">; Draw right edge heading south, length is param4-1. This fills the remaining cell of the top edge.
</div>


<div class="disass_code"><b>814d</b>   a5 df      LDA .ObjParam4DuringUnpack
<b>814f</b>   85 c8      STA .ExecuteLevelDrawCommands::LineLength
<b>8151</b>   c6 c8      DEC .ExecuteLevelDrawCommands::LineLength
<b>8153</b>   a9 04      LDA #$04
<b>8155</b>   20 cc 80   JSR <a href="#80cc">.ExecuteLevelDrawCommands::DrawLine</a>
</div>


<div class="disass_comment">; Draw bottom edge heading west, length is param3-1. This fills the remaining cell of the right edge.
</div>


<div class="disass_code"><b>8158</b>   a5 dd      LDA .ObjParam3DuringUnpack
<b>815a</b>   85 c8      STA .ExecuteLevelDrawCommands::LineLength
<b>815c</b>   c6 c8      DEC .ExecuteLevelDrawCommands::LineLength
<b>815e</b>   a9 06      LDA #$06
<b>8160</b>   20 cc 80   JSR <a href="#80cc">.ExecuteLevelDrawCommands::DrawLine</a>
</div>


<div class="disass_comment">; Draw left edge heading north, length is param4-1. This fills the remaining cell of the bottom edge.
</div>


<div class="disass_code"><b>8163</b>   a5 df      LDA .ObjParam4DuringUnpack
<b>8165</b>   85 c8      STA .ExecuteLevelDrawCommands::LineLength
<b>8167</b>   c6 c8      DEC .ExecuteLevelDrawCommands::LineLength
<b>8169</b>   a9 00      LDA #$00
<b>816b</b>   20 cc 80   JSR <a href="#80cc">.ExecuteLevelDrawCommands::DrawLine</a>
<b>816e</b>   60         RTS 
</div>
<a name="816f"></a>

<div class="disass_comment">; 
</div>

<b>.Skip3CaveCmdBytes</b>

<div class="disass_code"><b>816f</b>   c8         INY 
<b>8170</b>   c8         INY 
<b>8171</b>   c8         INY 
<b>8172</b>   84 cb      STY .CaveUnpackOffset
<b>8174</b>   60         RTS 
</div>
<a name="8175"></a>


<b>.Skip5CaveCmdBytes</b>

<div class="disass_code"><b>8175</b>   c8         INY 
<b>8176</b>   c8         INY 
<b>8177</b>   20 6f 81   JSR <a href="#816f">.Skip3CaveCmdBytes</a>
<b>817a</b>   60         RTS 
</div>
<a name="817b"></a>


<b>.Skip6CaveCmdBytes</b>

<div class="disass_code"><b>817b</b>   c8         INY 
<b>817c</b>   20 75 81   JSR <a href="#8175">.Skip5CaveCmdBytes</a>
<b>817f</b>   60         RTS 
</div>
<a name="8180"></a>

<div class="disass_comment">; 
</div>

<b>.UnpackCave</b>

<div class="disass_code"><b>8180</b>   a0 00      LDY #$00
<b>8182</b>   84 cb      STY .CaveUnpackOffset
</div>
<a name="8184"></a>


<b>._GetNextCmd</b>

<div class="disass_code"><b>8184</b>   a4 cb      LDY .CaveUnpackOffset
</div>


<div class="disass_comment">; .BufferedLevel_Object
; ---------------------------------
; |$80|$40|$20|$10|$08|$04|$02|$01|
; ---------------------------------
; |Command|        Object         |
; ---------------------------------
; 
; Commands:
; $00 : single object     : (param1:x, param2:y)
; $40 : line              : (param1:x, param2:y, param3:length, param4:direction)
; $80 : filled rectangle  : (param1:x, param2:y, param3:width,  param4:height, param5:inner object)
; $c0 : rectangle
</div>


<div class="disass_code"><b>8186</b>   b9 20 24   LDA .BufferedLevel_Object[],Y
<b>8189</b>   c9 ff      CMP #$ff
<b>818b</b>   f0 62      BEQ <a href="#81ef">._UnpackCaveFinished</a>
<b>818d</b>   29 3f      AND #$3f
<b>818f</b>   85 da      STA .ObjTypeDuringUnpack
<b>8191</b>   c9 25      CMP #$25
<b>8193</b>   d0 0a      BNE <a href="#819f">._ObjNotRockford</a>
</div>



<b>.__ExecuteLevelDrawCommands__IsRockford</b>

<div class="disass_code"><b>8195</b>   b9 21 24   LDA .BufferedLevel_Param1[],Y
<b>8198</b>   85 44      STA .RockfordX
<b>819a</b>   b9 22 24   LDA .BufferedLevel_Param2[],Y
<b>819d</b>   85 45      STA .RockfordY
</div>
<a name="819f"></a>


<b>._ObjNotRockford</b>

<div class="disass_code"><b>819f</b>   b9 21 24   LDA .BufferedLevel_Param1[],Y
<b>81a2</b>   85 db      STA .ObjParam1DuringUnpack
<b>81a4</b>   b9 22 24   LDA .BufferedLevel_Param2[],Y
<b>81a7</b>   85 dc      STA .ObjParam2DuringUnpack
<b>81a9</b>   b9 23 24   LDA .BufferedLevel_Param3[],Y
<b>81ac</b>   85 dd      STA .ObjParam3DuringUnpack
<b>81ae</b>   b9 24 24   LDA .BufferedLevel_Param4[],Y
<b>81b1</b>   85 df      STA .ObjParam4DuringUnpack
<b>81b3</b>   b9 25 24   LDA .BufferedLevel_Param5[],Y
<b>81b6</b>   85 e0      STA .ObjParam5DuringUnpack
</div>



<b>.__ExecuteLevelDrawCommands__SwitchOnCommand</b>

<div class="disass_code"><b>81b8</b>   b9 20 24   LDA .BufferedLevel_Object[],Y
<b>81bb</b>   29 c0      AND #$c0
<b>81bd</b>   d0 09      BNE <a href="#81c8">._CmdNotSingleObj</a>
</div>



<b>.__ExecuteLevelDrawCommands__Case_SingleObject</b>

<div class="disass_code"><b>81bf</b>   20 6f 81   JSR <a href="#816f">.Skip3CaveCmdBytes</a>
<b>81c2</b>   20 b2 80   JSR <a href="#80b2">.CaveCmdSingleObj</a>
<b>81c5</b>   4c ec 81   JMP <a href="#81ec">._CmdProcessed</a>
</div>
<a name="81c8"></a>


<b>._CmdNotSingleObj</b>

<div class="disass_code"><b>81c8</b>   c9 40      CMP #$40
<b>81ca</b>   d0 09      BNE <a href="#81d5">._CmdNotLine</a>
</div>



<b>.__ExecuteLevelDrawCommands__Case_Line</b>

<div class="disass_code"><b>81cc</b>   20 75 81   JSR <a href="#8175">.Skip5CaveCmdBytes</a>
<b>81cf</b>   20 f3 80   JSR <a href="#80f3">.CaveCmdDrawLine</a>
<b>81d2</b>   4c ec 81   JMP <a href="#81ec">._CmdProcessed</a>
</div>
<a name="81d5"></a>


<b>._CmdNotLine</b>

<div class="disass_code"><b>81d5</b>   c9 80      CMP #$80
<b>81d7</b>   d0 09      BNE <a href="#81e2">._CmdNotFilledRect</a>
</div>



<b>.__ExecuteLevelDrawCommands__Case_FilledRect</b>

<div class="disass_code"><b>81d9</b>   20 7b 81   JSR <a href="#817b">.Skip6CaveCmdBytes</a>
<b>81dc</b>   20 28 81   JSR <a href="#8128">.CaveCmdDrawFilledRect</a>
<b>81df</b>   4c ec 81   JMP <a href="#81ec">._CmdProcessed</a>
</div>
<a name="81e2"></a>


<b>._CmdNotFilledRect</b>

<div class="disass_code"><b>81e2</b>   c9 c0      CMP #$c0
<b>81e4</b>   d0 06      BNE <a href="#81ec">._CmdProcessed</a>
</div>



<b>.__ExecuteLevelDrawCommands__Case_Rect</b>

<div class="disass_code"><b>81e6</b>   20 75 81   JSR <a href="#8175">.Skip5CaveCmdBytes</a>
<b>81e9</b>   20 3f 81   JSR <a href="#813f">.CaveCmdDrawRectLine</a>
</div>
<a name="81ec"></a>


<b>._CmdProcessed</b>

<div class="disass_code"><b>81ec</b>   4c 84 81   JMP <a href="#8184">._GetNextCmd</a>
</div>
<a name="81ef"></a>


<b>._UnpackCaveFinished</b>

<div class="disass_code"><b>81ef</b>   60         RTS 
</div>
<a name="81f0"></a>

<div class="disass_comment">; 
</div>

<b>.TitleScreenFillInPlayerAndJoystick</b>

<div class="disass_code"><b>81f0</b>   a5 a3      LDA .TitleScreenInLicenseMode
<b>81f2</b>   d0 1a      BNE <a href="#820e">.__TitleScreenFillInPlayerAndJoystick__Exit</a>
<b>81f4</b>   a5 9e      LDA .NumPlayerMinusOne
<b>81f6</b>   18         CLC 
<b>81f7</b>   69 11      ADC #$11
<b>81f9</b>   8d 70 0b   STA $0b70
<b>81fc</b>   69 34      ADC #$34
<b>81fe</b>   8d 71 0b   STA $0b71
<b>8201</b>   a5 a4      LDA .NumJoysticksMinusOne
<b>8203</b>   18         CLC 
<b>8204</b>   69 11      ADC #$11
<b>8206</b>   8d 84 0b   STA $0b84
<b>8209</b>   69 34      ADC #$34
<b>820b</b>   8d 85 0b   STA $0b85
</div>
<a name="820e"></a>


<b>.__TitleScreenFillInPlayerAndJoystick__Exit</b>

<div class="disass_code"><b>820e</b>   60         RTS 
</div>
<a name="820f"></a>

<div class="disass_comment">; 
</div>

<b>.CaveStoreOuterSteelWall</b>

<div class="disass_code"><b>820f</b>   a9 07      LDA #$07
<b>8211</b>   85 da      STA .ObjTypeDuringUnpack
<b>8213</b>   a9 00      LDA #$00
<b>8215</b>   85 db      STA .ObjParam1DuringUnpack
<b>8217</b>   a9 02      LDA #$02
<b>8219</b>   85 dc      STA .ObjParam2DuringUnpack
<b>821b</b>   a9 28      LDA #$28
<b>821d</b>   85 dd      STA .ObjParam3DuringUnpack
<b>821f</b>   a9 16      LDA #$16
<b>8221</b>   85 df      STA .ObjParam4DuringUnpack
<b>8223</b>   20 3f 81   JSR <a href="#813f">.CaveCmdDrawRectLine</a>
<b>8226</b>   60         RTS 
</div>
<a name="8227"></a>

<div class="disass_comment">; 
</div>

<b>.SetupTitleScreenText</b>

<div class="disass_comment">; Top two lines and BD logo (copies too much):
; 66e8-67e7 to 0800-08ff (From line 1 column 1 to line 7 column 16)
; 67e8-68e7 to 0900-09ff (From line 7 column 17 to line 13 column 32)
; 68e8-69e7 to 0a00-0aff (From line 13 column 33 to line 20 column 8)
; License text (starts too early):
; 69d0-6acf to 0ee8-0fe7 (Tilemap @ $0c00: L19 C25 - L25 C40)
</div>
<div class="disass_code"><b>8227</b>   a2 00      LDX #$00
<a name="8229"></a><b>8229</b>   bd e8 66   LDA <a href="#66e8">.Top2LinesAndBoulderDashLogo</a>,X
<b>822c</b>   9d 00 08   STA .UnpackedCaveMatrix,X
<b>822f</b>   bd e8 67   LDA <a href="#67e8">.Top2LinesAndBoulderDashLogo_pt2</a>,X
<b>8232</b>   9d 00 09   STA $0900,X
<b>8235</b>   bd e8 68   LDA <a href="#68e8">.Top2LinesAndBoulderDashLogo_pt3</a>,X
<b>8238</b>   9d 00 0a   STA $0a00,X
</div>


<div class="disass_comment">; .......l-i-c-e-n-s-e-d-..f-r-o-m-.......
; .......c-r-a-c-k-e-d-..b-y-..n-o-v-a-...
; ..............c-..1-9-8-4-..............
; .f-i-r-s-t-..s-t-a-r-..s-o-f-t-w-a-r-e-.
; m-i-c-r-o-..f-u-n-.*-.m-i-c-r-o-..f-u-n-
</div>


<div class="disass_code"><b>823b</b>   bd d0 69   LDA $69d0,X
<b>823e</b>   9d e8 0e   STA $0ee8,X
<b>8241</b>   e8         INX 
<b>8242</b>   d0 e5      BNE <a href="#8229">$8229</a>
</div>


<div class="disass_comment">; 
; When we first start the game the license text is shown below the logo.
; Pressing F1 replaces this text with some credits on the upper three lines
; and the lower two with game information such as starting cave and level:
; 
; ..by.peter.liepa....
; ..with.chris.grey...
; press.button.to.play
; 1.player..1.joystick
; .cave:.a..level:.1..
; 
; After a game has been played or the demo has completed the upper three
; lines are replaced with high and last scores for both players:
; 
; .plyr.1......plyr.2.
; .001750.last.000000.
; .001750.high.000000.
; 1.player..1.joystick
; .cave:.a..level:.1..
</div>


<div class="disass_code"><b>8244</b>   a5 cc      LDA .ForceCreditsMode
<b>8246</b>   05 a2      ORA .IsDemoMode
<b>8248</b>   f0 48      BEQ <a href="#8292">.__SetupTitleScreenText__ScoresMode</a>
</div>



<b>.__SetupTitleScreenText__CreditsMode</b>

<div class="disass_code"><b>824a</b>   a2 00      LDX #$00
<b>824c</b>   a0 00      LDY #$00
</div>
<a name="824e"></a>


<b>.__SetupTitleScreenText__ByPeterLiepaLoop</b>

<div class="disass_comment">; ..by.peter.liepa....
</div>
<div class="disass_code"><b>824e</b>   b9 7c 6b   LDA <a href="#6b7c">.Text_ByPeterLiepa</a>,Y
<b>8251</b>   9d f8 0a   STA $0af8,X
<b>8254</b>   e8         INX 
<b>8255</b>   18         CLC 
<b>8256</b>   69 34      ADC #$34
<b>8258</b>   9d f8 0a   STA $0af8,X
<b>825b</b>   e8         INX 
<b>825c</b>   c8         INY 
<b>825d</b>   c0 14      CPY #$14
<b>825f</b>   d0 ed      BNE <a href="#824e">.__SetupTitleScreenText__ByPeterLiepaLoop</a>
<b>8261</b>   a2 00      LDX #$00
<b>8263</b>   a0 00      LDY #$00
</div>
<a name="8265"></a>


<b>.__SetupTitleScreenText__WithChrisGreyLoop</b>

<div class="disass_comment">; ..with.chris.grey..
</div>
<div class="disass_code"><b>8265</b>   b9 90 6b   LDA .Text__WithChrisGrey,Y
<b>8268</b>   9d 20 0b   STA $0b20,X
<b>826b</b>   e8         INX 
<b>826c</b>   18         CLC 
<b>826d</b>   69 34      ADC #$34
<b>826f</b>   9d 20 0b   STA $0b20,X
<b>8272</b>   e8         INX 
<b>8273</b>   c8         INY 
<b>8274</b>   c0 14      CPY #$14
<b>8276</b>   d0 ed      BNE <a href="#8265">.__SetupTitleScreenText__WithChrisGreyLoop</a>
<b>8278</b>   a2 00      LDX #$00
<b>827a</b>   a0 00      LDY #$00
</div>
<a name="827c"></a>


<b>.__SetupTitleScreenText__PressButtonToPlayLoop</b>

<div class="disass_comment">; press.button.to.play
</div>
<div class="disass_code"><b>827c</b>   b9 6c 6c   LDA <a href="#6c6c">.Text_PressButtonToPlay</a>,Y
<b>827f</b>   9d 48 0b   STA $0b48,X
<b>8282</b>   e8         INX 
<b>8283</b>   18         CLC 
<b>8284</b>   69 34      ADC #$34
<b>8286</b>   9d 48 0b   STA $0b48,X
<b>8289</b>   e8         INX 
<b>828a</b>   c8         INY 
<b>828b</b>   c0 14      CPY #$14
<b>828d</b>   d0 ed      BNE <a href="#827c">.__SetupTitleScreenText__PressButtonToPlayLoop</a>
</div>



<b>.__SetupTitleScreenText__JumpToPart2</b>

<div class="disass_code"><b>828f</b>   4c d7 82   JMP <a href="#82d7">.__SetupTitleScreenText__Part2</a>
</div>
<a name="8292"></a>


<b>.__SetupTitleScreenText__ScoresMode</b>

<div class="disass_code"><b>8292</b>   a2 00      LDX #$00
<b>8294</b>   a0 00      LDY #$00
</div>
<a name="8296"></a>


<b>.__SetupTitleScreenText__Plyr1Ply2Loop</b>

<div class="disass_comment">; .plyr.1......plyr.2.
</div>
<div class="disass_code"><b>8296</b>   b9 b8 6b   LDA .Text_Plyr1Ply2,Y
<b>8299</b>   9d f8 0a   STA $0af8,X
<b>829c</b>   e8         INX 
<b>829d</b>   18         CLC 
<b>829e</b>   69 34      ADC #$34
<b>82a0</b>   9d f8 0a   STA $0af8,X
<b>82a3</b>   e8         INX 
<b>82a4</b>   c8         INY 
<b>82a5</b>   c0 14      CPY #$14
<b>82a7</b>   d0 ed      BNE <a href="#8296">.__SetupTitleScreenText__Plyr1Ply2Loop</a>
<b>82a9</b>   a2 00      LDX #$00
<b>82ab</b>   a0 00      LDY #$00
<a name="82ad"></a><b>82ad</b>   b9 12 98   LDA .CurrentHighScoreText[20],Y
<b>82b0</b>   9d 20 0b   STA $0b20,X
<b>82b3</b>   e8         INX 
<b>82b4</b>   18         CLC 
<b>82b5</b>   69 34      ADC #$34
<b>82b7</b>   9d 20 0b   STA $0b20,X
<b>82ba</b>   e8         INX 
<b>82bb</b>   c8         INY 
<b>82bc</b>   c0 14      CPY #$14
<b>82be</b>   d0 ed      BNE <a href="#82ad">$82ad</a>
<b>82c0</b>   a2 00      LDX #$00
<b>82c2</b>   a0 00      LDY #$00
<a name="82c4"></a><b>82c4</b>   b9 26 98   LDA .CurrentLastScoreText[20],Y
<b>82c7</b>   9d 48 0b   STA $0b48,X
<b>82ca</b>   e8         INX 
<b>82cb</b>   18         CLC 
<b>82cc</b>   69 34      ADC #$34
<b>82ce</b>   9d 48 0b   STA $0b48,X
<b>82d1</b>   e8         INX 
<b>82d2</b>   c8         INY 
<b>82d3</b>   c0 14      CPY #$14
<b>82d5</b>   d0 ed      BNE <a href="#82c4">$82c4</a>
</div>
<a name="82d7"></a>


<b>.__SetupTitleScreenText__Part2</b>

<div class="disass_code"><b>82d7</b>   a2 00      LDX #$00
<b>82d9</b>   a0 00      LDY #$00
</div>
<a name="82db"></a>


<b>.__SetupTitleScreenText__F1TextLine5Loop</b>

<div class="disass_comment">; .cave?.a..level?.1..
</div>
<div class="disass_code"><b>82db</b>   b9 44 6c   LDA .F1Text__Line5,Y
<b>82de</b>   9d 98 0b   STA $0b98,X
<b>82e1</b>   e8         INX 
<b>82e2</b>   18         CLC 
<b>82e3</b>   69 34      ADC #$34
<b>82e5</b>   9d 98 0b   STA $0b98,X
<b>82e8</b>   e8         INX 
<b>82e9</b>   c8         INY 
<b>82ea</b>   c0 14      CPY #$14
<b>82ec</b>   d0 ed      BNE <a href="#82db">.__SetupTitleScreenText__F1TextLine5Loop</a>
<b>82ee</b>   a2 00      LDX #$00
<b>82f0</b>   a0 00      LDY #$00
</div>
<a name="82f2"></a>


<b>.__SetupTitleScreenText__F1TextLine4Loop</b>

<div class="disass_comment">; 1.player..1.joystick
</div>
<div class="disass_code"><b>82f2</b>   b9 a4 6b   LDA .F1Text__Line4,Y
<b>82f5</b>   9d 70 0b   STA $0b70,X
<b>82f8</b>   e8         INX 
<b>82f9</b>   18         CLC 
<b>82fa</b>   69 34      ADC #$34
<b>82fc</b>   9d 70 0b   STA $0b70,X
<b>82ff</b>   e8         INX 
<b>8300</b>   c8         INY 
<b>8301</b>   c0 14      CPY #$14
</div>
<a name="8303"></a>


<b>.MusicNoteToFreqTableBase</b>

<div class="disass_code"><b>8303</b>   d0 ed      BNE <a href="#82f2">.__SetupTitleScreenText__F1TextLine4Loop</a>
<b>8305</b>   a2 27      LDX #$27
<b>8307</b>   a9 20      LDA #$20
<a name="8309"></a><b>8309</b>   9d c0 0b   STA $0bc0,X
<b>830c</b>   ca         DEX 
<b>830d</b>   10 fa      BPL <a href="#8309">$8309</a>
<b>830f</b>   20 f0 81   JSR <a href="#81f0">.TitleScreenFillInPlayerAndJoystick</a>
<b>8312</b>   a9 00      LDA #$00
<b>8314</b>   85 cc      STA .ForceCreditsMode
<b>8316</b>   60         RTS 
</div>



<b>.ActualMusicNoteToFreqTable</b>

<div class="disass_code"><b>8317</b>   dc 02 0a 03  3a 03 6c 03  a0 03 d2 03  12 04 4c 04
<b>8327</b>   92 04 d6 04  20 05 6e 05  b8 05 14 06  74 06 d8 06
<b>8337</b>   40 07 a4 07  24 08 98 08  24 09 ac 09  40 0a dc 0a
<b>8347</b>   70 0b 28 0c  e8 0c b0 0d  80 0e 48 0f  48 10 30 11
<b>8357</b>   48 12 58 13  80 14 b8 15  e0 16 50 18  d0 19 60 1b
<b>8367</b>   00 1d 90 1e  90 20 60 22  90 24 b0 26  00 29 70 2b
<b>8377</b>   c0 2d
</div>



<b>.LevelActiveAnimations[]</b>

<div class="disass_comment">; >=4   : Amoeba
; bit 1 : Butterfly
; bit 0 : Firefly
</div>
<div class="disass_code"><b>8379</b>   00 01 00 02  01 01 05 01  00 01 01 01  06 03 01 01
<b>8389</b>   02 01 01 01
</div>
<a name="838d"></a>

<div class="disass_comment">; 
</div>

<b>.MakeF1ScreenControlsLightBlue</b>

<div class="disass_code"><b>838d</b>   a9 0e      LDA #$0e
<b>838f</b>   a2 01      LDX #$01
</div>
<a name="8391"></a>

<div class="disass_comment">; line 23, column 1
</div>


<div class="disass_code"><b>8391</b>   9d 70 db   STA $db70,X
</div>


<div class="disass_comment">; line 23, column 21
</div>


<div class="disass_code"><b>8394</b>   9d 84 db   STA $db84,X
</div>


<div class="disass_comment">; line 24, column 15
</div>


<div class="disass_code"><b>8397</b>   9d a6 db   STA $dba6,X
</div>


<div class="disass_comment">; line 24, column 35
</div>


<div class="disass_code"><b>839a</b>   9d ba db   STA $dbba,X
<b>839d</b>   ca         DEX 
<b>839e</b>   10 f1      BPL <a href="#8391">$8391</a>
<b>83a0</b>   60         RTS 
</div>
<a name="83a1"></a>

<div class="disass_comment">; 
</div>

<b>.MakeFirstTwoLinesYellow</b>

<div class="disass_code"><b>83a1</b>   a9 07      LDA #$07
<b>83a3</b>   a2 4f      LDX #$4f
<a name="83a5"></a><b>83a5</b>   9d 00 d8   STA .C64_ColourRam,X
<b>83a8</b>   ca         DEX 
<b>83a9</b>   10 fa      BPL <a href="#83a5">$83a5</a>
<b>83ab</b>   60         RTS 
</div>
<a name="83ac"></a>

<div class="disass_comment">; 
</div>

<b>.MusicTickRoutine</b>

<div class="disass_code"><b>83ac</b>   a5 c1      LDA .TitleScreenFrameCountMod4
<b>83ae</b>   29 01      AND #$01
<b>83b0</b>   d0 01      BNE <a href="#83b3">$83b3</a>
<b>83b2</b>   60         RTS 
<a name="83b3"></a><b>83b3</b>   ad 0c 98   LDA .MusicTickRoutine::Voice1SustainLevel
<b>83b6</b>   c9 a0      CMP #$a0
<b>83b8</b>   d0 43      BNE <a href="#83fd">.__MusicTickRoutine__TweakCurrentNote</a>
</div>



<b>.__MusicTickRoutine__NextNote</b>

<div class="disass_comment">; Set voice 1&2 to triangle wave.
</div>
<div class="disass_code"><b>83ba</b>   a9 10      LDA #$10
<b>83bc</b>   8d 04 d4   STA .Sid_Voice1Ctrl
<b>83bf</b>   8d 0b d4   STA .Sid_Voice2Ctrl
</div>


<div class="disass_comment">; Voice 2:
; Attack 10
; Decay 8
</div>


<div class="disass_code"><b>83c2</b>   a9 a8      LDA #$a8
<b>83c4</b>   8d 0c d4   STA .Sid_Voice2AttackDecay
<b>83c7</b>   8d 0d d4   STA .Sid_Voice2SustainRelease
</div>


<div class="disass_comment">; 
</div>


<div class="disass_code"><b>83ca</b>   ae 00 98   LDX .MusicDataIndex
<b>83cd</b>   ee 00 98   INC .MusicDataIndex
<b>83d0</b>   ee 00 98   INC .MusicDataIndex
<b>83d3</b>   bd e9 5f   LDA .MusicData_Voice1,X
<b>83d6</b>   0a         ASL A
<b>83d7</b>   a8         TAY 
<b>83d8</b>   b9 03 83   LDA <a href="#8303">.MusicNoteToFreqTableBase</a>,Y
<b>83db</b>   8d 00 d4   STA .Sid_Voice1FreqLo
<b>83de</b>   b9 04 83   LDA <a href="#8303">.MusicNoteToFreqTableBase</a>+1,Y
<b>83e1</b>   8d 01 d4   STA .Sid_Voice1FreqHi
<b>83e4</b>   bd e8 5f   LDA <a href="#5fe8">.ThemeMusicData</a>,X
<b>83e7</b>   0a         ASL A
<b>83e8</b>   a8         TAY 
<b>83e9</b>   b9 03 83   LDA <a href="#8303">.MusicNoteToFreqTableBase</a>,Y
<b>83ec</b>   8d 07 d4   STA .Sid_Voice2FreqLo
<b>83ef</b>   b9 04 83   LDA <a href="#8303">.MusicNoteToFreqTableBase</a>+1,Y
<b>83f2</b>   8d 08 d4   STA .Sid_Voice2FreqHi
<b>83f5</b>   ad 00 98   LDA .MusicDataIndex
<b>83f8</b>   d0 03      BNE <a href="#83fd">.__MusicTickRoutine__TweakCurrentNote</a>
<b>83fa</b>   ee 01 98   INC .MusicLoopedCount
</div>
<a name="83fd"></a>


<b>.__MusicTickRoutine__TweakCurrentNote</b>

<div class="disass_code"><b>83fd</b>   ad 0c 98   LDA .MusicTickRoutine::Voice1SustainLevel
<b>8400</b>   49 07      EOR #$07
<b>8402</b>   69 04      ADC #$04
<b>8404</b>   0a         ASL A
<b>8405</b>   0a         ASL A
<b>8406</b>   0a         ASL A
<b>8407</b>   0a         ASL A
<b>8408</b>   8d 06 d4   STA .Sid_Voice1SustainRelease
<b>840b</b>   a9 11      LDA #$11
<b>840d</b>   8d 04 d4   STA .Sid_Voice1Ctrl
<b>8410</b>   8d 0b d4   STA .Sid_Voice2Ctrl
<b>8413</b>   ad 0c 98   LDA .MusicTickRoutine::Voice1SustainLevel
<b>8416</b>   18         CLC 
<b>8417</b>   69 01      ADC #$01
<b>8419</b>   29 a7      AND #$a7
<b>841b</b>   8d 0c 98   STA .MusicTickRoutine::Voice1SustainLevel
<b>841e</b>   a5 a2      LDA .IsDemoMode
<b>8420</b>   f0 0b      BEQ <a href="#842d">$842d</a>
<b>8422</b>   ad 01 98   LDA .MusicLoopedCount
<b>8425</b>   c9 02      CMP #$02
<b>8427</b>   d0 04      BNE <a href="#842d">$842d</a>
<b>8429</b>   a9 01      LDA #$01
<b>842b</b>   85 cd      STA .StartGameTrigger
<a name="842d"></a><b>842d</b>   60         RTS 
</div>
<a name="842e"></a>

<div class="disass_comment">; 
</div>

<b>.ScrollingBGUpdateFillChars</b>

<div class="disass_code"><b>842e</b>   a2 07      LDX #$07
<a name="8430"></a><b>8430</b>   bd 30 20   LDA $2030,X
<b>8433</b>   1d 00 20   ORA .CopiedTitleCharDataBlock0,X
<b>8436</b>   9d 48 20   STA $2048,X
<b>8439</b>   bd 38 20   LDA $2038,X
<b>843c</b>   1d 00 20   ORA .CopiedTitleCharDataBlock0,X
<b>843f</b>   9d 50 20   STA $2050,X
<b>8442</b>   ca         DEX 
<b>8443</b>   10 eb      BPL <a href="#8430">$8430</a>
<b>8445</b>   60         RTS 
</div>
<a name="8446"></a>


<b>.TitleIRQActions</b>

<div class="disass_code"><b>8446</b>   a5 cf      LDA .RastInt_FurthestFromTitleIRQRaceCondition
<b>8448</b>   d0 07      BNE <a href="#8451">.__TitleIRQActions__NotZero</a>
</div>



<b>.__TitleIRQActions__Zero</b>

<div class="disass_code"><b>844a</b>   a9 01      LDA #$01
<b>844c</b>   85 cf      STA .RastInt_FurthestFromTitleIRQRaceCondition
<b>844e</b>   4c 66 84   JMP <a href="#8466">.__TitleIRQActions__Return</a>
</div>
<a name="8451"></a>


<b>.__TitleIRQActions__NotZero</b>

<div class="disass_code"><b>8451</b>   e6 c1      INC .TitleScreenFrameCountMod4
<b>8453</b>   a5 c1      LDA .TitleScreenFrameCountMod4
<b>8455</b>   c9 04      CMP #$04
<b>8457</b>   90 0a      BCC <a href="#8463">.__TitleIRQActions__Lt4</a>
</div>



<b>.__TitleIRQActions__GtEq4</b>

<div class="disass_code"><b>8459</b>   a9 00      LDA #$00
<b>845b</b>   85 c1      STA .TitleScreenFrameCountMod4
<b>845d</b>   20 87 74   JSR <a href="#7487">.AnimateTitleScreenBkgndChar</a>
<b>8460</b>   20 2e 84   JSR <a href="#842e">.ScrollingBGUpdateFillChars</a>
</div>
<a name="8463"></a>


<b>.__TitleIRQActions__Lt4</b>

<div class="disass_code"><b>8463</b>   20 ac 83   JSR <a href="#83ac">.MusicTickRoutine</a>
</div>
<a name="8466"></a>


<b>.__TitleIRQActions__Return</b>

<div class="disass_code"><b>8466</b>   60         RTS 
</div>
<a name="8467"></a>


<b>.HandleNumPlayersAndJoysticks</b>

<div class="disass_code"><b>8467</b>   a5 fb      LDA .LastKeyInScanRow0_ScannedMoreThanOnce
<b>8469</b>   c9 df      CMP #$df
<b>846b</b>   d0 2e      BNE <a href="#849b">$849b</a>
</div>



<b>.__HandleNumPlayersAndJoysticks__F3Pressed</b>

<div class="disass_code"><b>846d</b>   a9 00      LDA #$00
<b>846f</b>   8d 01 98   STA .MusicLoopedCount
</div>


<div class="disass_comment">; .NumPlayersAndJoysticksState:
; 1 -> 1 player(s), 1 joystick(s)
; 2 -> 2 player(s), 1 joystick(s)
; 3 -> 2 player(s), 2 joystick(s)
</div>


<div class="disass_code"><b>8472</b>   e6 d0      INC .NumPlayersAndJoysticksState
<b>8474</b>   a5 d0      LDA .NumPlayersAndJoysticksState
<b>8476</b>   c9 04      CMP #$04
<b>8478</b>   d0 0b      BNE <a href="#8485">.__HandleNumPlayersAndJoysticks__Not4</a>
</div>



<b>.__HandleNumPlayersAndJoysticks__Is4</b>

<div class="disass_code"><b>847a</b>   a2 01      LDX #$01
<b>847c</b>   86 d0      STX .NumPlayersAndJoysticksState
<b>847e</b>   ca         DEX 
<b>847f</b>   86 9e      STX .NumPlayerMinusOne
<b>8481</b>   86 a4      STX .NumJoysticksMinusOne
<b>8483</b>   f0 10      BEQ <a href="#8495">.__HandleNumPlayersAndJoysticks__Not3</a>
</div>
<a name="8485"></a>


<b>.__HandleNumPlayersAndJoysticks__Not4</b>

<div class="disass_code"><b>8485</b>   a5 d0      LDA .NumPlayersAndJoysticksState
<b>8487</b>   c9 02      CMP #$02
<b>8489</b>   d0 02      BNE <a href="#848d">.__HandleNumPlayersAndJoysticks__Not2</a>
</div>



<b>.__HandleNumPlayersAndJoysticks__Is2</b>

<div class="disass_code"><b>848b</b>   e6 9e      INC .NumPlayerMinusOne
</div>
<a name="848d"></a>


<b>.__HandleNumPlayersAndJoysticks__Not2</b>

<div class="disass_code"><b>848d</b>   a5 d0      LDA .NumPlayersAndJoysticksState
<b>848f</b>   c9 03      CMP #$03
<b>8491</b>   d0 02      BNE <a href="#8495">.__HandleNumPlayersAndJoysticks__Not3</a>
</div>



<b>.__HandleNumPlayersAndJoysticks__Is3</b>

<div class="disass_code"><b>8493</b>   e6 a4      INC .NumJoysticksMinusOne
</div>
<a name="8495"></a>


<b>.__HandleNumPlayersAndJoysticks__Not3</b>

<div class="disass_code"><b>8495</b>   20 f0 81   JSR <a href="#81f0">.TitleScreenFillInPlayerAndJoystick</a>
<b>8498</b>   20 0c 7d   JSR <a href="#7d0c">.FourDelays</a>
<a name="849b"></a><b>849b</b>   a9 00      LDA #$00
<b>849d</b>   85 fb      STA .LastKeyInScanRow0_ScannedMoreThanOnce
<b>849f</b>   4c f0 81   JMP <a href="#81f0">.TitleScreenFillInPlayerAndJoystick</a>
</div>
<a name="84a2"></a>

<div class="disass_comment">; 
</div>

<b>.HandleCaveAndLevelSecection</b>

<div class="disass_code"><b>84a2</b>   20 5d 6b   JSR <a href="#6b5d">.ReadJoystickDirectionPort1</a>
<b>84a5</b>   c9 0f      CMP #$0f
<b>84a7</b>   f0 6b      BEQ <a href="#8514">.__HandleCaveAndLevelSecection__Centered</a>
</div>


<div class="disass_comment">; 
; Any joystick movement resets the music repeat count.
</div>


<div class="disass_code"><b>84a9</b>   a2 00      LDX #$00
<b>84ab</b>   8e 01 98   STX .MusicLoopedCount
</div>


<div class="disass_comment">; 
</div>


<div class="disass_code"><b>84ae</b>   c9 0d      CMP #$0d
<b>84b0</b>   d0 06      BNE <a href="#84b8">$84b8</a>
</div>



<b>.__HandleCaveAndLevelSecection__Down</b>

<div class="disass_code"><b>84b2</b>   a6 5e      LDX .Level
<b>84b4</b>   f0 02      BEQ <a href="#84b8">$84b8</a>
<b>84b6</b>   c6 5e      DEC .Level
<a name="84b8"></a><b>84b8</b>   c9 0e      CMP #$0e
<b>84ba</b>   d0 12      BNE <a href="#84ce">$84ce</a>
</div>



<b>.__HandleCaveAndLevelSecection__Up</b>

<div class="disass_code"><b>84bc</b>   a9 04      LDA #$04
<b>84be</b>   c5 5e      CMP .Level
<b>84c0</b>   f0 02      BEQ <a href="#84c4">$84c4</a>
<b>84c2</b>   e6 5e      INC .Level
</div>
<a name="84c4"></a>

<div class="disass_comment">; 
; If .Level is 3 (4 in game) set .Cave to 1 (A).
</div>


<div class="disass_code"><b>84c4</b>   a5 5e      LDA .Level
<b>84c6</b>   c9 03      CMP #$03
<b>84c8</b>   d0 04      BNE <a href="#84ce">$84ce</a>
<b>84ca</b>   a9 01      LDA #$01
<b>84cc</b>   85 5d      STA .Cave
</div>
<a name="84ce"></a>

<div class="disass_comment">; 
</div>


<div class="disass_code"><b>84ce</b>   20 5d 6b   JSR <a href="#6b5d">.ReadJoystickDirectionPort1</a>
<b>84d1</b>   c9 0b      CMP #$0b
<b>84d3</b>   d0 0a      BNE <a href="#84df">$84df</a>
</div>



<b>.__HandleCaveAndLevelSecection__Left</b>

<div class="disass_code"><b>84d5</b>   a5 5d      LDA .Cave
<b>84d7</b>   c9 05      CMP #$05
<b>84d9</b>   90 04      BCC <a href="#84df">$84df</a>
</div>


<div class="disass_comment">; .Cave >= 5. Four caves back.
</div>


<div class="disass_code"><b>84db</b>   e9 04      SBC #$04
<b>84dd</b>   85 5d      STA .Cave
<a name="84df"></a><b>84df</b>   20 5d 6b   JSR <a href="#6b5d">.ReadJoystickDirectionPort1</a>
<b>84e2</b>   c9 07      CMP #$07
<b>84e4</b>   d0 10      BNE <a href="#84f6">$84f6</a>
</div>



<b>.__HandleCaveAndLevelSecection__Right</b>

<div class="disass_comment">; If .Level >=3 (>=4 as shown in game) the you can't select any Cave but A.
</div>
<div class="disass_code"><b>84e6</b>   a5 5e      LDA .Level
<b>84e8</b>   c9 03      CMP #$03
<b>84ea</b>   b0 0a      BCS <a href="#84f6">$84f6</a>
</div>


<div class="disass_comment">; .Level < 3 (< 4 in game)
</div>


<div class="disass_code"><b>84ec</b>   a5 5d      LDA .Cave
<b>84ee</b>   c9 0d      CMP #$0d
<b>84f0</b>   b0 04      BCS <a href="#84f6">$84f6</a>
</div>


<div class="disass_comment">; Skip four caves.
</div>


<div class="disass_code"><b>84f2</b>   69 04      ADC #$04
<b>84f4</b>   85 5d      STA .Cave
</div>
<a name="84f6"></a>

<div class="disass_comment">; 
; Skip writing to screen if we're in license mode.
; Interestingly the cave and level can still be adjusted.
</div>


<div class="disass_code"><b>84f6</b>   a5 a3      LDA .TitleScreenInLicenseMode
<b>84f8</b>   d0 1a      BNE <a href="#8514">.__HandleCaveAndLevelSecection__Centered</a>
</div>


<div class="disass_comment">; Write cave and level to screen.
</div>


<div class="disass_code"><b>84fa</b>   a5 5e      LDA .Level
<b>84fc</b>   18         CLC 
<b>84fd</b>   69 11      ADC #$11
<b>84ff</b>   8d ba 0b   STA $0bba
<b>8502</b>   69 34      ADC #$34
<b>8504</b>   8d bb 0b   STA $0bbb
<b>8507</b>   a5 5d      LDA .Cave
<b>8509</b>   18         CLC 
<b>850a</b>   69 20      ADC #$20
<b>850c</b>   8d a6 0b   STA $0ba6
<b>850f</b>   69 34      ADC #$34
<b>8511</b>   8d a7 0b   STA $0ba7
</div>
<a name="8514"></a>


<b>.__HandleCaveAndLevelSecection__Centered</b>

<div class="disass_code"><b>8514</b>   20 03 7d   JSR <a href="#7d03">.Delay</a>
<b>8517</b>   60         RTS 
</div>
<a name="8518"></a>

<div class="disass_comment">; 
</div>

<b>.TitleScreenLoop</b>

<div class="disass_code"><b>8518</b>   20 67 84   JSR <a href="#8467">.HandleNumPlayersAndJoysticks</a>
<b>851b</b>   20 a2 84   JSR <a href="#84a2">.HandleCaveAndLevelSecection</a>
<b>851e</b>   a5 a3      LDA .TitleScreenInLicenseMode
<b>8520</b>   f0 21      BEQ <a href="#8543">.TitleScreenLoop__NotLicenseMode</a>
</div>


<div class="disass_comment">; 
</div>

<b>.__TitleScreenLoop__LicenseMode</b>

<div class="disass_comment">; Make lines 1 and 24 yellow.
</div>
<div class="disass_code"><b>8522</b>   a9 07      LDA #$07
<b>8524</b>   a2 27      LDX #$27
</div>
<a name="8526"></a>

<div class="disass_comment">; Line 24, column 1
</div>


<div class="disass_code"><b>8526</b>   9d 98 db   STA $db98,X
</div>


<div class="disass_comment">; Line 1, column 1
</div>


<div class="disass_code"><b>8529</b>   9d 00 d8   STA .C64_ColourRam,X
<b>852c</b>   ca         DEX 
<b>852d</b>   10 f7      BPL <a href="#8526">$8526</a>
</div>


<div class="disass_comment">; 
; Is F1 pressed?
</div>


<div class="disass_code"><b>852f</b>   a5 fb      LDA .LastKeyInScanRow0_ScannedMoreThanOnce
<b>8531</b>   c9 ef      CMP #$ef
<b>8533</b>   d0 4f      BNE <a href="#8584">.__TitleScreenLoop__F1NotPressed</a>
</div>



<b>.__TitleScreenLoop__F1Pressed</b>

<div class="disass_code"><b>8535</b>   a9 01      LDA #$01
<b>8537</b>   85 cc      STA .ForceCreditsMode
<b>8539</b>   20 27 82   JSR <a href="#8227">.SetupTitleScreenText</a>
</div>


<div class="disass_comment">; Set lower 23 lines of colour RAM to MCM-white.
</div>


<div class="disass_code"><b>853c</b>   a9 09      LDA #$09
<b>853e</b>   a0 50      LDY #$50
<b>8540</b>   20 e3 6a   JSR <a href="#6ae3">.SetColourRamForCave</a>
</div>
<a name="8543"></a>


<b>.TitleScreenLoop__NotLicenseMode</b>

<div class="disass_code"><b>8543</b>   20 8d 83   JSR <a href="#838d">.MakeF1ScreenControlsLightBlue</a>
<b>8546</b>   20 a1 83   JSR <a href="#83a1">.MakeFirstTwoLinesYellow</a>
<b>8549</b>   a9 01      LDA #$01
<b>854b</b>   a2 0d      LDX #$0d
</div>
<a name="854d"></a>

<div class="disass_comment">; Line 24 column 1
</div>


<div class="disass_code"><b>854d</b>   9d 98 db   STA $db98,X
</div>


<div class="disass_comment">; Line 24 column 29
</div>


<div class="disass_code"><b>8550</b>   9d aa db   STA $dbaa,X
<b>8553</b>   ca         DEX 
<b>8554</b>   10 f7      BPL <a href="#854d">$854d</a>
</div>


<div class="disass_comment">; 
; Fill in level and cave.
</div>


<div class="disass_code"><b>8556</b>   a5 5e      LDA .Level
<b>8558</b>   18         CLC 
<b>8559</b>   69 11      ADC #$11
</div>


<div class="disass_comment">; line 24, column 35
</div>


<div class="disass_code"><b>855b</b>   8d ba 0b   STA $0bba
<b>855e</b>   69 34      ADC #$34
<b>8560</b>   8d bb 0b   STA $0bbb
<b>8563</b>   a5 5d      LDA .Cave
<b>8565</b>   18         CLC 
<b>8566</b>   69 20      ADC #$20
</div>


<div class="disass_comment">; line 24, column 15
</div>


<div class="disass_code"><b>8568</b>   8d a6 0b   STA $0ba6
<b>856b</b>   69 34      ADC #$34
<b>856d</b>   8d a7 0b   STA $0ba7
</div>


<div class="disass_comment">; 
; The number of joysticks and players is handled in .HandleNumPlayersAndJoysticks.
; This is lucky as this code only fills in the first character of the number of players.
</div>


<div class="disass_code"><b>8570</b>   a5 9e      LDA .NumPlayerMinusOne
<b>8572</b>   c9 ff      CMP #$ff
<b>8574</b>   d0 02      BNE <a href="#8578">$8578</a>
<b>8576</b>   e6 9e      INC .NumPlayerMinusOne
<a name="8578"></a><b>8578</b>   a5 9e      LDA .NumPlayerMinusOne
<b>857a</b>   18         CLC 
<b>857b</b>   69 11      ADC #$11
</div>


<div class="disass_comment">; line 23, column 1
</div>


<div class="disass_code"><b>857d</b>   8d 70 0b   STA $0b70
</div>


<div class="disass_comment">; 
</div>


<div class="disass_code"><b>8580</b>   a9 00      LDA #$00
<b>8582</b>   85 a3      STA .TitleScreenInLicenseMode
</div>
<a name="8584"></a>


<b>.__TitleScreenLoop__F1NotPressed</b>

<div class="disass_code"><b>8584</b>   a5 a3      LDA .TitleScreenInLicenseMode
<b>8586</b>   d0 0b      BNE <a href="#8593">$8593</a>
<b>8588</b>   20 74 6b   JSR <a href="#6b74">.ReadFireButtonPort1</a>
<b>858b</b>   d0 06      BNE <a href="#8593">$8593</a>
<b>858d</b>   85 a2      STA .IsDemoMode
<b>858f</b>   a9 01      LDA #$01
<b>8591</b>   85 cd      STA .StartGameTrigger
<a name="8593"></a><b>8593</b>   a5 cd      LDA .StartGameTrigger
<b>8595</b>   d0 03      BNE <a href="#859a">$859a</a>
<b>8597</b>   4c 18 85   JMP <a href="#8518">.TitleScreenLoop</a>
<a name="859a"></a><b>859a</b>   60         RTS 
</div>
<a name="859b"></a>

<div class="disass_comment">; 
</div>

<b>.RunTitleScreen</b>

<div class="disass_comment">;  Reset scrolling background character.
</div>
<div class="disass_code"><b>859b</b>   a2 00      LDX #$00
<a name="859d"></a><b>859d</b>   bd 58 20   LDA $2058,X
<b>85a0</b>   9d 00 20   STA .CopiedTitleCharDataBlock0,X
<b>85a3</b>   e8         INX 
<b>85a4</b>   e0 08      CPX #$08
<b>85a6</b>   d0 f5      BNE <a href="#859d">$859d</a>
</div>


<div class="disass_comment">; 
</div>


<div class="disass_code"><b>85a8</b>   a9 01      LDA #$01
<b>85aa</b>   85 5d      STA .Cave
<b>85ac</b>   85 a2      STA .IsDemoMode
<b>85ae</b>   20 18 85   JSR <a href="#8518">.TitleScreenLoop</a>
</div>


<div class="disass_comment">; 
; When we get here a game has started (this includes demo mode).
</div>


<div class="disass_code"><b>85b1</b>   a9 01      LDA #$01
<b>85b3</b>   85 bd      STA .PlayRevealLevelSoundAndRedefineCharFlag
<b>85b5</b>   85 c2      STA .AnotherFrameCounter
</div>


<div class="disass_comment">; Retool raster interrupts for in-game mode.
</div>


<div class="disass_code"><b>85b7</b>   78         SEI 
<b>85b8</b>   a2 07      LDX #$07
<a name="85ba"></a><b>85ba</b>   bd 13 86   LDA .RastIntGameModeVICRegs,X
<b>85bd</b>   95 54      STA .RastInt_vic_control1[],X
<b>85bf</b>   ca         DEX 
<b>85c0</b>   10 f8      BPL <a href="#85ba">$85ba</a>
<b>85c2</b>   58         CLI 
<b>85c3</b>   a9 00      LDA #$00
<b>85c5</b>   85 ce      STA .RastInt_IntroScreenFlag
</div>


<div class="disass_comment">; 
</div>


<div class="disass_code"><b>85c7</b>   85 c1      STA .TitleScreenFrameCountMod4
<b>85c9</b>   85 fb      STA .LastKeyInScanRow0_ScannedMoreThanOnce
<b>85cb</b>   85 fc      STA .LastKeyInScanRow7_ScannedMoreThanOnce
<b>85cd</b>   20 f4 7c   JSR <a href="#7cf4">.ResetSound</a>
<b>85d0</b>   a5 a2      LDA .IsDemoMode
<b>85d2</b>   f0 07      BEQ <a href="#85db">.__RunTitleScreen__GameMode</a>
</div>



<b>.__RunTitleScreen__DemoMode</b>

<div class="disass_code"><b>85d4</b>   a2 00      LDX #$00
<b>85d6</b>   86 5e      STX .Level
<b>85d8</b>   e8         INX 
<b>85d9</b>   86 5d      STX .Cave
</div>
<a name="85db"></a>


<b>.__RunTitleScreen__GameMode</b>

<div class="disass_comment">; $984e: player.1,.2.men.a/1.
; .................|
; Men left----->---/
</div>
<div class="disass_code"><b>85db</b>   a9 13      LDA #$13
<b>85dd</b>   8d 58 98   STA $9858
<b>85e0</b>   85 95      STA .GeneralTimeRemaining
</div>




<div class="disass_comment">; $984e: player.1,.2.men.a/1.
; .......................|
; Cave--------->---------/
</div>
<div class="disass_code"><b>85e2</b>   a5 5d      LDA .Cave
<b>85e4</b>   18         CLC 
<b>85e5</b>   69 20      ADC #$20
<b>85e7</b>   8d 5e 98   STA $985e
</div>




<div class="disass_comment">; $984e: player.1,.2.men.a/1.
; .........................|
; Level---------->---------/
</div>
<div class="disass_code"><b>85ea</b>   a5 5e      LDA .Level
<b>85ec</b>   18         CLC 
<b>85ed</b>   69 11      ADC #$11
<b>85ef</b>   8d 60 98   STA $9860
</div>


<div class="disass_comment">; Set top line text to player into display.
</div>


<div class="disass_code"><b>85f2</b>   a9 00      LDA #$00
<b>85f4</b>   85 94      STA .EnableIRQTriggeredSFXAndTopLineUpdates
<b>85f6</b>   a9 4e      LDA #$4e
<b>85f8</b>   85 46      STA .__Local1__
<b>85fa</b>   a9 98      LDA #$98
<b>85fc</b>   85 47      STA .__Local2__
<b>85fe</b>   20 16 6b   JSR <a href="#6b16">.SetTopLineText</a>
</div>


<div class="disass_comment">; Start.
</div>


<div class="disass_code"><b>8601</b>   a9 02      LDA #$02
<b>8603</b>   85 97      STA .__UnknownZP_97
<b>8605</b>   60         RTS 
</div>
<a name="8606"></a>

<div class="disass_comment">; 
</div>

<b>.TitleModeVICColourRegs</b>

<div class="disass_code"><b>8606</b>   00 00 06 0e  09
</div>


<div class="disass_comment">; 
; struct RastIntVicRegs
; {
; BYTE Vic_Control1[2]; // $d011
; BYTE Vic_Control2[2]; // $d016
; BYTE Vic_MemCtrl[2];  // $d018
; BYTE Vic_Raster[2];   // $d012
; };
; 
; Vic_Control1 0x1b =
; ECM: off,
; Bitmap: off,
; Blank: off,
; 25 rows,
; Y Position: 3
; 
; Vic_Control2 0x18 =
; MCM: on,
; 40 cols,
; X Pos: 0
; 
; Vic_MemCtrl 0x38 =
; Charset 0x2000
; Tilemap 0x0c00
; 
; Vic_MemCtrl 0x28 =
; Charset 0x2000
; Tilemap 0x0800
</div>

<b>.RastIntTitleModeVICRegs</b>

<div class="disass_code"><b>860b</b>   1b 1b 18 18  38 28 28 c2
</div>


<div class="disass_comment">; 
; struct RastIntVicRegs
; {
; BYTE Vic_Control1[2]; // $d011
; BYTE Vic_Control2[2]; // $d016
; BYTE Vic_MemCtrl[2];  // $d018
; BYTE Vic_Raster[2];   // $d012
; };
; 
; Vic_Control1 0x10 =
; ECM: off,
; Bitmap: off,
; Blank: off,
; 24 rows,
; Y Position: 0
; 
; Vic_Control1 0x1b =
; ECM: off,
; Bitmap: off,
; Blank: off,
; 25 rows,
; Y Position: 3
; 
; Vic_Control2 0x10 =
; MCM: on,
; 38 cols,
; X Pos: 0
; 
; Vic_Control2 0x18 =
; MCM: on,
; 40 cols,
; X Pos: 0
; 
; Vic_MemCtrl 0x3c =
; Charset 0x3000
; Tilemap 0x0c00
; 
; Vic_MemCtrl 0x38 =
; Charset 0x2000
; Tilemap 0x0c00
</div>

<b>.RastIntGameModeVICRegs</b>

<div class="disass_code"><b>8613</b>   10 1b 10 18  3c 38 28 3b
</div>
<a name="861b"></a>

<div class="disass_comment">; 
</div>

<b>.SetupTitleScreen</b>

<div class="disass_code"><b>861b</b>   a9 00      LDA #$00
<b>861d</b>   85 cd      STA .StartGameTrigger
</div>


<div class="disass_comment">; 
; Tile map: $0800
; Charset : $2000	
</div>


<div class="disass_code"><b>861f</b>   a9 28      LDA #$28
<b>8621</b>   8d 18 d0   STA .Vic_MemCtrl
</div>


<div class="disass_comment">; Setup VIC colour registers.
</div>


<div class="disass_code"><b>8624</b>   a2 04      LDX #$04
<a name="8626"></a><b>8626</b>   bd 06 86   LDA <a href="#8606">.TitleModeVICColourRegs</a>,X
<b>8629</b>   9d 20 d0   STA .Vic_BorderColour,X
<b>862c</b>   ca         DEX 
<b>862d</b>   10 f7      BPL <a href="#8626">$8626</a>
</div>


<div class="disass_comment">; 
</div>


<div class="disass_code"><b>862f</b>   a9 09      LDA #$09
<b>8631</b>   a0 00      LDY #$00
<b>8633</b>   20 e3 6a   JSR <a href="#6ae3">.SetColourRamForCave</a>
<b>8636</b>   e6 46      INC .__Local1__
<b>8638</b>   c6 47      DEC .__Local2__
<b>863a</b>   a9 01      LDA #$01
<a name="863c"></a><b>863c</b>   91 46      STA (.__Local1__),Y
<b>863e</b>   c8         INY 
<b>863f</b>   d0 fb      BNE <a href="#863c">$863c</a>
<b>8641</b>   20 a1 83   JSR <a href="#83a1">.MakeFirstTwoLinesYellow</a>
<b>8644</b>   a5 a3      LDA .TitleScreenInLicenseMode
<b>8646</b>   d0 03      BNE <a href="#864b">$864b</a>
<b>8648</b>   20 8d 83   JSR <a href="#838d">.MakeF1ScreenControlsLightBlue</a>
<a name="864b"></a><b>864b</b>   20 27 82   JSR <a href="#8227">.SetupTitleScreenText</a>
<b>864e</b>   a9 00      LDA #$00
<b>8650</b>   85 cf      STA .RastInt_FurthestFromTitleIRQRaceCondition
<b>8652</b>   a9 01      LDA #$01
<b>8654</b>   85 ce      STA .RastInt_IntroScreenFlag
<a name="8656"></a><b>8656</b>   a5 cf      LDA .RastInt_FurthestFromTitleIRQRaceCondition
<b>8658</b>   f0 fc      BEQ <a href="#8656">$8656</a>
<b>865a</b>   a9 00      LDA #$00
<b>865c</b>   8d 00 98   STA .MusicDataIndex
<b>865f</b>   8d 01 98   STA .MusicLoopedCount
<b>8662</b>   8d 0b 98   STA .PlayRevealLevelSoundAndRedefineChar::SFXPhase
<b>8665</b>   8d 0e 98   STA $980e
<b>8668</b>   8d 0f 98   STA $980f
<b>866b</b>   8d 09 98   STA $9809
<b>866e</b>   8d 08 98   STA .BackBufferVICMemControl+1
<b>8671</b>   8d 11 98   STA $9811
<b>8674</b>   60         RTS 
</div>



<b>.IrqHandler</b>

<div class="disass_code"><b>8675</b>   ad 19 d0   LDA .Vic_IntReq
<b>8678</b>   8d 19 d0   STA .Vic_IntReq
<b>867b</b>   29 01      AND #$01
<b>867d</b>   f0 1e      BEQ <a href="#869d">._Irq__MandatoryProcessing</a>
</div>



<b>.__IRQHandler__Raster</b>

<div class="disass_code"><b>867f</b>   c6 a7      DEC .MarqueeOrGameArea
<b>8681</b>   10 04      BPL <a href="#8687">.__IRQHandler__InBody</a>
</div>



<b>.__IRQHandler__InMarquee</b>

<div class="disass_code"><b>8683</b>   a9 01      LDA #$01
<b>8685</b>   85 a7      STA .MarqueeOrGameArea
</div>
<a name="8687"></a>


<b>.__IRQHandler__InBody</b>

<div class="disass_code"><b>8687</b>   a6 a7      LDX .MarqueeOrGameArea
<b>8689</b>   b5 54      LDA .RastInt_vic_control1[],X
<b>868b</b>   8d 11 d0   STA .Vic_Control1
<b>868e</b>   b5 56      LDA .RastInt_vic_control2[],X
<b>8690</b>   8d 16 d0   STA .Vic_Control2
<b>8693</b>   b5 58      LDA .RastInt_vic_memory_control[],X
<b>8695</b>   8d 18 d0   STA .Vic_MemCtrl
<b>8698</b>   b5 5a      LDA .RastInt_vic_raster_pos[],X
<b>869a</b>   8d 12 d0   STA .Vic_Raster
</div>
<a name="869d"></a>


<b>._Irq__MandatoryProcessing</b>

<div class="disass_code"><b>869d</b>   20 04 87   JSR <a href="#8704">.Sneaky_@Returns_if_no_joystick_action_ELSE_Returns_to_IRQHandler_at_.IRQHandler__SneakyEntryPoint@</a>
</div>



<b>.__IRQHandler__ScanKeyboardRow0</b>

<div class="disass_code"><b>86a0</b>   a9 fe      LDA #$fe
<b>86a2</b>   8d 00 dc   STA .Cia1_DataA
<b>86a5</b>   ad 01 dc   LDA .Cia1_DataB
<b>86a8</b>   c9 ff      CMP #$ff
<b>86aa</b>   f0 0a      BEQ <a href="#86b6">.__IRQHanzdler__ScanKeyboardRow7</a>
</div>



<b>.__IRQHandler__KeyInScanRow0</b>

<div class="disass_code"><b>86ac</b>   c5 fd      CMP .LastKeyInScanRow0
<b>86ae</b>   d0 04      BNE <a href="#86b4">.__IRQHandler__KeyInScanRow0ScannedFirstTime</a>
</div>



<b>.__IRQHandler__KeyInScanRow0ScannedMoreThanOnce</b>

<div class="disass_code"><b>86b0</b>   85 fb      STA .LastKeyInScanRow0_ScannedMoreThanOnce
<b>86b2</b>   f0 02      BEQ <a href="#86b6">.__IRQHanzdler__ScanKeyboardRow7</a>
</div>
<a name="86b4"></a>


<b>.__IRQHandler__KeyInScanRow0ScannedFirstTime</b>

<div class="disass_code"><b>86b4</b>   85 fd      STA .LastKeyInScanRow0
</div>
<a name="86b6"></a>


<b>.__IRQHanzdler__ScanKeyboardRow7</b>

<div class="disass_code"><b>86b6</b>   a9 7f      LDA #$7f
<b>86b8</b>   8d 00 dc   STA .Cia1_DataA
<b>86bb</b>   ad 01 dc   LDA .Cia1_DataB
<b>86be</b>   c9 ff      CMP #$ff
<b>86c0</b>   f0 0a      BEQ <a href="#86cc">.__IRQHandler__DoneKeyScan</a>
</div>



<b>.__IRQHandler__KeyInScanRow7</b>

<div class="disass_code"><b>86c2</b>   c5 fe      CMP .LastKeyInScanRow7
<b>86c4</b>   d0 04      BNE <a href="#86ca">.__IRQHandler__KeyInScanRow7ScannedFirstTime</a>
</div>



<b>.__IRQHandler__KeyInScanRow7ScannedMoreThanOnce</b>

<div class="disass_code"><b>86c6</b>   85 fc      STA .LastKeyInScanRow7_ScannedMoreThanOnce
<b>86c8</b>   f0 02      BEQ <a href="#86cc">.__IRQHandler__DoneKeyScan</a>
</div>
<a name="86ca"></a>


<b>.__IRQHandler__KeyInScanRow7ScannedFirstTime</b>

<div class="disass_code"><b>86ca</b>   85 fe      STA .LastKeyInScanRow7
</div>
<a name="86cc"></a>


<b>.__IRQHandler__DoneKeyScan</b>

<div class="disass_code"><b>86cc</b>   20 04 87   JSR <a href="#8704">.Sneaky_@Returns_if_no_joystick_action_ELSE_Returns_to_IRQHandler_at_.IRQHandler__SneakyEntryPoint@</a>
</div>
<a name="86cf"></a>


<b>.__IRQHandler__SneakyEntryPoint</b>

<div class="disass_code"><b>86cf</b>   a5 ce      LDA .RastInt_IntroScreenFlag
<b>86d1</b>   c9 01      CMP #$01
<b>86d3</b>   d0 18      BNE <a href="#86ed">$86ed</a>
</div>



<b>.__IRQHandler__InTitleScreen</b>

<div class="disass_code"><b>86d5</b>   a5 a3      LDA .TitleScreenInLicenseMode
<b>86d7</b>   d0 04      BNE <a href="#86dd">$86dd</a>
<b>86d9</b>   a9 28      LDA #$28
<b>86db</b>   85 58      STA .RastInt_vic_memory_control[]
<a name="86dd"></a><b>86dd</b>   a9 00      LDA #$00
<b>86df</b>   8d 15 d0   STA .Vic_SpriteEnable
<b>86e2</b>   a9 18      LDA #$18
<b>86e4</b>   85 56      STA .RastInt_vic_control2[]
<b>86e6</b>   a9 1b      LDA #$1b
<b>86e8</b>   85 54      STA .RastInt_vic_control1[]
<b>86ea</b>   20 46 84   JSR <a href="#8446">.TitleIRQActions</a>
<a name="86ed"></a><b>86ed</b>   a5 ce      LDA .RastInt_IntroScreenFlag
<b>86ef</b>   d0 08      BNE <a href="#86f9">$86f9</a>
</div>



<b>.__IRQHandler__InGame</b>

<div class="disass_code"><b>86f1</b>   a9 7f      LDA #$7f
<b>86f3</b>   8d 15 d0   STA .Vic_SpriteEnable
<b>86f6</b>   20 2b 7b   JSR <a href="#7b2b">.GameIRQActions</a>
<a name="86f9"></a><b>86f9</b>   a9 00      LDA #$00
<b>86fb</b>   8d 1b d0   STA .Vic_SpritePriority
<b>86fe</b>   68         PLA 
<b>86ff</b>   a8         TAY 
<b>8700</b>   68         PLA 
<b>8701</b>   aa         TAX 
<b>8702</b>   68         PLA 
<b>8703</b>   40         RTI 
</div>
<a name="8704"></a>


<b>.Sneaky_@Returns_if_no_joystick_action_ELSE_Returns_to_IRQHandler_at_.IRQHandler__SneakyEntryPoint@</b>

<div class="disass_code"><b>8704</b>   a9 ff      LDA #$ff
<b>8706</b>   8d 00 dc   STA .Cia1_DataA
<b>8709</b>   ad 01 dc   LDA .Cia1_DataB
<b>870c</b>   29 1f      AND #$1f
<b>870e</b>   c9 1f      CMP #$1f
<b>8710</b>   f0 0f      BEQ <a href="#8721">.Sneaky__NoJoystickAction</a>
<b>8712</b>   a9 ff      LDA #$ff
<b>8714</b>   85 fb      STA .LastKeyInScanRow0_ScannedMoreThanOnce
<b>8716</b>   85 fc      STA .LastKeyInScanRow7_ScannedMoreThanOnce
<b>8718</b>   85 fd      STA .LastKeyInScanRow0
<b>871a</b>   85 fe      STA .LastKeyInScanRow7
</div>



<b>.Sneaky__MessWithStack</b>

<div class="disass_code"><b>871c</b>   68         PLA 
<b>871d</b>   68         PLA 
<b>871e</b>   4c cf 86   JMP <a href="#86cf">.__IRQHandler__SneakyEntryPoint</a>
</div>
<a name="8721"></a>


<b>.Sneaky__NoJoystickAction</b>

<div class="disass_code"><b>8721</b>   60         RTS 
</div>
<a name="8722"></a>


<b>.PrepareToPlayCave</b>

<div class="disass_code"><b>8722</b>   20 8e 7e   JSR <a href="#7e8e">.LoadCave</a>
<b>8725</b>   20 ab 7c   JSR <a href="#7cab">.PlaceRandomObjs</a>
<b>8728</b>   20 0f 82   JSR <a href="#820f">.CaveStoreOuterSteelWall</a>
<b>872b</b>   20 80 81   JSR <a href="#8180">.UnpackCave</a>
<b>872e</b>   20 dc 7e   JSR <a href="#7edc">.InitVarsBeforePlayingCave</a>
<b>8731</b>   a9 00      LDA #$00
<b>8733</b>   85 ed      STA .FineScrollDirY
<b>8735</b>   85 ee      STA .ScrollDirectionY__$00=StillOrUp_$ff=Down
<b>8737</b>   85 e9      STA .FineScrollDirX
<b>8739</b>   85 ea      STA .ScrollDirectionX__$00=StillOrLeft_$ff=Right
<b>873b</b>   20 fe 77   JSR <a href="#77fe">.UncoverCaveScreen</a>
<b>873e</b>   a9 00      LDA #$00
<b>8740</b>   85 bd      STA .PlayRevealLevelSoundAndRedefineCharFlag
<b>8742</b>   20 f4 7c   JSR <a href="#7cf4">.ResetSound</a>
<b>8745</b>   60         RTS 
</div>
<a name="8746"></a>

<div class="disass_comment">; 
</div>

<b>.InitPlayers</b>

<div class="disass_code"><b>8746</b>   a9 00      LDA #$00
<b>8748</b>   85 9d      STA .CurrentPlayer
<b>874a</b>   85 a0      STA .GameOverFlag
<b>874c</b>   a2 05      LDX #$05
<a name="874e"></a><b>874e</b>   95 5f      STA .ScoreDigits[6],X
<b>8750</b>   95 4e      STA .ScoreIncrementDigits[6],X
<b>8752</b>   ca         DEX 
<b>8753</b>   10 f9      BPL <a href="#874e">$874e</a>
<b>8755</b>   a9 03      LDA #$03
<b>8757</b>   85 5c      STA .Lives
<b>8759</b>   a2 08      LDX #$08
<a name="875b"></a><b>875b</b>   b5 5c      LDA .Lives,X
<b>875d</b>   95 6b      STA .Player1_Lives,X
<b>875f</b>   95 7a      STA .Player2_Lives,X
<b>8761</b>   ca         DEX 
<b>8762</b>   10 f7      BPL <a href="#875b">$875b</a>
<b>8764</b>   a2 05      LDX #$05
<a name="8766"></a><b>8766</b>   b5 74      LDA .Player1_HighScoreChars[6],X
<b>8768</b>   95 65      STA .HighScoreChars[6],X
<b>876a</b>   ca         DEX 
<b>876b</b>   10 f9      BPL <a href="#8766">$8766</a>
<b>876d</b>   60         RTS 
</div>
<a name="876e"></a>

<div class="disass_comment">; 
</div>

<b>.LoseLife</b>

<div class="disass_code"><b>876e</b>   c6 5c      DEC .Lives
<b>8770</b>   a5 9d      LDA .CurrentPlayer
<b>8772</b>   d0 0b      BNE <a href="#877f">.__LoseLife__BackupPlayer2__</a>
</div>



<b>.__LoseLife__BackupPlayer1__</b>

<div class="disass_comment">; $5c-$6a to $6b-$79
</div>
<div class="disass_code"><b>8774</b>   a2 0e      LDX #$0e
<a name="8776"></a><b>8776</b>   b5 5c      LDA .Lives,X
<b>8778</b>   95 6b      STA .Player1_Lives,X
<b>877a</b>   ca         DEX 
<b>877b</b>   10 f9      BPL <a href="#8776">$8776</a>
<b>877d</b>   30 09      BMI <a href="#8788">.__LoseLife__NextPlayer__</a>
</div>
<a name="877f"></a>

<div class="disass_comment">; NOTE: Branch above always taken.
</div>

<b>.__LoseLife__BackupPlayer2__</b>

<div class="disass_comment">; $5c-$6a to $7a-$88
</div>
<div class="disass_code"><b>877f</b>   a2 0e      LDX #$0e
<a name="8781"></a><b>8781</b>   b5 5c      LDA .Lives,X
<b>8783</b>   95 7a      STA .Player2_Lives,X
<b>8785</b>   ca         DEX 
<b>8786</b>   10 f9      BPL <a href="#8781">$8781</a>
</div>
<a name="8788"></a>


<b>.__LoseLife__NextPlayer__</b>

<div class="disass_comment">; Player switched if multiplayer game and other player has lives left.
</div>
<div class="disass_code"><b>8788</b>   a5 9e      LDA .NumPlayerMinusOne
<b>878a</b>   f0 13      BEQ <a href="#879f">.__LoseLife__RestoreNewPlayer__</a>
<b>878c</b>   a5 9d      LDA .CurrentPlayer
<b>878e</b>   d0 09      BNE <a href="#8799">$8799</a>
<b>8790</b>   a5 7a      LDA .Player2_Lives
<b>8792</b>   f0 0b      BEQ <a href="#879f">.__LoseLife__RestoreNewPlayer__</a>
<b>8794</b>   e6 9d      INC .CurrentPlayer
<b>8796</b>   4c 9f 87   JMP <a href="#879f">.__LoseLife__RestoreNewPlayer__</a>
<a name="8799"></a><b>8799</b>   a5 6b      LDA .Player1_Lives
<b>879b</b>   f0 02      BEQ <a href="#879f">.__LoseLife__RestoreNewPlayer__</a>
<b>879d</b>   c6 9d      DEC .CurrentPlayer
</div>
<a name="879f"></a>


<b>.__LoseLife__RestoreNewPlayer__</b>

<div class="disass_code"><b>879f</b>   a5 9d      LDA .CurrentPlayer
<b>87a1</b>   d0 0b      BNE <a href="#87ae">.__LoseLife__RestorePlayer2__</a>
</div>



<b>.__LoseLife__RestorePlayer1__</b>

<div class="disass_code"><b>87a3</b>   a2 0e      LDX #$0e
<a name="87a5"></a><b>87a5</b>   b5 6b      LDA .Player1_Lives,X
<b>87a7</b>   95 5c      STA .Lives,X
<b>87a9</b>   ca         DEX 
<b>87aa</b>   10 f9      BPL <a href="#87a5">$87a5</a>
<b>87ac</b>   30 09      BMI <a href="#87b7">.__LoseLife__CheckIfGameOver__</a>
</div>
<a name="87ae"></a>

<div class="disass_comment">; NOTE: Branch above always taken.
</div>

<b>.__LoseLife__RestorePlayer2__</b>

<div class="disass_code"><b>87ae</b>   a2 0e      LDX #$0e
<a name="87b0"></a><b>87b0</b>   b5 7a      LDA .Player2_Lives,X
<b>87b2</b>   95 5c      STA .Lives,X
<b>87b4</b>   ca         DEX 
<b>87b5</b>   10 f9      BPL <a href="#87b0">$87b0</a>
</div>
<a name="87b7"></a>


<b>.__LoseLife__CheckIfGameOver__</b>

<div class="disass_comment">; Since we only switch to a player that has a non-zero life count a count
; of zero means all players are dead.
</div>
<div class="disass_code"><b>87b7</b>   a5 5c      LDA .Lives
<b>87b9</b>   d0 0c      BNE <a href="#87c7">.__LoseLife__Exit__</a>
<b>87bb</b>   a9 01      LDA #$01
<b>87bd</b>   85 a0      STA .GameOverFlag
<b>87bf</b>   a9 03      LDA #$03
<b>87c1</b>   85 5c      STA .Lives
<b>87c3</b>   a9 00      LDA #$00
<b>87c5</b>   85 9d      STA .CurrentPlayer
</div>
<a name="87c7"></a>


<b>.__LoseLife__Exit__</b>

<div class="disass_code"><b>87c7</b>   60         RTS 
</div>
<a name="87c8"></a>

<div class="disass_comment">; 
</div>

<b>.ScoreTimeRemainingSound</b>

<div class="disass_code"><b>87c8</b>   c6 03      DEC .__CoverLevel__LineAddressTable[24]+1
<b>87ca</b>   a2 0f      LDX #$0f
</div>
<a name="87cc"></a>

<div class="disass_comment">; 
</div>

<b>.__ScoreTimeRemainingSound__Loop</b>

<div class="disass_comment">; Voice 3: Triangle waveform, Gate bit off.
</div>
<div class="disass_code"><b>87cc</b>   a9 10      LDA #$10
<b>87ce</b>   8d 12 d4   STA .Sid_Voice3Ctrl
</div>


<div class="disass_comment">; 
</div>


<div class="disass_code"><b>87d1</b>   86 02      STX .__CoverLevel__LineAddressTable[24]
<b>87d3</b>   06 02      ASL .__CoverLevel__LineAddressTable[24]
<b>87d5</b>   a5 03      LDA .__CoverLevel__LineAddressTable[24]+1
<b>87d7</b>   38         SEC 
<b>87d8</b>   e5 02      SBC .__CoverLevel__LineAddressTable[24]
<b>87da</b>   8d 0f d4   STA .Sid_Voice3FreqHi
<b>87dd</b>   a9 a0      LDA #$a0
<b>87df</b>   8d 14 d4   STA .Sid_Voice3SustainRelease
<b>87e2</b>   a9 00      LDA #$00
<b>87e4</b>   8d 13 d4   STA .Sid_Voice3AttackDecay
</div>


<div class="disass_comment">; 
; Voice 3: Triangle waveform, Gate bit ON.
</div>


<div class="disass_code"><b>87e7</b>   a9 11      LDA #$11
<b>87e9</b>   8d 12 d4   STA .Sid_Voice3Ctrl
</div>


<div class="disass_comment">; 
</div>


<div class="disass_code"><b>87ec</b>   a0 c0      LDY #$c0
<a name="87ee"></a><b>87ee</b>   88         DEY 
<b>87ef</b>   d0 fd      BNE <a href="#87ee">$87ee</a>
<b>87f1</b>   ca         DEX 
<b>87f2</b>   d0 d8      BNE <a href="#87cc">.__ScoreTimeRemainingSound__Loop</a>
</div>


<div class="disass_comment">; 
; Voice 3: Triangle waveform, Gate bit off.
</div>


<div class="disass_code"><b>87f4</b>   a9 10      LDA #$10
<b>87f6</b>   8d 12 d4   STA .Sid_Voice3Ctrl
</div>


<div class="disass_comment">; 
</div>


<div class="disass_code"><b>87f9</b>   60         RTS 
</div>
<a name="87fa"></a>

<div class="disass_comment">; 
</div>

<b>.UpdateHighScoreIfNeeded</b>

<div class="disass_code"><b>87fa</b>   a9 00      LDA #$00
<b>87fc</b>   aa         TAX 
<b>87fd</b>   85 a1      STA .UpdateHighScoreIfNeeded::NeedsUpdating
<a name="87ff"></a><b>87ff</b>   b5 65      LDA .HighScoreChars[6],X
<b>8801</b>   dd 48 98   CMP .ScoreChars[6],X
<b>8804</b>   f0 08      BEQ <a href="#880e">$880e</a>
<b>8806</b>   a2 05      LDX #$05
<b>8808</b>   b0 04      BCS <a href="#880e">$880e</a>
<b>880a</b>   a9 01      LDA #$01
<b>880c</b>   85 a1      STA .UpdateHighScoreIfNeeded::NeedsUpdating
<a name="880e"></a><b>880e</b>   e8         INX 
<b>880f</b>   e0 06      CPX #$06
<b>8811</b>   d0 ec      BNE <a href="#87ff">$87ff</a>
<b>8813</b>   a5 a1      LDA .UpdateHighScoreIfNeeded::NeedsUpdating
<b>8815</b>   f0 0a      BEQ <a href="#8821">$8821</a>
<b>8817</b>   a2 05      LDX #$05
<a name="8819"></a><b>8819</b>   bd 48 98   LDA .ScoreChars[6],X
<b>881c</b>   95 65      STA .HighScoreChars[6],X
<b>881e</b>   ca         DEX 
<b>881f</b>   10 f8      BPL <a href="#8819">$8819</a>
<a name="8821"></a><b>8821</b>   60         RTS 
</div>
<a name="8822"></a>

<div class="disass_comment">; 
</div>

<b>.StashScores</b>

<div class="disass_code"><b>8822</b>   a2 05      LDX #$05
<a name="8824"></a><b>8824</b>   b5 74      LDA .Player1_HighScoreChars[6],X
<b>8826</b>   9d 27 98   STA .CurrentLastScoreText[20]+1,X
<b>8829</b>   b5 83      LDA .Player2_HighScoreChars[6],X
<b>882b</b>   9d 33 98   STA $9833,X
<b>882e</b>   b5 6e      LDA .Player1_.ScoreDigits[6],X
<b>8830</b>   18         CLC 
<b>8831</b>   69 10      ADC #$10
<b>8833</b>   9d 13 98   STA .CurrentHighScoreText[20]+1,X
<b>8836</b>   b5 7d      LDA .Player2_.ScoreDigits[6],X
<b>8838</b>   69 10      ADC #$10
<b>883a</b>   9d 1f 98   STA $981f,X
<b>883d</b>   ca         DEX 
<b>883e</b>   10 e4      BPL <a href="#8824">$8824</a>
<b>8840</b>   60         RTS 
</div>
<a name="8841"></a>

<div class="disass_comment">; 
</div>

<b>.NextCave</b>

<div class="disass_code"><b>8841</b>   a5 5d      LDA .Cave
<b>8843</b>   0a         ASL A
<b>8844</b>   aa         TAX 
</div>


<div class="disass_comment">; $7e64 = .LevelSequenceAndBonusLevelStatusArray-2
</div>


<div class="disass_code"><b>8845</b>   bd 64 7e   LDA $7e64,X
<b>8848</b>   c9 15      CMP #$15
<b>884a</b>   d0 0a      BNE <a href="#8856">$8856</a>
<b>884c</b>   a5 5e      LDA .Level
<b>884e</b>   c9 04      CMP #$04
<b>8850</b>   f0 02      BEQ <a href="#8854">$8854</a>
<b>8852</b>   e6 5e      INC .Level
<a name="8854"></a><b>8854</b>   a9 01      LDA #$01
<a name="8856"></a><b>8856</b>   85 5d      STA .Cave
<b>8858</b>   60         RTS 
</div>
<a name="8859"></a>

<div class="disass_comment">; 
</div>

<b>.CaveComplete</b>

<div class="disass_comment">; Set the score increment to zero.
</div>
<div class="disass_code"><b>8859</b>   a2 00      LDX #$00
<b>885b</b>   a9 00      LDA #$00
<a name="885d"></a><b>885d</b>   95 4e      STA .ScoreIncrementDigits[6],X
<b>885f</b>   e8         INX 
<b>8860</b>   e0 06      CPX #$06
<b>8862</b>   d0 f9      BNE <a href="#885d">$885d</a>
</div>


<div class="disass_comment">; .Level is one less than the actual level as displayed in the game.
; We add one to compensate for this discrepancy and store the result
; in the last digit of .ScoreIncrementDigits.
</div>


<div class="disass_code"><b>8864</b>   a5 5e      LDA .Level
<b>8866</b>   18         CLC 
<b>8867</b>   69 01      ADC #$01
<b>8869</b>   85 53      STA $53
<b>886b</b>   a9 00      LDA #$00
<b>886d</b>   85 97      STA .__UnknownZP_97
<b>886f</b>   85 02      STA .__CoverLevel__LineAddressTable[24]
<b>8871</b>   a9 d0      LDA #$d0
<b>8873</b>   85 03      STA .__CoverLevel__LineAddressTable[24]+1
<b>8875</b>   20 8c 70   JSR <a href="#708c">.CheckIfLevelTimeIsUp</a>
<b>8878</b>   20 f4 7c   JSR <a href="#7cf4">.ResetSound</a>
</div>
<a name="887b"></a>

<div class="disass_comment">; When you complete a cave you get .Level+1 (.Level is 0 for level 1)
; points for every second remaining.
</div>

<b>.__CaveComplete__ScoreTimeRemainingLoop</b>

<div class="disass_code"><b>887b</b>   a5 97      LDA .__UnknownZP_97
<b>887d</b>   d0 0b      BNE <a href="#888a">$888a</a>
<b>887f</b>   20 c5 70   JSR <a href="#70c5">.GameSecondTick</a>
<b>8882</b>   20 5d 70   JSR <a href="#705d">.IncrementScore</a>
<b>8885</b>   20 c8 87   JSR <a href="#87c8">.ScoreTimeRemainingSound</a>
</div>


<div class="disass_comment">; Branch always taken!
</div>


<div class="disass_code"><b>8888</b>   d0 f1      BNE <a href="#887b">.__CaveComplete__ScoreTimeRemainingLoop</a>
</div>
<a name="888a"></a>

<div class="disass_comment">; 
</div>


<div class="disass_code"><b>888a</b>   20 9d 70   JSR <a href="#709d">.TimeRunningOutFX</a>
<b>888d</b>   20 0c 7d   JSR <a href="#7d0c">.FourDelays</a>
<b>8890</b>   20 f4 7c   JSR <a href="#7cf4">.ResetSound</a>
<b>8893</b>   20 41 88   JSR <a href="#8841">.NextCave</a>
<b>8896</b>   60         RTS 
</div>
<a name="8897"></a>

<div class="disass_comment">; 
</div>

<b>.KillPlayer</b>

<div class="disass_code"><b>8897</b>   20 fa 87   JSR <a href="#87fa">.UpdateHighScoreIfNeeded</a>
<b>889a</b>   20 6e 87   JSR <a href="#876e">.LoseLife</a>
<b>889d</b>   a5 a0      LDA .GameOverFlag
<b>889f</b>   f0 09      BEQ <a href="#88aa">$88aa</a>
<b>88a1</b>   a9 00      LDA #$00
<b>88a3</b>   85 5d      STA .Cave
<b>88a5</b>   85 5e      STA .Level
<b>88a7</b>   20 22 88   JSR <a href="#8822">.StashScores</a>
<a name="88aa"></a><b>88aa</b>   60         RTS 
</div>
<a name="88ab"></a>

<div class="disass_comment">; 
; Exiting a cave happens when the player is killed, when time runs out
; or when the level is completed.
</div>

<b>.PerformCaveExitAction</b>

<div class="disass_code"><b>88ab</b>   a2 01      LDX #$01
<b>88ad</b>   86 9b      STX .UNSURE__AmoebaOrMagicWallRunningFlag
<b>88af</b>   a5 9f      LDA .EnteredOutboxFlag
<b>88b1</b>   f0 06      BEQ <a href="#88b9">.__PerformCaveExitAction__NotComplete</a>
</div>



<b>.__PerformCaveExitAction__Complete</b>

<div class="disass_code"><b>88b3</b>   20 59 88   JSR <a href="#8859">.CaveComplete</a>
<b>88b6</b>   4c c6 88   JMP <a href="#88c6">.__PerformCaveExitAction__CaveExitActions</a>
</div>
<a name="88b9"></a>


<b>.__PerformCaveExitAction__NotComplete</b>

<div class="disass_code"><b>88b9</b>   a5 a6      LDA .CurrentBonusLevelFlag
<b>88bb</b>   f0 06      BEQ <a href="#88c3">.__PerformCaveExitAction__NotBonusLevel</a>
</div>



<b>.__PerformCaveExitAction__BonusLevel</b>

<div class="disass_code"><b>88bd</b>   20 41 88   JSR <a href="#8841">.NextCave</a>
<b>88c0</b>   4c c6 88   JMP <a href="#88c6">.__PerformCaveExitAction__CaveExitActions</a>
</div>
<a name="88c3"></a>


<b>.__PerformCaveExitAction__NotBonusLevel</b>

<div class="disass_code"><b>88c3</b>   20 97 88   JSR <a href="#8897">.KillPlayer</a>
</div>
<a name="88c6"></a>


<b>.__PerformCaveExitAction__CaveExitActions</b>

<div class="disass_code"><b>88c6</b>   a5 a2      LDA .IsDemoMode
<b>88c8</b>   d0 2c      BNE <a href="#88f6">.__PerformCaveExitAction__DemoMode</a>
</div>



<b>.__PerformCaveExitAction__NotDemoMode</b>

<div class="disass_comment">; .CurrentPlayer is updated via the call to .KillPlayer above.
</div>
<div class="disass_code"><b>88ca</b>   a5 9d      LDA .CurrentPlayer
<b>88cc</b>   18         CLC 
<b>88cd</b>   69 11      ADC #$11
<b>88cf</b>   8d 55 98   STA $9855
</div>




<div class="disass_comment">; .Lives is updated via the call to .KillPlayer above.
</div>
<div class="disass_code"><b>88d2</b>   a5 5c      LDA .Lives
<b>88d4</b>   18         CLC 
<b>88d5</b>   69 10      ADC #$10
<b>88d7</b>   8d 58 98   STA $9858
<b>88da</b>   aa         TAX 
</div>


<div class="disass_comment">; $25 is the letter 'e'.
</div>


<div class="disass_code"><b>88db</b>   a9 25      LDA #$25
<b>88dd</b>   e0 11      CPX #$11
<b>88df</b>   d0 02      BNE <a href="#88e3">$88e3</a>
</div>



<b>.__PerformCaveExitAction__OneLifeLeft</b>

<div class="disass_comment">; $21 is the letter 'a'.
</div>
<div class="disass_code"><b>88e1</b>   a9 21      LDA #$21
</div>
<a name="88e3"></a>

<div class="disass_comment">; Patch the play info buffer: 'man' for one life and 'men' for more.
</div>


<div class="disass_code"><b>88e3</b>   8d 5b 98   STA $985b
</div>


<div class="disass_comment">; Cave and level, .Cave is updated in call the .NextCave above.
</div>


<div class="disass_code"><b>88e6</b>   a5 5d      LDA .Cave
<b>88e8</b>   18         CLC 
<b>88e9</b>   69 20      ADC #$20
<b>88eb</b>   8d 5e 98   STA $985e
<b>88ee</b>   a5 5e      LDA .Level
<b>88f0</b>   18         CLC 
<b>88f1</b>   69 11      ADC #$11
<b>88f3</b>   8d 60 98   STA $9860
</div>
<a name="88f6"></a>


<b>.__PerformCaveExitAction__DemoMode</b>

<div class="disass_code"><b>88f6</b>   a9 00      LDA #$00
<b>88f8</b>   85 94      STA .EnableIRQTriggeredSFXAndTopLineUpdates
<b>88fa</b>   60         RTS 
</div>
<a name="88fb"></a>

<div class="disass_comment">; 
</div>

<b>.RunCave</b>

<div class="disass_code"><b>88fb</b>   20 d9 7d   JSR <a href="#7dd9">.ProcessWorld</a>
<b>88fe</b>   a5 97      LDA .__UnknownZP_97
<b>8900</b>   f0 f9      BEQ <a href="#88fb">.RunCave</a>
<b>8902</b>   20 f4 7c   JSR <a href="#7cf4">.ResetSound</a>
<b>8905</b>   20 ab 88   JSR <a href="#88ab">.PerformCaveExitAction</a>
<a name="8908"></a><b>8908</b>   a5 a8      LDA .ExtraLifeFXCounter
<b>890a</b>   d0 fc      BNE <a href="#8908">$8908</a>
<b>890c</b>   8d 08 98   STA .BackBufferVICMemControl+1
<b>890f</b>   8d 11 98   STA $9811
<b>8912</b>   60         RTS 
</div>
<a name="8913"></a>

<div class="disass_comment">; 
</div>

<b>.DemoModeRunCave</b>

<div class="disass_code"><b>8913</b>   a9 00      LDA #$00
<b>8915</b>   85 d3      STA .DemoMoveDataIndex
<b>8917</b>   85 d4      STA .ExitDemoModeFlag
<b>8919</b>   85 d2      STA .DemoMoveRepeatCount
</div>
<a name="891b"></a>


<b>.__DemoModeRunCave__Loop</b>

<div class="disass_code"><b>891b</b>   a5 d2      LDA .DemoMoveRepeatCount
<b>891d</b>   d0 1b      BNE <a href="#893a">.__DemoModeRunCave__RepeatMove</a>
<b>891f</b>   a6 d3      LDX .DemoMoveDataIndex
<b>8921</b>   bd a8 5e   LDA .DemoMoveData,X
<b>8924</b>   85 d2      STA .DemoMoveRepeatCount
<b>8926</b>   29 0f      AND #$0f
<b>8928</b>   85 8b      STA .JoystickStatus
<b>892a</b>   d0 04      BNE <a href="#8930">$8930</a>
</div>


<div class="disass_comment">; BUG: The branch above is always taken so we never get here.
; Looks like the intent was to have any joystick movement exit
; demo mode. Since a bit goes to zero when its direction is selected
; and you can't have the joystick in opposing directions at the
; same time the logic is faulty. If you select up, down, left
; and right at the same time we will get here.
</div>


<div class="disass_code"><b>892c</b>   a9 01      LDA #$01
<b>892e</b>   85 d4      STA .ExitDemoModeFlag
<a name="8930"></a><b>8930</b>   46 d2      LSR .DemoMoveRepeatCount
<b>8932</b>   46 d2      LSR .DemoMoveRepeatCount
<b>8934</b>   46 d2      LSR .DemoMoveRepeatCount
<b>8936</b>   46 d2      LSR .DemoMoveRepeatCount
<b>8938</b>   e6 d3      INC .DemoMoveDataIndex
</div>
<a name="893a"></a>


<b>.__DemoModeRunCave__RepeatMove</b>

<div class="disass_code"><b>893a</b>   20 74 6b   JSR <a href="#6b74">.ReadFireButtonPort1</a>
<b>893d</b>   d0 04      BNE <a href="#8943">$8943</a>
<b>893f</b>   a9 01      LDA #$01
<b>8941</b>   85 d4      STA .ExitDemoModeFlag
<a name="8943"></a><b>8943</b>   a5 d4      LDA .ExitDemoModeFlag
<b>8945</b>   d0 08      BNE <a href="#894f">.__DemoModeRunCave__Exit</a>
<b>8947</b>   20 d9 7d   JSR <a href="#7dd9">.ProcessWorld</a>
<b>894a</b>   c6 d2      DEC .DemoMoveRepeatCount
<b>894c</b>   4c 1b 89   JMP <a href="#891b">.__DemoModeRunCave__Loop</a>
</div>
<a name="894f"></a>


<b>.__DemoModeRunCave__Exit</b>

<div class="disass_code"><b>894f</b>   20 f4 7c   JSR <a href="#7cf4">.ResetSound</a>
<b>8952</b>   a5 9f      LDA .EnteredOutboxFlag
<b>8954</b>   f0 03      BEQ <a href="#8959">$8959</a>
<b>8956</b>   20 ab 88   JSR <a href="#88ab">.PerformCaveExitAction</a>
<a name="8959"></a><b>8959</b>   a9 00      LDA #$00
<b>895b</b>   85 5d      STA .Cave
<b>895d</b>   60         RTS 
</div>
<a name="895e"></a>

<div class="disass_comment">; 
</div>

<b>.ResetLastAndHighScoresAndPlayerInfoText</b>

<div class="disass_code"><b>895e</b>   a2 13      LDX #$13
</div>
<a name="8960"></a>


<b>.__ResetLastAndHighScoresAndPlayerInfoText__Loop</b>

<div class="disass_code"><b>8960</b>   bd cc 6b   LDA <a href="#6bcc">.Text_LastScores</a>,X
<b>8963</b>   9d 12 98   STA .CurrentHighScoreText[20],X
<b>8966</b>   bd e0 6b   LDA .Text_HighScores,X
<b>8969</b>   9d 26 98   STA .CurrentLastScoreText[20],X
</div>


<div class="disass_comment">; $20 is a space.
; Here's an example of contents during game: .12?10.00.147.000010
</div>


<div class="disass_code"><b>896c</b>   a9 20      LDA #$20
<b>896e</b>   9d 3a 98   STA .CurrentPlayerScoresText[20],X
<b>8971</b>   ca         DEX 
<b>8972</b>   10 ec      BPL <a href="#8960">.__ResetLastAndHighScoresAndPlayerInfoText__Loop</a>
</div>


<div class="disass_comment">; $3c is a diamond.
</div>


<div class="disass_code"><b>8974</b>   a9 3c      LDA #$3c
<b>8976</b>   8d 3d 98   STA $983d
<b>8979</b>   60         RTS 
</div>
<a name="897a"></a>

<div class="disass_comment">; 
</div>

<b>.InitAll</b>

<div class="disass_comment">; $0c00-$0c27 = 0x20
; Set the first line of the 1st in-game tilemap to spaces.
</div>
<div class="disass_code"><b>897a</b>   a2 28      LDX #$28
<b>897c</b>   a9 20      LDA #$20
</div>
<a name="897e"></a>


<b>._InitBlankTopLine</b>

<div class="disass_code"><b>897e</b>   9d ff 0b   STA .DecompressedLevel_Last,X
<b>8981</b>   ca         DEX 
<b>8982</b>   d0 fa      BNE <a href="#897e">._InitBlankTopLine</a>
</div>


<div class="disass_comment">; 
</div>


<div class="disass_code"><b>8984</b>   a9 60      LDA #$60
</div>
<a name="8986"></a>


<b>._InitBlankRestOfScreen</b>

<div class="disass_code"><b>8986</b>   9d 28 0c   STA $0c28,X
<b>8989</b>   9d 00 0d   STA $0d00,X
<b>898c</b>   9d 00 0e   STA $0e00,X
<b>898f</b>   9d 00 0f   STA $0f00,X
<b>8992</b>   9d 00 2c   STA .GameTileMap2,X
<b>8995</b>   9d 00 2d   STA $2d00,X
<b>8998</b>   9d 00 2e   STA $2e00,X
<b>899b</b>   9d 00 2f   STA $2f00,X
<b>899e</b>   e8         INX 
<b>899f</b>   d0 e5      BNE <a href="#8986">._InitBlankRestOfScreen</a>
</div>
<a name="89a1"></a>


<b>._InitCopyCharsAndTheme</b>

<div class="disass_code"><b>89a1</b>   bd 00 50   LDA <a href="#5000">.TitleCharDataBlock0</a>,X
<b>89a4</b>   9d 00 20   STA .CopiedTitleCharDataBlock0,X
<b>89a7</b>   bd 00 51   LDA .TitleCharDataBlock1,X
<b>89aa</b>   9d 00 21   STA .CopiedTitleCharDataBlock1,X
<b>89ad</b>   bd 00 52   LDA .TitleCharDataBlock2,X
<b>89b0</b>   9d 00 22   STA .CopiedTitleCharDataBlock2,X
<b>89b3</b>   bd 00 53   LDA .TitleCharDataBlock3,X
<b>89b6</b>   9d 00 23   STA .CopiedTitleCharDataBlock3,X
</div>


<div class="disass_comment">; 
</div>


<div class="disass_code"><b>89b9</b>   bd e8 5f   LDA <a href="#5fe8">.ThemeMusicData</a>,X
<b>89bc</b>   9d 00 30   STA .CopiedThemeMusicData,X
<b>89bf</b>   bd e8 60   LDA <a href="#60e8">.GameCharDataBlock1</a>,X
<b>89c2</b>   9d 00 31   STA .CopiedGameCharDataBlock1,X
<b>89c5</b>   bd e8 61   LDA .GameCharDataBlock2,X
<b>89c8</b>   9d 00 32   STA .CopiedGameCharDataBlock2,X
<b>89cb</b>   bd e8 62   LDA .GameCharDataBlock3,X
<b>89ce</b>   9d 00 33   STA .CopiedGameCharDataBlock3,X
<b>89d1</b>   e8         INX 
<b>89d2</b>   d0 cd      BNE <a href="#89a1">._InitCopyCharsAndTheme</a>
</div>


<div class="disass_comment">; 
; $3770-$3797 to $ff
; $3798-$37bf to $00
; Sprite data is at $3780-$37be
; Sets the first 8 lines to solid & and last 13 transparent.
; NOTE: Writes both before and after the sprite data.
</div>


<div class="disass_code"><b>89d4</b>   a2 27      LDX #$27
<a name="89d6"></a><b>89d6</b>   a9 ff      LDA #$ff
<b>89d8</b>   9d 70 37   STA $3770,X
<b>89db</b>   a9 00      LDA #$00
<b>89dd</b>   9d 98 37   STA $3798,X
<b>89e0</b>   ca         DEX 
<b>89e1</b>   10 f3      BPL <a href="#89d6">$89d6</a>
</div>


<div class="disass_comment">; 
; Set all sprite pointers in both tilemaps to $3780.
</div>


<div class="disass_code"><b>89e3</b>   a2 07      LDX #$07
<a name="89e5"></a><b>89e5</b>   a9 de      LDA #$de
<b>89e7</b>   9d f8 0f   STA $0ff8,X
<b>89ea</b>   9d f8 2f   STA $2ff8,X
<b>89ed</b>   a9 00      LDA #$00
<b>89ef</b>   9d 27 d0   STA .Vic_SpriteColour0,X
<b>89f2</b>   ca         DEX 
<b>89f3</b>   10 f0      BPL <a href="#89e5">$89e5</a>
</div>


<div class="disass_comment">; 
; Position the sprites.
; NOTE: Note sprite Y position is raster line minus 1.
</div>


<div class="disass_code"><b>89f5</b>   a0 0c      LDY #$0c
<b>89f7</b>   a9 37      LDA #$37
<a name="89f9"></a><b>89f9</b>   99 00 d0   STA .Vic_Sprite0X,Y
<b>89fc</b>   aa         TAX 
<b>89fd</b>   a9 3a      LDA #$3a
<b>89ff</b>   99 01 d0   STA .Vic_Sprite0Y,Y
<b>8a02</b>   8a         TXA 
<b>8a03</b>   38         SEC 
<b>8a04</b>   e9 30      SBC #$30
<b>8a06</b>   88         DEY 
<b>8a07</b>   88         DEY 
<b>8a08</b>   10 ef      BPL <a href="#89f9">$89f9</a>
<b>8a0a</b>   a9 ff      LDA #$ff
<b>8a0c</b>   8d 1d d0   STA .Vic_SpriteExpandX
<b>8a0f</b>   a9 60      LDA #$60
<b>8a11</b>   8d 10 d0   STA .Vic_SpriteMsbX
<b>8a14</b>   60         RTS 
</div>
<a name="8a15"></a>

<div class="disass_comment">; 
</div>

<b>.InitGameState</b>

<div class="disass_code"><b>8a15</b>   20 f4 7c   JSR <a href="#7cf4">.ResetSound</a>
<b>8a18</b>   a2 ff      LDX #$ff
<b>8a1a</b>   86 99      STX .UnpackedCaveNumber
<b>8a1c</b>   86 ce      STX .RastInt_IntroScreenFlag
<b>8a1e</b>   86 fb      STX .LastKeyInScanRow0_ScannedMoreThanOnce
<b>8a20</b>   86 fc      STX .LastKeyInScanRow7_ScannedMoreThanOnce
<b>8a22</b>   86 fd      STX .LastKeyInScanRow0
<b>8a24</b>   86 fe      STX .LastKeyInScanRow7
<b>8a26</b>   e8         INX 
</div>


<div class="disass_comment">; X=0
</div>


<div class="disass_code"><b>8a27</b>   86 e7      STX .FineScrollX
<b>8a29</b>   86 e8      STX .ScreenLeft
<b>8a2b</b>   86 eb      STX .FineScrollY
<b>8a2d</b>   86 ec      STX .ScreenTop
<b>8a2f</b>   86 a5      STX .WhiteFlashWhiteCount
<b>8a31</b>   86 5d      STX .Cave
<b>8a33</b>   86 5e      STX .Level
<b>8a35</b>   86 c0      STX .AnimationFrameTimes8
<b>8a37</b>   86 c1      STX .TitleScreenFrameCountMod4
<b>8a39</b>   86 e3      STX .YScrollTableIndex
<b>8a3b</b>   86 e4      STX .YCoarseScrollDirFlag
<b>8a3d</b>   86 e1      STX .XScrollTableIndex
<b>8a3f</b>   86 e2      STX .XCoarseScrollDirFlag
<b>8a41</b>   86 d8      STX .DiamondQuotaReachedOrEntryBoxExplodeSoundFlag
<b>8a43</b>   86 d9      STX .DiamondQuotaReachedOrEntryBoxExplode_SFXDurationCounter
<b>8a45</b>   e8         INX 
</div>


<div class="disass_comment">; X=1
</div>


<div class="disass_code"><b>8a46</b>   86 cc      STX .ForceCreditsMode
<b>8a48</b>   86 a2      STX .IsDemoMode
<b>8a4a</b>   86 a3      STX .TitleScreenInLicenseMode
</div>


<div class="disass_comment">; Clumsily .InitGameState::DoOneTimeInit is not initialised by
; the game. BD relies on the fact that the C64's OS uses this
; as the current line length minus one and thus when the game
; starts it is never zero.
</div>


<div class="disass_code"><b>8a4c</b>   a5 d5      LDA .InitGameState::DoOneTimeInit
<b>8a4e</b>   f0 30      BEQ <a href="#8a80">.__InitGameState__Exit</a>
</div>



<b>.__InitGameState__OneTimeInit</b>

<div class="disass_code"><b>8a50</b>   a2 04      LDX #$04
<b>8a52</b>   a9 00      LDA #$00
<a name="8a54"></a><b>8a54</b>   9d 20 d0   STA .Vic_BorderColour,X
<b>8a57</b>   ca         DEX 
<b>8a58</b>   10 fa      BPL <a href="#8a54">$8a54</a>
<b>8a5a</b>   a2 00      LDX #$00
<b>8a5c</b>   a9 10      LDA #$10
<a name="8a5e"></a><b>8a5e</b>   95 74      STA .Player1_HighScoreChars[6],X
<b>8a60</b>   95 83      STA .Player2_HighScoreChars[6],X
<b>8a62</b>   95 65      STA .HighScoreChars[6],X
<b>8a64</b>   e8         INX 
<b>8a65</b>   e0 06      CPX #$06
<b>8a67</b>   d0 f5      BNE <a href="#8a5e">$8a5e</a>
<b>8a69</b>   a9 00      LDA #$00
<b>8a6b</b>   85 d5      STA .InitGameState::DoOneTimeInit
<b>8a6d</b>   85 a4      STA .NumJoysticksMinusOne
<b>8a6f</b>   85 9e      STA .NumPlayerMinusOne
<b>8a71</b>   85 a8      STA .ExtraLifeFXCounter
<b>8a73</b>   20 39 74   JSR <a href="#7439">.BlankLines0and4ofSpaceChars</a>
<b>8a76</b>   a9 01      LDA #$01
<b>8a78</b>   85 d0      STA .NumPlayersAndJoysticksState
<b>8a7a</b>   20 5e 89   JSR <a href="#895e">.ResetLastAndHighScoresAndPlayerInfoText</a>
<b>8a7d</b>   20 7a 89   JSR <a href="#897a">.InitAll</a>
</div>
<a name="8a80"></a>


<b>.__InitGameState__Exit</b>

<div class="disass_code"><b>8a80</b>   60         RTS 
</div>
<a name="8a81"></a>

<div class="disass_comment">; 
</div>

<b>.RasterSetTitleMode</b>

<div class="disass_code"><b>8a81</b>   a9 3c      LDA #$3c
<b>8a83</b>   8d 07 98   STA .BackBufferVICMemControl
<b>8a86</b>   20 db 76   JSR <a href="#76db">.FillExpandedLatticeWithScrollingSteelWallChar</a>
<b>8a89</b>   78         SEI 
<b>8a8a</b>   a2 07      LDX #$07
<a name="8a8c"></a><b>8a8c</b>   bd 0b 86   LDA .RastIntTitleModeVICRegs,X
<b>8a8f</b>   95 54      STA .RastInt_vic_control1[],X
<b>8a91</b>   ca         DEX 
<b>8a92</b>   10 f8      BPL <a href="#8a8c">$8a8c</a>
<b>8a94</b>   a2 01      LDX #$01
<b>8a96</b>   8e 1a d0   STX .Vic_IntMask
<b>8a99</b>   e8         INX 
<b>8a9a</b>   86 a7      STX .MarqueeOrGameArea
<b>8a9c</b>   a9 28      LDA #$28
<b>8a9e</b>   8d 12 d0   STA .Vic_Raster
</div>


<div class="disass_comment">; Extended Color Text Mode : Off
; Bit Map Mode             : Off
; 25 rows                  : On
</div>


<div class="disass_code"><b>8aa1</b>   a9 18      LDA #$18
<b>8aa3</b>   8d 11 d0   STA .Vic_Control1
</div>


<div class="disass_comment">; 
</div>


<div class="disass_code"><b>8aa6</b>   a9 75      LDA #$75
<b>8aa8</b>   8d 14 03   STA .Krnl_IrqLo
<b>8aab</b>   a9 86      LDA #$86
<b>8aad</b>   8d 15 03   STA .Krnl_IrqHi
<b>8ab0</b>   58         CLI 
<b>8ab1</b>   60         RTS 
</div>



<b>.NmiStart</b>

<div class="disass_code"><b>8ab2</b>   58         CLI 
</div>
<a name="8ab3"></a>

<div class="disass_comment">; 
; Main entry point.
</div>

<b>.Start</b>

<div class="disass_comment">; Setup stack.
</div>
<div class="disass_code"><b>8ab3</b>   a2 ff      LDX #$ff
<b>8ab5</b>   9a         TXS 
</div>


<div class="disass_comment">; Turn off all CIA interrupts.
</div>


<div class="disass_code"><b>8ab6</b>   a9 7f      LDA #$7f
<b>8ab8</b>   8d 0d dc   STA .Cia1_IntCtrl
<b>8abb</b>   8d 0d dd   STA .Cia2_IntCtrl
</div>


<div class="disass_comment">; 
</div>


<div class="disass_code"><b>8abe</b>   a9 ff      LDA #$ff
<b>8ac0</b>   8d 04 dc   STA .Cia1_TimerALo
<b>8ac3</b>   8d 05 dc   STA .Cia1_TimerAHi
<b>8ac6</b>   a9 a0      LDA #$a0
<b>8ac8</b>   8d 04 dd   STA .Cia2_TimerALo
<b>8acb</b>   8d 05 dd   STA .Cia2_TimerAHi
<b>8ace</b>   a9 68      LDA #$68
<b>8ad0</b>   8d 06 dd   STA .Cia2_TimerBLo
<b>8ad3</b>   8d 07 dd   STA .Cia2_TimerBHi
<b>8ad6</b>   a9 17      LDA #$17
<b>8ad8</b>   8d 0e dd   STA .Cia2_CtrlA
<b>8adb</b>   8d 0f dd   STA .Cia2_CtrlB
</div>


<div class="disass_comment">; Make NMI (RUN-STOP+RESTORE or cartridge) restart game.
</div>


<div class="disass_code"><b>8ade</b>   78         SEI 
<b>8adf</b>   a9 b2      LDA #$b2
<b>8ae1</b>   8d 18 03   STA .Krnl_NmiLo
<b>8ae4</b>   a9 8a      LDA #$8a
<b>8ae6</b>   8d 19 03   STA .Krnl_NmiHi
<b>8ae9</b>   58         CLI 
</div>


<div class="disass_comment">; I/O area visible at $D000-$DFFF
; RAM visible at $A000-$BFFF
; KERNAL ROM visible at $E000-$FFFF
</div>


<div class="disass_code"><b>8aea</b>   a9 36      LDA #$36
<b>8aec</b>   85 01      STA .Zp_6510IO
</div>


<div class="disass_comment">; 
</div>


<div class="disass_code"><b>8aee</b>   20 15 8a   JSR <a href="#8a15">.InitGameState</a>
<b>8af1</b>   a9 08      LDA #$08
<b>8af3</b>   8d 0a 98   STA $980a
</div>


<div class="disass_comment">; Move 7b58-7d57 to 9e00-9fff.
</div>


<div class="disass_code"><b>8af6</b>   a0 00      LDY #$00
<b>8af8</b>   a2 58      LDX #$58
<b>8afa</b>   86 02      STX .__CoverLevel__LineAddressTable[24]
<b>8afc</b>   86 04      STX .__UnknownZP_04
<b>8afe</b>   a2 7b      LDX #$7b
<b>8b00</b>   86 03      STX .__CoverLevel__LineAddressTable[24]+1
<b>8b02</b>   e8         INX 
<b>8b03</b>   86 05      STX .__UnknownZP_05
<a name="8b05"></a><b>8b05</b>   b1 02      LDA (.__CoverLevel__LineAddressTable[24]),Y
<b>8b07</b>   99 00 9e   STA .MOVEDCopyExpandedLatticeSubsetToBackBuffer,Y
<b>8b0a</b>   b1 04      LDA (.__UnknownZP_04),Y
<b>8b0c</b>   99 00 9f   STA $9f00,Y
<b>8b0f</b>   c8         INY 
<b>8b10</b>   d0 f3      BNE <a href="#8b05">$8b05</a>
</div>


<div class="disass_comment">; 
</div>


<div class="disass_code"><b>8b12</b>   a9 03      LDA #$03
<b>8b14</b>   85 d6      STA .ExpandedLatticeSubsetPtrL
<b>8b16</b>   a9 40      LDA #$40
<b>8b18</b>   85 d7      STA .ExpandedLatticeSubsetPtrH
</div>


<div class="disass_comment">; 
; Moves 20 bytes from .Pre_level_Marquee_Text to $984e ($6c08-$6c1b to $984e-$9861).
</div>


<div class="disass_code"><b>8b1a</b>   a2 13      LDX #$13
<a name="8b1c"></a><b>8b1c</b>   bd 08 6c   LDA .Pre_level_Marquee_Text,X
<b>8b1f</b>   9d 4e 98   STA .CurrentPlayerInfoText[20],X
<b>8b22</b>   ca         DEX 
<b>8b23</b>   10 f7      BPL <a href="#8b1c">$8b1c</a>
</div>


<div class="disass_comment">; 
</div>


<div class="disass_code"><b>8b25</b>   a9 10      LDA #$10
<b>8b27</b>   a2 05      LDX #$05
<a name="8b29"></a><b>8b29</b>   9d 48 98   STA .ScoreChars[6],X
<b>8b2c</b>   ca         DEX 
<b>8b2d</b>   10 fa      BPL <a href="#8b29">$8b29</a>
</div>
<a name="8b2f"></a>

<div class="disass_comment">; 
</div>

<b>.Main__BEGIN__Is_Level_Zero</b>

<div class="disass_code"><b>8b2f</b>   a5 5d      LDA .Cave
<b>8b31</b>   d0 27      BNE <a href="#8b5a">.Main__Level_Not_Zero</a>
</div>



<b>.Main__Level_Is_Zero</b>

<div class="disass_code"><b>8b33</b>   a9 a0      LDA #$a0
<b>8b35</b>   8d 0c 98   STA .MusicTickRoutine::Voice1SustainLevel
<b>8b38</b>   20 81 8a   JSR <a href="#8a81">.RasterSetTitleMode</a>
<b>8b3b</b>   20 1b 86   JSR <a href="#861b">.SetupTitleScreen</a>
<b>8b3e</b>   20 9b 85   JSR <a href="#859b">.RunTitleScreen</a>
<b>8b41</b>   a2 00      LDX #$00
<b>8b43</b>   a9 7c      LDA #$7c
<a name="8b45"></a><b>8b45</b>   9d 50 0c   STA $0c50,X
<b>8b48</b>   9d 00 0d   STA $0d00,X
<b>8b4b</b>   9d 00 0e   STA $0e00,X
<b>8b4e</b>   9d f8 0e   STA $0ef8,X
<b>8b51</b>   e8         INX 
<b>8b52</b>   d0 f1      BNE <a href="#8b45">$8b45</a>
<b>8b54</b>   20 46 87   JSR <a href="#8746">.InitPlayers</a>
<b>8b57</b>   4c 7a 8b   JMP <a href="#8b7a">.Main__ClearSpaceChar</a>
</div>
<a name="8b5a"></a>


<b>.Main__Level_Not_Zero</b>

<div class="disass_code"><b>8b5a</b>   20 22 87   JSR <a href="#8722">.PrepareToPlayCave</a>
<b>8b5d</b>   a9 11      LDA #$11
<b>8b5f</b>   8d 7c 98   STA $987c
<b>8b62</b>   a5 a2      LDA .IsDemoMode
<b>8b64</b>   f0 0a      BEQ <a href="#8b70">$8b70</a>
<b>8b66</b>   20 13 89   JSR <a href="#8913">.DemoModeRunCave</a>
<b>8b69</b>   a9 00      LDA #$00
<b>8b6b</b>   85 a3      STA .TitleScreenInLicenseMode
<b>8b6d</b>   4c 77 8b   JMP <a href="#8b77">$8b77</a>
<a name="8b70"></a><b>8b70</b>   20 fb 88   JSR <a href="#88fb">.RunCave</a>
<b>8b73</b>   a9 00      LDA #$00
<b>8b75</b>   85 42      STA .AmeobaCouldGrowThisTick
<a name="8b77"></a><b>8b77</b>   20 2e 80   JSR <a href="#802e">.PostCaveRunActions</a>
</div>
<a name="8b7a"></a>


<b>.Main__ClearSpaceChar</b>

<div class="disass_code"><b>8b7a</b>   a2 07      LDX #$07
<b>8b7c</b>   a9 00      LDA #$00
</div>
<a name="8b7e"></a>


<b>.Main__ClearSpaceCharLoop</b>

<div class="disass_code"><b>8b7e</b>   9d 00 20   STA .CopiedTitleCharDataBlock0,X
<b>8b81</b>   ca         DEX 
<b>8b82</b>   10 fa      BPL <a href="#8b7e">.Main__ClearSpaceCharLoop</a>
<b>8b84</b>   30 a9      BMI <a href="#8b2f">.Main__BEGIN__Is_Level_Zero</a>
</div>



<b>.PartialSymbolTable</b>

<div class="disass_code"><b>8b86</b>   20 20 a8 00  d5 81 79 00  3a 53 4b 34  20 20 a8 00
<b>8b96</b>   e2 81 79 00  3a 4c 50 58  20 20 a8 00  ec 81 79 00
<b>8ba6</b>   3a 45 58 49  54 20 a8 00  ef 81 79 00  4f 50 54 49
<b>8bb6</b>   4f 4e a8 00  f0 81 00 00  3a 45 58 49  54 20 a8 00
<b>8bc6</b>   0e 82 7a 00  4f 55 54 57  41 4c a8 00  0f 82 00 00
<b>8bd6</b>   54 54 53 43  45 4e a8 00  27 82 00 00  3a 4c 4f 4f
<b>8be6</b>   50 31 a8 00  29 82 7c 00  3a 4c 4f 4f  50 34 a8 00
<b>8bf6</b>   4e 82 7c 00  3a 4c 4f 4f  50 35 a8 00  65 82 7c 00
<b>8c06</b>   3a 4c 4f 4f  50 36 a8 00  7c 82 7c 00  3a 53 4b 31
<b>8c16</b>   20 20 a8 00  92 82 7c 00  3a 4c 4f 4f  50 37 a8 00
<b>8c26</b>   96 82 7c 00  3a 4c 4f 4f  50 38 a8 00  ad 82 7c 00
<b>8c36</b>   3a 4c 4f 4f  50 39 a8 00  c4 82 7c 00  3a 53 4b 32
<b>8c46</b>   20 20 a8 00  d7 82 7c 00  3a 4c 4f 4f  50 41 a8 00
<b>8c56</b>   db 82 7c 00  3a 4c 4f 4f  50 42 a8 00  f2 82 7c 00
<b>8c66</b>   46 52 45 51  20 20 a8 00  03 83 00 00  3a 4c 4f 4f
<b>8c76</b>   50 43 a8 00  09 83 7c 00  42 4c 55 45  20 20 a8 00
<b>8c86</b>   8d 83 00 00  3a 53 4b 30  20 20 a8 00  91 83 7d 00
<b>8c96</b>   59 45 4c 4c  4f 57 a8 00  a1 83 00 00  3a 53 4b 30
<b>8ca6</b>   20 20 a8 00  a5 83 7e 00  4d 55 53 50  4c 59 a8 00
<b>8cb6</b>   ac 83 00 00  3a 53 4b 30  20 20 a8 00  b3 83 7f 00
<b>8cc6</b>   3a 53 4b 31  20 20 a8 00  fd 83 7f 00  3a 45 58 49
<b>8cd6</b>   54 20 a8 00  2d 84 7f 00  4d 41 53 51  55 45 a8 00
<b>8ce6</b>   2e 84 00 00  3a 4c 4f 4f  50 20 a8 00  23 55 31 3a
<b>8cf6</b>   35 2c 30 2c  31 38 2c 31  38 20 e7 ff  a9 00 20 bd
<b>8d06</b>   ff a9 0f a2  08 a0 0f 20  ba ff 20 c0  ff a9 01 a2
<b>8d16</b>   f2 a0 8c 20  bd ff a9 05  a2 08 a0 05  20 ba ff 20
<b>8d26</b>   c0 ff a2 0f  20 c9 ff a2  00 bd f3 8c  20 d2 ff e8
<b>8d36</b>   e0 0c d0 f5  20 cc ff a2  0f 20 c6 ff  a2 00 20 cf
<b>8d46</b>   ff c9 32 d0  1f 20 cf ff  c9 33 d0 18  a0 14 20 cf
<b>8d56</b>   ff 88 d0 fa  a9 05 20 c3  ff a9 0f 20  c3 ff 20 cc
<b>8d66</b>   ff 4c b3 8a  a9 70 85 fb  a9 00 85 fa  aa a8 91 fa
<b>8d76</b>   c8 d0 fb e8  e0 20 d0 f6  4c b3 8a 55  00 ff 00 50
<b>8d86</b>   00 ff ef ff  00 ff 00 ff  00 00 00 00  00 00 00 00
<b>8d96</b>   00 00 00 00  00 00 00 00  00 00 00 00  00 00 00 00
<b>8da6</b>   00 00 00 00  00 00 00 00  00 00 00 00  00 00 00 00
<b>8db6</b>   00 00 00 00  00 00 00 00  00 00 00 00  00 00 00 00
<b>8dc6</b>   00 00 00 00  00 00 00 00  00 00 00 00  00 00 00 00
<b>8dd6</b>   00 00 00 00  00 00 00 00  00 00 00 00  00 00 00 00
<b>8de6</b>   00 00 00 00  00 00 00 00  00 00 00 00  00 00 00 00
<b>8df6</b>   00 00 00 00  00 00 00 00  00 00 00 00  00 00 00 00
<b>8e06</b>   00 00 00 00  00 00 00 00  00 00 00 00  00 00 00 00
<b>8e16</b>   00 00 00 00  00 00 00 00  00 00 00 00  00 00 00 00
<b>8e26</b>   00 00 00 00  00 00 00 00  00 00 00 00  00 00 00 00
<b>8e36</b>   00 00 00 00  00 00 00 00  00 00 00 00  00 00 00 00
<b>8e46</b>   00 00 00 00  00 00 00 00  00 00 00 00  00 00 00 00
<b>8e56</b>   00 00 00 00  00 00 00 00  00 00 00 00  00 00 00 00
<b>8e66</b>   00 00 00 00  00 00 00 00  00 00 00 00  00 00 00 00
<b>8e76</b>   00 00 00 00  00 00 00 00  00 00 00 00  00 00 00 00
<b>8e86</b>   00 00 00 00  00 00 00 00  00 00 00 00  00 00 00 00
<b>8e96</b>   00 00 00 00  00 00 00 00  00 00 00 00  00 00 00 00
<b>8ea6</b>   00 00 00 00  00 00 00 00  00 00 00 00  00 00 00 00
<b>8eb6</b>   00 00 00 00  00 00 00 00  00 00 ff ff  ff ff ff ff
<b>8ec6</b>   ff ff ff ff  ff ff ff ff  ff ff ff ff  ff ff ff ff
<b>8ed6</b>   ff ff ff ff  ff ff ff ff  ff ff ff ff  ff ff ff ff
<b>8ee6</b>   ff ff ff ff  ff ff ff ff  ff ff ff ff  ff ff ff ff
<b>8ef6</b>   ff ff ff ff  ff ff ff ff  ff ff 00 00  00 00 00 00
<b>8f06</b>   00 00 00 00  00 00 00 00  00 00 00 00  00 00 00 00
<b>8f16</b>   00 00 00 00  00 00 00 00  00 00 00 00  00 00 00 00
<b>8f26</b>   00 00 00 00  00 00 00 00  00 00 00 00  00 00 00 00
<b>8f36</b>   00 00 00 00  00 00 00 00  00 00 ff ff  ff ff ff ff
<b>8f46</b>   ff ff ff ff  ff ff ff ff  ff ff ff ff  ff ff ff ff
<b>8f56</b>   ff ff ff ff  ff ff ff ff  ff ff ff ff  ff ff ff ff
<b>8f66</b>   ff ff ff ff  ff ff ff ff  ff ff ff ff  ff ff ff ff
<b>8f76</b>   ff ff ff ff  ff ff ff ff  ff ff 00 00  00 00 00 00
<b>8f86</b>   00 00 00 00  00 00 00 00  00 00 00 00  00 00 00 00
<b>8f96</b>   00 00 00 00  00 00 00 00  00 00 00 00  00 00 00 00
<b>8fa6</b>   00 00 00 00  00 00 00 00  00 00 00 00  00 00 00 00
<b>8fb6</b>   00 00 00 00  00 00 00 00  00 00 ff ff  ff ff ff ff
<b>8fc6</b>   ff ff ff ff  ff ff ff ff  ff ff ff ff  ff ff ff ff
<b>8fd6</b>   ff ff ff ff  ff ff ff ff  ff ff ff ff  ff ff ff ff
<b>8fe6</b>   ff ff ff ff  ff ff ff ff  ff ff ff ff  ff ff ff ff
<b>8ff6</b>   ff ff ff ff  ff ff ff ff  ff ff
</div>
</div>
</body>

</html>